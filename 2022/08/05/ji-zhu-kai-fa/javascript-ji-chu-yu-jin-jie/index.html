<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="JavaScriptåŸºç¡€ä¸è¿›é˜¶, elegantlee,Blog,åšå®¢,elegantlee.github.io,å‰ç«¯,Deep Learning,Machine Learning,Python,JavaScript">
    <meta name="description" content="è®°å½•JavaScript çš„åŸºç¡€çŸ¥è¯†ç‚¹å’Œé«˜çº§ç”¨æ³•">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    

    <title>JavaScriptåŸºç¡€ä¸è¿›é˜¶ | One Piece</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">One Piece</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>é¦–é¡µ</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>æ ‡ç­¾</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>åˆ†ç±»</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>å½’æ¡£</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>å…³äº</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>ç•™è¨€æ¿</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>å‹æƒ…é“¾æ¥</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="æœç´¢" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">One Piece</div>
        <div class="logo-desc">
            
            Talk is cheap, show me your code!!!
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			é¦–é¡µ
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			æ ‡ç­¾
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			åˆ†ç±»
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			å½’æ¡£
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			å…³äº
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			ç•™è¨€æ¿
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			å‹æƒ…é“¾æ¥
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('è¯·è¾“å…¥è®¿é—®æœ¬æ–‡ç« çš„å¯†ç ')).toString(CryptoJS.enc.Hex)) {
                alert('å¯†ç é”™è¯¯ï¼Œå°†è¿”å›ä¸»é¡µï¼');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/10.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">JavaScriptåŸºç¡€ä¸è¿›é˜¶</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- æ–‡ç« å†…å®¹è¯¦æƒ… -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/JavaScript/">
                                <span class="chip bg-color">JavaScript</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/" class="post-category">
                                æŠ€æœ¯å¼€å‘
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>å‘å¸ƒæ—¥æœŸ:&nbsp;&nbsp;
                    2022-08-05
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>æ›´æ–°æ—¥æœŸ:&nbsp;&nbsp;
                    2022-08-05
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>æ–‡ç« å­—æ•°:&nbsp;&nbsp;
                    25.3k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>é˜…è¯»æ—¶é•¿:&nbsp;&nbsp;
                    97 åˆ†
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>é˜…è¯»æ¬¡æ•°:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- æ˜¯å¦åŠ è½½ä½¿ç”¨è‡ªå¸¦çš„ prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.min.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <blockquote>
<p><font color="red">TODO</font>è¡¨ç¤ºéœ€è¦è¿›ä¸€æ­¥ç†è§£çš„å†…å®¹ï¼›</p>
<p>é«˜äº®==something==è¡¨ç¤ºå·²ç»å¤ä¹ åˆ°è¿™é‡Œï¼Œä¸‹ä¸€æ­¥çœ‹è¿™éƒ¨åˆ†çš„å†…å®¹ã€‚</p>
</blockquote>
<h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><p>JavaScript æ˜¯ä¸€ä¸ªé™æ€ä½œç”¨åŸŸè¯­è¨€ã€‚</p>
<h2 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h2><ul>
<li>åŸºæœ¬æ•°æ®ç±»å‹</li>
<li>å˜é‡çš„å®šä¹‰</li>
<li>å‡½æ•°</li>
<li>æ•°ç»„</li>
<li>ç±»å’Œå¯¹è±¡</li>
<li>thisæŒ‡å‘</li>
<li>ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾</li>
</ul>
<h3 id="åŸºæœ¬æ•°æ®ç±»å‹"><a href="#åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹"></a>åŸºæœ¬æ•°æ®ç±»å‹</h3><blockquote>
<ol>
<li>8ç§æ•°æ®ç±»å‹åŠåŒºåˆ«;</li>
<li>æ•°æ®ç±»å‹æ£€æµ‹çš„æ–¹å¼</li>
</ol>
</blockquote>
<h4 id="8ç§æ•°æ®ç±»å‹åŠåŒºåˆ«"><a href="#8ç§æ•°æ®ç±»å‹åŠåŒºåˆ«" class="headerlink" title="8ç§æ•°æ®ç±»å‹åŠåŒºåˆ«"></a>8ç§æ•°æ®ç±»å‹åŠåŒºåˆ«</h4><p>JavaScriptä¸­çš„<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Data_structures">ç±»å‹</a>é›†åˆåŒ…æ‹¬åŸå§‹å€¼å’Œå¯¹è±¡ã€‚</p>
<p><strong>åŸºæœ¬ç±»å‹(å€¼ç±»å‹ï¼ŒåŸå§‹å€¼)ï¼š</strong> Number(<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E9%9B%99%E7%B2%BE%E5%BA%A6%E6%B5%AE%E9%BB%9E%E6%95%B8">åŸºäº IEEE 754 æ ‡å‡†çš„åŒç²¾åº¦ 64 ä½äºŒè¿›åˆ¶æ ¼å¼çš„å€¼</a>ï¼Œ<code>-(2^53-1)~2^53-1</code>ï¼Œ+Infinityï¼Œ-Infinityï¼ŒNaNï¼Œ<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_VALUE">Number.MAX_VALUE</a>ï¼Œ<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/MIN_VALUE">Number.MIN_VALUE</a>)ï¼ŒString(å­—ç¬¦ä¸²ï¼Œä¸å¯æ”¹å˜ï¼Œå¯¹å­—ç¬¦ä¸²çš„æ“ä½œä¸€å®šæ˜¯è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²)ï¼ŒBoolean(å¸ƒå°”)ï¼ŒNull(ç©º)ï¼ŒUndefined(æœªå®šä¹‰)ï¼ŒBigIntç±»å‹ï¼ŒSymbol(ç¬¦å·)ã€‚åœ¨å†…å­˜ä¸­å æ®å›ºå®šå¤§å°ï¼Œä¿å­˜åœ¨<code>æ ˆå†…å­˜</code>ä¸­ï¼ˆ7ä¸ªï¼‰ï¼›</p>
<p>Numberç±»å‹ï¼š<code>MAX_VALUE</code> å±æ€§å€¼æ¥è¿‘äº <code>1.79E+308</code>ã€‚å¤§äº <code>MAX_VALUE</code> çš„å€¼ä»£è¡¨ â€œ<code>Infinity</code>â€œï¼›</p>
<ul>
<li>æ£€æŸ¥å€¼æ˜¯å¦åœ¨åŒç²¾åº¦æµ®ç‚¹æ•°çš„å–å€¼èŒƒå›´å†…ï¼š<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER"><code>Number.MAX_SAFE_INTEGER</code></a> å’Œ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/MIN_SAFE_INTEGER"><code>Number.MIN_SAFE_INTEGER</code></a>ï¼Œ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/isSafeInteger"><code>Number.isSafeInteger()</code></a>ã€‚è¶…å‡ºè¿™ä¸ªèŒƒå›´ï¼ŒJavaScript ä¸­çš„<strong>æ•´æ•°</strong>å°†ä¸å†å®‰å…¨ï¼Œè¯¥å€¼å°†è¡¨ç¤ºä¸ºä¸è¯¥å€¼è¿‘ä¼¼çš„åŒç²¾åº¦æµ®ç‚¹æ•°ã€‚</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&gt;</span> <span class="token number">42</span> <span class="token operator">/</span> <span class="token operator">+</span><span class="token number">0</span>
<span class="token number">Infinity</span>
<span class="token operator">&gt;</span> <span class="token number">42</span> <span class="token operator">/</span> <span class="token operator">-</span><span class="token number">0</span>
<span class="token operator">-</span><span class="token number">Infinity</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p><font color="red">// TODOï¼š å¾…æ·±å…¥</font></p>
<p><strong>å¼•ç”¨ç±»å‹(å¤æ‚æ•°æ®ç±»å‹ï¼Œå¯¹è±¡)ï¼š</strong> Object(å¯¹è±¡)ã€Function(å‡½æ•°)ã€‚å…¶ä»–è¿˜æœ‰Array(æ•°ç»„)ã€Date(æ—¥æœŸ)ã€RegExp(æ­£åˆ™è¡¨è¾¾å¼)ã€ç‰¹æ®Šçš„åŸºæœ¬åŒ…è£…ç±»å‹(Stringã€Numberã€Boolean) ä»¥åŠå•ä½“å†…ç½®å¯¹è±¡(Globalã€Math)ç­‰å¼•ç”¨ç±»å‹çš„å€¼æ˜¯å¯¹è±¡ä¿å­˜åœ¨<code>å †å†…å­˜</code>ä¸­ï¼Œæ ˆå†…å­˜å­˜å‚¨çš„æ˜¯å¯¹è±¡çš„å˜é‡æ ‡è¯†ç¬¦ä»¥åŠå¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„å­˜å‚¨åœ°å€ã€‚</p>
<p><strong><code>null</code>å’Œ<code>undefined</code>çš„åŒºåˆ«ï¼Ÿ</strong></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/null">null</a> æ˜¯è¡¨ç¤ºç¼ºå°‘çš„æ ‡è¯†ï¼ŒæŒ‡ç¤ºå˜é‡æœªæŒ‡å‘ä»»ä½•å¯¹è±¡ã€‚æŠŠ <code>null</code> ä½œä¸ºå°šæœªåˆ›å»ºçš„å¯¹è±¡ï¼Œæ›´å®¹æ˜“ç†è§£ã€‚nullä¸æ˜¯å…¨å±€å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œè½¬ä¸ºæ•°å€¼æ—¶ä¸º0ï¼›</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a>æ˜¯ä¸€ä¸ªè¡¨ç¤ºâ€æ— â€çš„åŸå§‹å€¼ï¼Œè½¬ä¸ºæ•°å€¼æ—¶ä¸ºNaNï¼›</p>
<p>å½“å£°æ˜çš„å˜é‡è¿˜æœªè¢«åˆå§‹åŒ–æ—¶ï¼Œå˜é‡çš„é»˜è®¤å€¼ä¸ºundefinedï¼›</p>
<p>nullç”¨æ¥è¡¨ç¤ºå°šæœªå­˜åœ¨çš„å¯¹è±¡ï¼Œå¸¸ç”¨æ¥è¡¨ç¤ºå‡½æ•°ä¼å›¾è¿”å›ä¸€ä¸ªä¸å­˜åœ¨çš„å¯¹è±¡ï¼›</p>
<p>undefinedè¡¨ç¤º â€œç¼ºå°‘å€¼â€ï¼Œå°±æ˜¯æ­¤å¤„åº”è¯¥æœ‰ä¸€ä¸ªå€¼ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å®šä¹‰ã€‚å…¸å‹ç”¨æ³•æ˜¯ï¼š</p>
<ol>
<li><p>å˜é‡è¢«å£°æ˜äº†ï¼Œä½†æ²¡æœ‰èµ‹å€¼æ—¶ï¼Œå°±ç­‰äº undefined</p>
</li>
<li><p>è°ƒç”¨å‡½æ•°æ—¶ï¼Œåº”è¯¥æä¾›çš„å‚æ•°æ²¡æœ‰æä¾›ï¼Œè¯¥å‚æ•°ç­‰äº undefined</p>
</li>
<li><p>å¯¹è±¡æ²¡æœ‰èµ‹å€¼çš„å±æ€§ï¼Œè¯¥å±æ€§çš„å€¼ä¸º undefined</p>
</li>
<li><p>å‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œé»˜è®¤è¿”å› undefined</p>
</li>
</ol>
<p>nullè¡¨ç¤ºâ€œæ²¡æœ‰å¯¹è±¡â€ï¼Œå³è¯¥å¤„ä¸åº”è¯¥æœ‰å€¼ã€‚å…¸å‹ç”¨æ³•æ˜¯ï¼š</p>
<ol>
<li><p>ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°çš„å‚æ•°ä¸æ˜¯å¯¹è±¡</p>
</li>
<li><p>ä½œä¸ºå¯¹è±¡åŸå‹é“¾çš„ç»ˆç‚¹</p>
</li>
</ol>
<p><strong>å»¶ä¼¸çŸ¥è¯†ç‚¹ï¼š</strong></p>
<p>ï¼ˆ1ï¼‰==å’Œ===çš„åŒºåˆ«ï¼Ÿ==ä¼šåœ¨æ¯”è¾ƒå€¼ä¹‹å‰æ‰§è¡Œæ•°æ®ç±»å‹è½¬æ¢ï¼ˆå…·ä½“è½¬æ¢è§„åˆ™å‚è€ƒ<code>çº¢å®ä¹¦</code>ï¼‰ã€‚</p>
<p>ï¼ˆ2ï¼‰æ£€æŸ¥undefinedçš„ä¸‰ç§æ–¹å¼ï¼Ÿ</p>
<ul>
<li>ä¸¥æ ¼å…¨ç­‰===ï¼Œ==ä¼šå…ˆæ£€æŸ¥å€¼æ˜¯å¦ä¸ºnullï¼Œnull ä¸ç­‰åŒäºundefinedï¼›</li>
<li>typeof</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/void">void</a> 0å¾—åˆ°åŸå§‹çš„undefined</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<p>Symbolï¼šä½¿ç”¨Symbolæ¥ä½œä¸ºå¯¹è±¡å±æ€§å(key)  ã€‚åˆ©ç”¨è¯¥ç‰¹æ€§ï¼ŒæŠŠä¸€äº›ä¸éœ€è¦å¯¹å¤–æ“ä½œå’Œè®¿é—®çš„å±æ€§ä½¿ç”¨Symbolæ¥å®šä¹‰</p>
<p>BigIntï¼šç”±äºåœ¨ Number ä¸ BigInt ä¹‹é—´è¿›è¡Œè½¬æ¢ä¼šæŸå¤±ç²¾åº¦ï¼Œå› è€Œå»ºè®®ä»…åœ¨å€¼å¯èƒ½å¤§äº2^53 æ—¶ä½¿ç”¨ BigInt ç±»å‹ï¼Œå¹¶ä¸”ä¸åœ¨ä¸¤ç§ç±»å‹ä¹‹é—´è¿›è¡Œç›¸äº’è½¬æ¢ã€‚</p>
<p>ä¼ é€é—¨ ğŸ‘‰<a target="_blank" rel="noopener" href="https://juejin.cn/post/7000754813801775111"># JavaScript æ•°æ®ç±»å‹ä¹‹ Symbolã€BigInt</a></p>
<h4 id="æ•°æ®ç±»å‹æ£€æµ‹çš„æ–¹å¼"><a href="#æ•°æ®ç±»å‹æ£€æµ‹çš„æ–¹å¼" class="headerlink" title="æ•°æ®ç±»å‹æ£€æµ‹çš„æ–¹å¼"></a>æ•°æ®ç±»å‹æ£€æµ‹çš„æ–¹å¼</h4><ol>
<li><p>typeof /instance of</p>
</li>
<li><p>typeof nullè¿”å›ä»€ä¹ˆ ï¼šobject</p>
</li>
<li><p>æ•°æ®ç±»å‹æ£€æµ‹çš„æ–¹å¼ï¼Ÿï¼ˆtypeofã€instanceofã€Object.prototype.toString.callï¼‰</p>
</li>
<li><p>instanceof å®ç°æœºåˆ¶ï¼ˆæ‰‹å†™ï¼Œå£è¿°å‡ºæ¥ï¼‰</p>
</li>
</ol>
<p> <strong>typeof</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// number</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// boolean</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token string">'mc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// string</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> Symbol<span class="token punctuation">)</span>           <span class="token comment">// function</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// function</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// function</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// object </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¼˜ç‚¹ï¼šèƒ½å¤Ÿå¿«é€ŸåŒºåˆ†<code>åŸºæœ¬æ•°æ®ç±»å‹</code></p>
<p>ç¼ºç‚¹ï¼šä¸èƒ½å°†Objectã€Arrayå’ŒNullåŒºåˆ†ï¼Œéƒ½è¿”å›object</p>
<p><strong>instanceof</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token keyword">instanceof</span> <span class="token class-name">Number</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token keyword">instanceof</span> <span class="token class-name">Boolean</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// false </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'str'</span> <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// false  </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">// true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¼˜ç‚¹ï¼šèƒ½å¤ŸåŒºåˆ†Arrayã€Objectå’ŒFunctionï¼Œé€‚åˆç”¨äºåˆ¤æ–­è‡ªå®šä¹‰çš„ç±»å®ä¾‹å¯¹è±¡ï¼Œç”¨äºåŒºåˆ†å¼•ç”¨ç±»å‹çš„æ•°æ®ï¼›</p>
<p>ç¼ºç‚¹ï¼šNumberï¼ŒBooleanï¼ŒStringåŸºæœ¬æ•°æ®ç±»å‹ä¸èƒ½åˆ¤æ–­</p>
<p><strong>Object.prototype.toString.call()</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> toString <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//[object Number]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//[object Boolean]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'mc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//[object String]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//[object Array]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//[object Object]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[object Function]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//[object Undefined]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[object Null]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¼˜ç‚¹ï¼šç²¾å‡†åˆ¤æ–­æ•°æ®ç±»å‹</p>
<p>ç¼ºç‚¹ï¼šå†™æ³•ç¹çä¸å®¹æ˜“è®°ï¼Œæ¨èè¿›è¡Œå°è£…åä½¿ç”¨</p>
<h5 id="instanceof-çš„ä½œç”¨"><a href="#instanceof-çš„ä½œç”¨" class="headerlink" title="instanceof çš„ä½œç”¨"></a>instanceof çš„ä½œç”¨</h5><p>ç”¨äºåˆ¤æ–­ä¸€ä¸ªå¼•ç”¨ç±»å‹æ˜¯å¦å±äºæŸæ„é€ å‡½æ•°ï¼›</p>
<p>è¿˜å¯ä»¥åœ¨ç»§æ‰¿å…³ç³»ä¸­ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯å¦å±äºå®ƒçš„çˆ¶ç±»å‹ã€‚</p>
<h5 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h5><p>åŸå‹é“¾ã€‚</p>
<ul>
<li>prototypeï¼šåªè¦åˆ›å»ºä¸€ä¸ªå‡½æ•°å°±ä¼šæŒ‰ç‰¹å®šçš„è§„åˆ™ä¸ºè¿™ä¸ªå‡½æ•°åˆ›å»ºä¸€ä¸ª prototype å±æ€§ï¼ˆæŒ‡å‘åŸå‹å¯¹è±¡ï¼‰ã€‚</li>
<li>å¯¹è±¡ä¸Šæš´éœ²çš„ _<em>proto</em>_ å±æ€§ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§å¯ä»¥è®¿é—®å¯¹è±¡çš„åŸå‹ã€‚</li>
<li>prototype æ˜¯æ„é€ å‡½æ•°è‡ªå¸¦çš„å¯¹è±¡ï¼Œ_<em>proto</em>_ æ˜¯å®ä¾‹åŒ–å¯¹è±¡çš„å±æ€§ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°çš„ prototypeã€‚</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">instance_of</span><span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> constructor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//L è¡¨ç¤ºå·¦è¡¨è¾¾å¼ï¼ŒR è¡¨ç¤ºå³è¡¨è¾¾å¼</span>
 <span class="token keyword">while</span> <span class="token punctuation">(</span>object <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
   <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token operator">===</span> constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> 
     <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
   object <span class="token operator">=</span> object<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span> 
 <span class="token punctuation">}</span> 
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>Lçš„__proto__æ˜¯ä¸æ˜¯å¼ºç­‰äº R.prototypeï¼Œä¸ç­‰äºå†æ‰¾  L.__proto__ .__proto__  ç›´åˆ°__proto__ ä¸ºnullã€‚</code></p>
<h5 id="instanceof-å’Œ-typeof-çš„åŒºåˆ«ï¼š"><a href="#instanceof-å’Œ-typeof-çš„åŒºåˆ«ï¼š" class="headerlink" title="instanceof å’Œ typeof çš„åŒºåˆ«ï¼š"></a>instanceof å’Œ typeof çš„åŒºåˆ«ï¼š</h5><p>typeof åœ¨å¯¹å€¼ç±»å‹ numberã€stringã€boolean ã€null ã€ undefinedã€ ä»¥åŠå¼•ç”¨ç±»å‹çš„ function çš„ååº”æ˜¯ç²¾å‡†çš„ï¼›ä½†æ˜¯ï¼Œå¯¹äºå¯¹è±¡{ } ã€æ•°ç»„[ ] ã€null éƒ½ä¼šè¿”å›objectã€‚</p>
<p>ä¸ºäº†å¼¥è¡¥è¿™ä¸€ç‚¹ï¼Œ<u>instanceof ä»åŸå‹çš„è§’åº¦ï¼Œæ¥åˆ¤æ–­æŸå¼•ç”¨å±äºå“ªä¸ªæ„é€ å‡½æ•°ï¼Œä»è€Œåˆ¤å®šå®ƒçš„æ•°æ®ç±»å‹</u>ã€‚</p>
<p><font color="red">// TODO: </font>æ·±å…¥ç†è§£ç±»çš„ prototype å±æ€§å’Œå¯¹è±¡å®ä¾‹çš„ _<em>proto</em>_ å±æ€§</p>
<h3 id="å˜é‡çš„å®šä¹‰"><a href="#å˜é‡çš„å®šä¹‰" class="headerlink" title="å˜é‡çš„å®šä¹‰"></a>å˜é‡çš„å®šä¹‰</h3><h4 id="var-let-conståŒºåˆ«"><a href="#var-let-conståŒºåˆ«" class="headerlink" title="var let conståŒºåˆ«"></a>var let conståŒºåˆ«</h4><ol>
<li> varå®šä¹‰çš„å˜é‡æ˜¯åŒ…å«å®ƒçš„å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œåœ¨å‡½æ•°å†…å®šä¹‰å˜é‡çœç•¥varä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡ã€‚ç”¨varå¯ä»¥é‡å¤å®šä¹‰åŒä¸€ä¸ªå˜é‡ã€‚letå’Œconstå®šä¹‰çš„å˜é‡ï¼Œåªèƒ½åœ¨å—ä½œç”¨åŸŸé‡Œè®¿é—®ï¼Œä¸èƒ½é‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡ã€‚constç”¨æ¥å®šä¹‰å¸¸é‡ï¼Œä½¿ç”¨æ—¶å¿…é¡»åˆå§‹åŒ–(å³å¿…é¡»èµ‹å€¼)ï¼Œä¸”ä¸èƒ½ä¿®æ”¹ã€‚</li>
<li> åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­ï¼ŒåŸºäºletå£°æ˜çš„å…¨å±€å˜é‡å’Œå…¨å±€å¯¹è±¡GOï¼ˆwindowï¼‰æ²¡æœ‰ä»»ä½•å…³ç³» ï¼›varå£°æ˜çš„å˜é‡ä¼šå’ŒGOæœ‰æ˜ å°„å…³ç³»ï¼›</li>
<li> letå’Œconst<code>ä¼šäº§ç”Ÿæš‚æ—¶æ€§æ­»åŒº</code>ï¼šåœ¨è§£æä»£ç æ—¶ï¼ŒJavaScriptå¼•æ“ä¹Ÿä¼šæ³¨æ„å‡ºç°åœ¨å—åé¢çš„letå£°æ˜ã€‚åœ¨letå£°æ˜ä¹‹å‰çš„æ‰§è¡Œç¬é—´è¢«ç§°ä¸ºâ€œæš‚æ—¶æ€§æ­»åŒºâ€ï¼ˆtemporal dead zoneï¼‰ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µå¼•ç”¨ä»»ä½•åé¢æ‰å£°æ˜çš„å˜é‡éƒ½ä¼šæŠ›å‡ºRefferenceErrorã€‚</li>
</ol>
<h4 id="ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾"><a href="#ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾" class="headerlink" title="ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾"></a>ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾</h4><p><strong>ä½œç”¨åŸŸï¼š</strong>ç®€å•æ¥è¯´ä½œç”¨åŸŸå°±æ˜¯å˜é‡ä¸å‡½æ•°çš„å¯è®¿é—®èŒƒå›´ã€‚ä½œç”¨åŸŸæœ€å¤§çš„ç”¨å¤„å°±æ˜¯<code>éš”ç¦»å˜é‡</code>ï¼Œä¸åŒä½œç”¨åŸŸä¸‹åŒåå˜é‡ä¸ä¼šæœ‰å†²çªã€‚</p>
<p><strong>ä½œç”¨åŸŸé“¾ï¼š</strong>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå˜é‡åˆ°åˆ›å»ºè¯¥å˜é‡çš„å‡½æ•°çš„ä½œç”¨åŸŸä¸­å–å€¼ã€‚ä½†æ˜¯å¦‚æœåœ¨å½“å‰ä½œç”¨åŸŸä¸­æ²¡æœ‰æŸ¥åˆ°ï¼Œå°±ä¼šå‘ä¸Šçº§ä½œç”¨åŸŸå»æŸ¥ï¼Œç›´åˆ°æŸ¥åˆ°å…¨å±€ä½œç”¨åŸŸï¼Œè¿™ä¹ˆä¸€ä¸ªæŸ¥æ‰¾è¿‡ç¨‹å½¢æˆçš„é“¾æ¡å°±å«åšä½œç”¨åŸŸé“¾ã€‚</p>
<hr>
<h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><h4 id="ç®­å¤´å‡½æ•°å’Œæ™®é€šå‡½æ•°çš„åŒºåˆ«"><a href="#ç®­å¤´å‡½æ•°å’Œæ™®é€šå‡½æ•°çš„åŒºåˆ«" class="headerlink" title="ç®­å¤´å‡½æ•°å’Œæ™®é€šå‡½æ•°çš„åŒºåˆ«"></a>ç®­å¤´å‡½æ•°å’Œæ™®é€šå‡½æ•°çš„åŒºåˆ«</h4><p>ç‰¹æ€§ï¼š</p>
<ol>
<li> <code>ç®­å¤´å‡½æ•°æ²¡æœ‰constructor</code>ï¼Œæ˜¯åŒ¿åå‡½æ•°ï¼Œä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ï¼Œä¸èƒ½é€šè¿‡new è°ƒç”¨ï¼›</li>
<li> <code>æ²¡æœ‰new.target å±æ€§</code>ã€‚åœ¨é€šè¿‡newè¿ç®—ç¬¦è¢«åˆå§‹åŒ–çš„å‡½æ•°æˆ–æ„é€ æ–¹æ³•ä¸­ï¼Œnew.targetè¿”å›ä¸€ä¸ªæŒ‡å‘æ„é€ æ–¹æ³•æˆ–å‡½æ•°çš„å¼•ç”¨ã€‚åœ¨æ™®é€šçš„å‡½æ•°è°ƒç”¨ä¸­ï¼Œnew.target çš„å€¼æ˜¯undefinedï¼›</li>
<li> <code>ç®­å¤´å‡½æ•°ä¸ç»‘å®šArguments å¯¹è±¡</code>ã€‚å–è€Œä»£ä¹‹ç”¨restå‚æ•°â€¦ï¼ˆå‰©ä½™å‚æ•°ï¼‰è§£å†³ã€‚</li>
<li> <code>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisæŒ‡é’ˆ</code>ï¼Œæ•è·å…¶æ‰€åœ¨ä½œç”¨åŸŸé“¾çš„ä¸Šä¸€çº§ä½œç”¨åŸŸä¸­çš„thisã€‚é€šè¿‡ call() æˆ– apply() æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œåªèƒ½ä¼ é€’å‚æ•°ï¼ˆä¸èƒ½ç»‘å®šthisï¼‰ï¼Œä»–ä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼šè¢«å¿½ç•¥ã€‚ï¼ˆè¿™ç§ç°è±¡å¯¹äºbindæ–¹æ³•åŒæ ·æˆç«‹ï¼‰ï¼›</li>
<li> ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹å±æ€§ Fn.prototype å€¼ä¸º undefinedï¼›</li>
<li> ç®­å¤´å‡½æ•°ä¸èƒ½å½“åšGeneratorå‡½æ•°,ä¸èƒ½ä½¿ç”¨yieldå…³é”®å­—ï¼›</li>
</ol>
<h4 id="ç«‹å³æ‰§è¡Œå‡½æ•°"><a href="#ç«‹å³æ‰§è¡Œå‡½æ•°" class="headerlink" title="ç«‹å³æ‰§è¡Œå‡½æ•°"></a>ç«‹å³æ‰§è¡Œå‡½æ•°</h4><p>ç«‹å³æ‰§è¡Œå‡½æ•°å°±æ˜¯å£°æ˜ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œç„¶åé©¬ä¸Šè°ƒç”¨è¿™ä¸ªåŒ¿åå‡½æ•°ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">alert</span><span class="token punctuation">(</span>â€œè¿™æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°â€<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>ä½œç”¨ï¼šç«‹å³æ‰§è¡Œå‡½æ•°ä¼šå½¢æˆä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸï¼Œæˆ‘ä»¬å¯ä»¥å°è£…ä¸€äº›ä¸´æ—¶å˜é‡æˆ–è€…å±€éƒ¨å˜é‡ï¼Œé¿å…æ±¡æŸ“å…¨å±€å˜é‡ã€‚</p>
<h4 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h4><p>æ‰‹å†™ä¸€ä¸ªé—­åŒ…å‡½æ•°</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">myClosure</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">++</span>num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token function">myClosure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// fnæ˜¯ä¸€ä¸ªé—­åŒ…</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h5 id="é—­åŒ…-å“ªé‡Œç”¨åˆ°äº†-ä¸ºä»€ä¹ˆç”¨-æœ‰ä»€ä¹ˆä½œç”¨"><a href="#é—­åŒ…-å“ªé‡Œç”¨åˆ°äº†-ä¸ºä»€ä¹ˆç”¨-æœ‰ä»€ä¹ˆä½œç”¨" class="headerlink" title="é—­åŒ… å“ªé‡Œç”¨åˆ°äº† ä¸ºä»€ä¹ˆç”¨ æœ‰ä»€ä¹ˆä½œç”¨"></a>é—­åŒ… å“ªé‡Œç”¨åˆ°äº† ä¸ºä»€ä¹ˆç”¨ æœ‰ä»€ä¹ˆä½œç”¨</h5><blockquote>
<p>é—­åŒ…çš„ç‰¹æ€§ä½¿å¾—å‡½æ•°å¯ä»¥è®¿é—®åˆ°å¤–å±‚ä½œç”¨åŸŸã€‚å¦‚æœä¸€ä¸ªå†…å±‚å‡½æ•°è®¿é—®å¤–å±‚å‡½æ•°ä¸­çš„å˜é‡ï¼Œå¤–å±‚å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œä½†æ˜¯å†…å±‚å‡½æ•°è¿˜æ²¡æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œå†…å±‚å‡½æ•°æƒ³è¦è®¿é—®å¤–å±‚å‡½æ•°ä¸­çš„å˜é‡ï¼Œå˜é‡ä¼šç›´åˆ°å†…å±‚å‡½æ•°æ‰§è¡Œå®Œæ—¶å®ƒçš„å­˜å‚¨ç©ºé—´æ‰ä¼šè¢«æ”¶å›ã€‚</p>
<p>ä½¿ç”¨åœºæ™¯ï¼š</p>
<p>ï¼ˆ1ï¼‰æµè§ˆå™¨äº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼›</p>
<p>ï¼ˆ2ï¼‰æ¨¡æ‹Ÿç§æœ‰æ–¹æ³•</p>
<p>æ€§èƒ½è€ƒé‡ï¼š</p>
<p>å¦‚æœä¸æ˜¯æŸäº›ç‰¹å®šä»»åŠ¡éœ€è¦ä½¿ç”¨é—­åŒ…ï¼Œåœ¨å…¶å®ƒå‡½æ•°ä¸­åˆ›å»ºå‡½æ•°æ˜¯ä¸æ˜æ™ºçš„ï¼Œå› ä¸ºé—­åŒ…åœ¨å¤„ç†é€Ÿåº¦å’Œå†…å­˜æ¶ˆè€—æ–¹é¢å¯¹è„šæœ¬æ€§èƒ½å…·æœ‰è´Ÿé¢å½±å“ã€‚</p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// åœ¨åˆ›å»ºæ–°çš„å¯¹è±¡æˆ–è€…ç±»æ—¶ï¼Œæ–¹æ³•é€šå¸¸åº”è¯¥å…³è”äºå¯¹è±¡çš„åŸå‹ï¼Œè€Œä¸æ˜¯å®šä¹‰åˆ°å¯¹è±¡çš„æ„é€ å™¨ä¸­ã€‚</span>
<span class="token keyword">function</span> <span class="token function">MyObject</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getMessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">// ä¿®æ”¹å¦‚ä¸‹ï¼Œå°†æ–¹æ³•ä¸å¯¹è±¡çš„åŸå‹è¿›è¡Œå…³è”</span>
<span class="token keyword">function</span> <span class="token function">MyObject</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">MyObject</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">MyObject</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getMessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/* 1. å®šæ—¶å™¨ä¼ å‚ */</span>
<span class="token comment">//åŸç”Ÿçš„setTimeoutä¼ é€’çš„ç¬¬ä¸€ä¸ªå‡½æ•°ä¸èƒ½å¸¦å‚æ•°</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>

<span class="token comment">//é€šè¿‡é—­åŒ…å¯ä»¥å®ç°ä¼ å‚æ•ˆæœ</span>
<span class="token keyword">function</span> <span class="token function">myfunc</span><span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token function">myfunc</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>f1<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">"btn"</span><span class="token operator">&gt;</span>button<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token comment">/* 2. äº‹ä»¶ä¸­çš„å›è°ƒå‡½æ•° */</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">autorun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#btn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"autorunæ‰§è¡Œå®Œæ¯•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token comment">/* 3. è‡ªæ‰§è¡Œå‡½æ•° */</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//ä½¿ç”¨IIFE</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>

<span class="token comment">/* 4. é˜²æŠ–èŠ‚æµ */</span>
<span class="token comment">/*
ä½¿ç”¨åœºæ™¯
æ¯”å¦‚ç»‘å®šå“åº”é¼ æ ‡ç§»åŠ¨ã€çª—å£å¤§å°è°ƒæ•´ã€æ»šå±ç­‰äº‹ä»¶æ—¶ï¼Œç»‘å®šçš„å‡½æ•°è§¦å‘çš„é¢‘ç‡ä¼šå¾ˆé¢‘ç¹ã€‚è‹¥ç¨å¤„ç†å‡½æ•°å¾®å¤æ‚ï¼Œéœ€è¦è¾ƒå¤šçš„è¿ç®—æ‰§è¡Œæ—¶é—´å’Œèµ„æºï¼Œå¾€å¾€ä¼šå‡ºç°å»¶è¿Ÿï¼Œç”šè‡³å¯¼è‡´å‡æ­»æˆ–è€…å¡é¡¿æ„Ÿã€‚ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œè¿™æ—¶å°±å¾ˆæœ‰å¿…è¦ä½¿ç”¨ debounce æˆ– throttleäº†ã€‚
debounce ä¸ throttle åŒºåˆ«

é˜²æŠ– ï¼ˆdebounceï¼‰ ï¼šå¤šæ¬¡è§¦å‘ï¼Œåªåœ¨æœ€åä¸€æ¬¡è§¦å‘æ—¶ï¼Œæ‰§è¡Œç›®æ ‡å‡½æ•°ã€‚
èŠ‚æµï¼ˆthrottleï¼‰ï¼šé™åˆ¶ç›®æ ‡å‡½æ•°è°ƒç”¨çš„é¢‘ç‡ï¼Œæ¯”å¦‚ï¼š1så†…ä¸èƒ½è°ƒç”¨2æ¬¡ã€‚
*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="é—­åŒ…æ˜¯ä»€ä¹ˆ"><a href="#é—­åŒ…æ˜¯ä»€ä¹ˆ" class="headerlink" title="é—­åŒ…æ˜¯ä»€ä¹ˆ"></a>é—­åŒ…æ˜¯ä»€ä¹ˆ</h5><p>çº¢å®ä¹¦ï¼šé—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦å¤–ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°ã€‚</p>
<p>MDNï¼š<em>é—­åŒ…</em>æ˜¯ç”±å‡½æ•°ä»¥åŠå£°æ˜è¯¥å‡½æ•°çš„è¯æ³•ç¯å¢ƒç»„åˆè€Œæˆçš„ã€‚è¯¥ç¯å¢ƒåŒ…å«äº†è¿™ä¸ªé—­åŒ…åˆ›å»ºæ—¶ä½œç”¨åŸŸå†…çš„ä»»ä½•å±€éƒ¨å˜é‡ã€‚è¯æ³•ï¼ˆlexicalï¼‰ä¸€è¯æŒ‡çš„æ˜¯ï¼Œè¯æ³•ä½œç”¨åŸŸæ ¹æ®æºä»£ç ä¸­å£°æ˜å˜é‡çš„ä½ç½®æ¥ç¡®å®šè¯¥å˜é‡åœ¨ä½•å¤„å¯ç”¨ã€‚åµŒå¥—å‡½æ•°å¯è®¿é—®å£°æ˜äºå®ƒä»¬å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ã€‚</p>
<h5 id="å½¢æˆåŸå› "><a href="#å½¢æˆåŸå› " class="headerlink" title="å½¢æˆåŸå› "></a>å½¢æˆåŸå› </h5><p>å†…éƒ¨çš„å‡½æ•°å­˜åœ¨å¤–éƒ¨ä½œç”¨åŸŸçš„å¼•ç”¨å°±ä¼šå¯¼è‡´é—­åŒ…ã€‚</p>
<h5 id="é—­åŒ…å˜é‡å­˜å‚¨çš„ä½ç½®"><a href="#é—­åŒ…å˜é‡å­˜å‚¨çš„ä½ç½®" class="headerlink" title="é—­åŒ…å˜é‡å­˜å‚¨çš„ä½ç½®"></a>é—­åŒ…å˜é‡å­˜å‚¨çš„ä½ç½®</h5><p><strong>é—­åŒ…ä¸­çš„å˜é‡å­˜å‚¨çš„ä½ç½®æ˜¯å †å†…å­˜ã€‚</strong></p>
<h5 id="é—­åŒ…çš„ä½œç”¨"><a href="#é—­åŒ…çš„ä½œç”¨" class="headerlink" title="é—­åŒ…çš„ä½œç”¨"></a>é—­åŒ…çš„ä½œç”¨</h5><ul>
<li><code>ä¿æŠ¤</code>å‡½æ•°çš„ç§æœ‰å˜é‡ä¸å—å¤–éƒ¨çš„å¹²æ‰°ã€‚å½¢æˆä¸é”€æ¯çš„æ ˆå†…å­˜ã€‚</li>
<li><code>ä¿å­˜</code>ï¼ŒæŠŠä¸€äº›å‡½æ•°å†…çš„å€¼ä¿å­˜ä¸‹æ¥ã€‚é—­åŒ…å¯ä»¥å®ç°æ–¹æ³•å’Œå±æ€§çš„ç§æœ‰åŒ–</li>
</ul>
<h5 id="é—­åŒ…ç¼ºç‚¹"><a href="#é—­åŒ…ç¼ºç‚¹" class="headerlink" title="é—­åŒ…ç¼ºç‚¹"></a>é—­åŒ…ç¼ºç‚¹</h5><p>å¯¼è‡´å‡½æ•°çš„å˜é‡ä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿‡å¤šçš„é—­åŒ…å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚å¼€å‘æ¨¡å¼performance é¢æ¿ å’Œ memory é¢æ¿å¯ä»¥æ‰¾åˆ°æ³„éœ²çš„ç°è±¡å’Œä½ç½®ã€‚</p>
<h4 id="References"><a href="#References" class="headerlink" title="References"></a>References</h4><p>ğŸ‘‰<a target="_blank" rel="noopener" href="https://juejin.cn/post/6937469222251560990">JS é—­åŒ…ç»å…¸ä½¿ç”¨åœºæ™¯å’Œå«é—­åŒ…å¿…åˆ·é¢˜ - æ˜é‡‘ (juejin.cn)</a></p>
<p>ğŸ‘‰<a target="_blank" rel="noopener" href="https://juejin.cn/post/6948415598632108063">é—­åŒ…çš„ä½¿ç”¨åœºæ™¯ï¼Œä½¿ç”¨é—­åŒ…éœ€è¦æ³¨æ„ä»€ä¹ˆ - æ˜é‡‘ (juejin.cn)</a></p>
<hr>
<h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><blockquote>
<ol>
<li>éå†</li>
<li>åˆ¤æ–­</li>
<li>æ¸…ç©º</li>
<li>å»é‡</li>
</ol>
</blockquote>
<h4 id="éå†"><a href="#éå†" class="headerlink" title="éå†"></a>éå†</h4><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Loops_and_iteration">MDN</a></p>
<h5 id="forå¾ªç¯éå†ï¼ˆES1ï¼‰"><a href="#forå¾ªç¯éå†ï¼ˆES1ï¼‰" class="headerlink" title="forå¾ªç¯éå†ï¼ˆES1ï¼‰"></a>forå¾ªç¯éå†ï¼ˆES1ï¼‰</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="for-inï¼ˆES1ï¼‰"><a href="#for-inï¼ˆES1ï¼‰" class="headerlink" title="for-inï¼ˆES1ï¼‰"></a>for-inï¼ˆES1ï¼‰</h5><p>for-inéå†çš„ä¸æ˜¯æ•°ç»„ä¸­çš„valueï¼Œè€Œæ˜¯indexã€‚</p>
<p>for-inè¯­å¥å¾ªç¯ä¸€ä¸ªæŒ‡å®šçš„å˜é‡æ¥å¾ªç¯ä¸€ä¸ªå¯¹è±¡æ‰€æœ‰å¯æšä¸¾çš„å±æ€§ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¾“å‡º "0", "1", "2", "foo"</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¾“å‡º "3", "5", "7"</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ³¨æ„ for...of çš„è¾“å‡ºæ²¡æœ‰å‡ºç° "hello"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="forEachæ–¹æ³•ï¼ˆES5ï¼‰"><a href="#forEachæ–¹æ³•ï¼ˆES5ï¼‰" class="headerlink" title="forEachæ–¹æ³•ï¼ˆES5ï¼‰"></a>forEachæ–¹æ³•ï¼ˆES5ï¼‰</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">(</span>currentValue <span class="token punctuation">[</span><span class="token punctuation">,</span> index <span class="token punctuation">[</span><span class="token punctuation">,</span> array<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">,</span> thisArg<span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>åªæ”¯æŒIE8ä»¥ä¸Šçš„æµè§ˆå™¨ï¼Œæœ‰ä¸€å®šçš„å±€é™æ€§</p>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>è¿™ç§å†™æ³•çš„é—®é¢˜åœ¨äºï¼Œæ— æ³•ä¸­é€”è·³å‡º <code>forEach</code> å¾ªç¯ï¼Œ<code>break</code> å‘½ä»¤æˆ– <code>return</code> å‘½ä»¤éƒ½ä¸èƒ½å¥æ•ˆï¼Œåªèƒ½æŠ›å‡ºå¼‚å¸¸é€€å‡ºå¾ªç¯ã€‚</li>
<li>ä¸èƒ½åœ¨å®ƒçš„å¾ªç¯ä½“ä¸­ä½¿ç”¨ <code>await</code>ã€‚</li>
<li>å¦‚æœæ•°ç»„åœ¨è¿­ä»£è¿‡ç¨‹æ—¶è¢«ä¿®æ”¹äº†ï¼Œåˆ™å…¶ä»–å…ƒç´ ä¼šè¢«è·³è¿‡ã€‚</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">/*
* value: å½“å‰æ­£åœ¨éå†çš„å¯¹è±¡
* index: å½“å‰æ­£åœ¨éå†çš„å¯¹è±¡çš„ç´¢å¼•
* array: å½“å‰æ­£åœ¨éå†çš„æ•°ç»„(å°±æ˜¯arr---è°ƒç”¨è€…)
*/</span>
arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(index);</span>
    <span class="token comment">// console.log(array);</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="for-ofï¼ˆES6ï¼‰"><a href="#for-ofï¼ˆES6ï¼‰" class="headerlink" title="for-ofï¼ˆES6ï¼‰"></a>for-ofï¼ˆES6ï¼‰</h5><p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å¯ä»¥åœ¨å†…éƒ¨ä½¿ç”¨await;</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> value <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="for-inã€for-of-ã€forEach-ä¸‰è€…çš„åŒºåˆ«"><a href="#for-inã€for-of-ã€forEach-ä¸‰è€…çš„åŒºåˆ«" class="headerlink" title="for inã€for of ã€forEach ä¸‰è€…çš„åŒºåˆ«"></a>for inã€for of ã€forEach ä¸‰è€…çš„åŒºåˆ«</h4><p><code>for...in</code> å’Œ <code>for...of</code> éƒ½å¯ä»¥ç”¨æ¥éå†å¯¹è±¡çš„å±æ€§å’Œæ•°ç»„ã€‚ä¸åŒçš„æ˜¯ï¼š</p>
<ol>
<li><code>for...in</code> éå†å¯¹è±¡è¾“å‡ºçš„æ˜¯å¯¹è±¡çš„ <code>key</code> å€¼ï¼Œéå†æ•°ç»„è¾“å‡ºçš„æ˜¯ <code>index</code> ç´¢å¼•å€¼ï¼›<code>for...of</code> éå†å¯¹è±¡å’Œæ•°ç»„è¾“å‡ºçš„æ˜¯éƒ½æ˜¯ <code>value</code>ï¼Œè€Œä¸”éå†å¯¹è±¡éœ€è¦ä½¿ç”¨ <code>Object.keys()</code> è·å–å¯¹è±¡çš„ <code>key</code> å€¼é›†åˆåï¼Œå†ä½¿ç”¨ <code>for of</code>ï¼›<code>forEach</code> æ›´å¤šçš„ç”¨æ¥éå†æ•°ç»„ï¼Œå®ƒåŒ…æ‹¬ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ï¼ˆ<code>value</code>ï¼Œ<code>index</code> å’Œæ•° <code>arr</code>ï¼‰</li>
<li>åœ¨ <code>forEach</code> å†…éƒ¨ä¸èƒ½ä½¿ç”¨ <code>await</code>ï¼Œä¹Ÿæ— æ³•åœ¨éå†è¿‡ç¨‹ä¸­é€šè¿‡ <code>break</code> æˆ– <code>return</code> è·³å‡ºå¾ªç¯ï¼Œåªèƒ½æŠ›å‡ºå¼‚å¸¸è·³å‡ºã€‚å…¶ä»–ä¸¤å¾ªç¯ç§éå†æ–¹å¼éƒ½å¯ä»¥ä½¿ç”¨ <code>await</code>ï¼Œä¹Ÿå¯ä»¥æ­£å¸¸è·³å‡ºå¾ªç¯ã€‚</li>
</ol>
<h4 id="åˆ¤æ–­"><a href="#åˆ¤æ–­" class="headerlink" title="åˆ¤æ–­"></a>åˆ¤æ–­</h4><p>ï¼ˆ1ï¼‰åŸå‹</p>
<p>ï¼ˆ2ï¼‰æ„é€ å‡½æ•°</p>
<p>ï¼ˆ3ï¼‰Arrayè‡ªå¸¦çš„isArray()æ–¹æ³•</p>
<h5 id="1-instanceofè¿ç®—ç¬¦"><a href="#1-instanceofè¿ç®—ç¬¦" class="headerlink" title="1. instanceofè¿ç®—ç¬¦"></a>1. instanceofè¿ç®—ç¬¦</h5><p>ä»æ„é€ å‡½æ•°å…¥æ‰‹:å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯åœ¨å…¶åŸå‹é“¾ä¸ŠåŸå‹æ„é€ å‡½æ•°ä¸­çš„å±æ€§ã€‚</p>
<p>typeof å’Œ instanceof çš„åŒºåˆ«ï¼Ÿ </p>
<ul>
<li>ä¸¤è€…éƒ½å¯ä»¥ç”¨æ¥åˆ¤æ–­å˜é‡ï¼Œtypeofä¼šè¿”å›åŸºæœ¬ç±»å‹ï¼Œè€Œinstanceofåªä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h5 id="2-constructoråˆ¤æ–­"><a href="#2-constructoråˆ¤æ–­" class="headerlink" title="2. constructoråˆ¤æ–­"></a>2. constructoråˆ¤æ–­</h5><p>è¿™ä¸ªå±æ€§æ˜¯è¿”å›å¯¹è±¡ç›¸å¯¹åº”çš„æ„é€ å‡½æ•°ï¼ŒObjectçš„æ¯ä¸ªå®ä¾‹éƒ½æœ‰æ„é€ å‡½æ•° constructorï¼Œç”¨äºä¿å­˜ç€ç”¨äºåˆ›å»ºå½“å‰å¯¹è±¡çš„å‡½æ•°ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Array<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h5 id="3-é€šè¿‡æ•°ç»„è‡ªå¸¦çš„æ–¹æ³•isArrayåˆ¤æ–­ï¼ˆES5æ–°å¢ï¼Œä¼˜äºinstanceofï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­æ£€æµ‹æ•°ç»„æ›´å¥½ï¼‰"><a href="#3-é€šè¿‡æ•°ç»„è‡ªå¸¦çš„æ–¹æ³•isArrayåˆ¤æ–­ï¼ˆES5æ–°å¢ï¼Œä¼˜äºinstanceofï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­æ£€æµ‹æ•°ç»„æ›´å¥½ï¼‰" class="headerlink" title="3. é€šè¿‡æ•°ç»„è‡ªå¸¦çš„æ–¹æ³•isArrayåˆ¤æ–­ï¼ˆES5æ–°å¢ï¼Œä¼˜äºinstanceofï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­æ£€æµ‹æ•°ç»„æ›´å¥½ï¼‰"></a>3. é€šè¿‡æ•°ç»„è‡ªå¸¦çš„æ–¹æ³•isArrayåˆ¤æ–­ï¼ˆES5æ–°å¢ï¼Œä¼˜äºinstanceofï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­æ£€æµ‹æ•°ç»„æ›´å¥½ï¼‰</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h5 id="4-é€šè¿‡isPrototypeOf-æ–¹æ³•åˆ¤æ–­"><a href="#4-é€šè¿‡isPrototypeOf-æ–¹æ³•åˆ¤æ–­" class="headerlink" title="4. é€šè¿‡isPrototypeOf()æ–¹æ³•åˆ¤æ–­"></a>4. é€šè¿‡isPrototypeOf()æ–¹æ³•åˆ¤æ–­</h5><p>ä»åŸå‹å…¥æ‰‹ï¼ŒArray.prototype å±æ€§è¡¨ç¤º Array æ„é€ å‡½æ•°çš„åŸå‹ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯ isPrototypeOf() ç”¨äºæµ‹è¯•ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨äºå¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h5 id="é€šè¿‡Object-getPrototypeOfæ–¹æ³•åˆ¤æ–­"><a href="#é€šè¿‡Object-getPrototypeOfæ–¹æ³•åˆ¤æ–­" class="headerlink" title="é€šè¿‡Object.getPrototypeOfæ–¹æ³•åˆ¤æ–­"></a>é€šè¿‡Object.getPrototypeOfæ–¹æ³•åˆ¤æ–­</h5><p>Object.getPrototypeOf() æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡çš„åŸå‹ï¼Œæ‰€ä»¥åªè¦è·ŸArrayçš„åŸå‹æ¯”è¾ƒå³å¯ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h5 id="é€šè¿‡Object-prototype-toString-call-åˆ¤æ–­"><a href="#é€šè¿‡Object-prototype-toString-call-åˆ¤æ–­" class="headerlink" title="é€šè¿‡Object.prototype.toString.call()åˆ¤æ–­"></a>é€šè¿‡Object.prototype.toString.call()åˆ¤æ–­</h5><p>è™½ç„¶Arrayä¹Ÿç»§æ‰¿è‡ªObjectï¼Œä½†jsåœ¨Array.prototypeä¸Šé‡å†™äº†toStringï¼Œè€Œæˆ‘ä»¬é€šè¿‡toString.call(arr)å®é™…ä¸Šæ˜¯é€šè¿‡åŸå‹é“¾è°ƒç”¨äº†ã€‚å¯ä»¥è·å–åˆ°å˜é‡çš„ä¸åŒç±»å‹ã€‚==ã€è¿˜æ²¡å¼„æ‡‚ã€‘==</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Array]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h4 id="æ¸…ç©º"><a href="#æ¸…ç©º" class="headerlink" title="æ¸…ç©º"></a>æ¸…ç©º</h4><h5 id="1-ç›´æ¥èµ‹ç©ºå€¼"><a href="#1-ç›´æ¥èµ‹ç©ºå€¼" class="headerlink" title="1. ç›´æ¥èµ‹ç©ºå€¼"></a>1. ç›´æ¥èµ‹ç©ºå€¼</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h5 id="2-lengthèµ‹å€¼ä¸º0"><a href="#2-lengthèµ‹å€¼ä¸º0" class="headerlink" title="2. lengthèµ‹å€¼ä¸º0"></a>2. lengthèµ‹å€¼ä¸º0</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h5 id="3-æ•°ç»„çš„spliceæ–¹æ³•"><a href="#3-æ•°ç»„çš„spliceæ–¹æ³•" class="headerlink" title="3. æ•°ç»„çš„spliceæ–¹æ³•"></a>3. æ•°ç»„çš„spliceæ–¹æ³•</h5><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/splice">splice()</a> æ–¹æ³•é€šè¿‡åˆ é™¤æˆ–æ›¿æ¢ç°æœ‰å…ƒç´ æˆ–è€…åŸåœ°æ·»åŠ æ–°çš„å…ƒç´ æ¥ä¿®æ”¹æ•°ç»„ï¼Œå¹¶ä»¥æ•°ç»„å½¢å¼è¿”å›è¢«ä¿®æ”¹çš„å†…å®¹ã€‚==æ­¤æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„==</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">/*ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å¯é€‰çš„
* splice(start, deleteCount, [item1, item2, ...])
*/</span>
arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="å»é‡"><a href="#å»é‡" class="headerlink" title="å»é‡"></a>å»é‡</h4><blockquote>
<ol>
<li>éå†æ•°ç»„-ä¸æ”¹å˜å…ƒç´ ç»„ï¼ˆå¯ä½¿ç”¨mapæ–¹æ³•ï¼‰ï¼›</li>
<li>éå†æ•°ç»„-åˆ é™¤é‡å¤çš„å…ƒç´ ï¼ˆä½¿ç”¨spliceæ–¹æ³•ï¼‰ï¼›</li>
<li>åˆ©ç”¨Setå»é‡ï¼›</li>
</ol>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">/* 1. éå†æ•°ç»„---ä¿å­˜åˆ°æ–°æ•°ç»„ */</span>
<span class="token keyword">let</span> arr0 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span> arr0<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr0<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* 2. éå†æ•°ç»„---åˆ é™¤é‡å¤çš„å…ƒç´   */</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¦‚æœç›¸ç­‰ï¼Œåˆ é™¤j</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// åˆ é™¤jä½ç½®çš„å…ƒç´ </span>
      arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// æ¯åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œæ•°ç»„é•¿åº¦-1ï¼Œjä½ç½®çš„å…ƒç´ ç»§ç»­ä¸åé¢ä¸€ä¸ªå…ƒç´ æ¯”è¾ƒ</span>
      j<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 3. åˆ©ç”¨setå»é‡ */</span>
<span class="token keyword">let</span> arr0 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="ç±»å’Œå¯¹è±¡"><a href="#ç±»å’Œå¯¹è±¡" class="headerlink" title="ç±»å’Œå¯¹è±¡"></a>ç±»å’Œå¯¹è±¡</h3><h4 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h4><p>[MDN]</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Working_with_Objects">ä½¿ç”¨å¯¹è±¡</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Details_of_the_Object_Model">å¯¹è±¡æ¨¡å‹ç»†èŠ‚</a></li>
</ul>
<p>åœ¨ javascript ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡å¯ä»¥æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ‹¥æœ‰å±æ€§å’Œç±»å‹çš„å®ä½“ã€‚ å¯¹è±¡ä¸­æœªèµ‹å€¼çš„å±æ€§çš„å€¼ä¸º<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>ï¼ˆè€Œä¸æ˜¯<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/null"><code>null</code></a>ï¼‰</p>
<p>JavaScript ä¸­çš„å¯¹è±¡åªèƒ½ä½¿ç”¨ String ç±»å‹ä½œä¸ºé”®ç±»å‹ã€‚</p>
<p><strong>åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼š</strong></p>
<p>ï¼ˆ1ï¼‰ä½¿ç”¨å¯¹è±¡åˆå§‹åŒ–å™¨ï¼ˆä¹Ÿè¢«ç§°ä½œé€šè¿‡å­—é¢å€¼ï¼‰åˆ›å»ºå¯¹è±¡ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">property_1</span><span class="token operator">:</span>   value_1<span class="token punctuation">,</span>   <span class="token comment">// property_# å¯ä»¥æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦...</span>
  <span class="token number">2</span><span class="token operator">:</span>            value_2<span class="token punctuation">,</span>   <span class="token comment">// æˆ–ä¸€ä¸ªæ•°å­—...</span>
  <span class="token punctuation">[</span><span class="token string">"property"</span> <span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">:</span> value_3<span class="token punctuation">,</span>  <span class="token comment">//  æˆ–ä¸€ä¸ªå¯è®¡ç®—çš„ key å...</span>
  <span class="token comment">// ...,</span>
  <span class="token string-property property">"property n"</span><span class="token operator">:</span> value_n <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// æˆ–ä¸€ä¸ªå­—ç¬¦ä¸²</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ï¼ˆ2ï¼‰ä½¿ç”¨æ„é€ å‡½æ•°</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Car</span><span class="token punctuation">(</span><span class="token parameter">make<span class="token punctuation">,</span> model<span class="token punctuation">,</span> year</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>make <span class="token operator">=</span> make<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>model <span class="token operator">=</span> model<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>year <span class="token operator">=</span> year<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> kenscar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token string">"Nissan"</span><span class="token punctuation">,</span> <span class="token string">"300ZX"</span><span class="token punctuation">,</span> <span class="token number">1992</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> vpgscar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token string">"Mazda"</span><span class="token punctuation">,</span> <span class="token string">"Miata"</span><span class="token punctuation">,</span> <span class="token number">1990</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ï¼ˆ3ï¼‰ä½¿ç”¨<code>Object.create </code>æ–¹æ³•ï¼Œæ–°å¯¹è±¡çš„åŸå‹å°±æ˜¯è°ƒç”¨ create æ–¹æ³•æ—¶ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// Animal properties and method encapsulation</span>
<span class="token keyword">var</span> Animal <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"Invertebrates"</span><span class="token punctuation">,</span> <span class="token comment">// å±æ€§é»˜è®¤å€¼</span>
  <span class="token function-variable function">displayType</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// ç”¨äºæ˜¾ç¤º type å±æ€§çš„æ–¹æ³•</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// åˆ›å»ºä¸€ç§æ–°çš„åŠ¨ç‰©â€”â€”animal1</span>
<span class="token keyword">var</span> animal1 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Animal<span class="token punctuation">)</span><span class="token punctuation">;</span>
animal1<span class="token punctuation">.</span><span class="token function">displayType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Output:Invertebrates</span>

<span class="token comment">// åˆ›å»ºä¸€ç§æ–°çš„åŠ¨ç‰©â€”â€”Fishes</span>
<span class="token keyword">var</span> fish <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Animal<span class="token punctuation">)</span><span class="token punctuation">;</span>
fish<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"Fishes"</span><span class="token punctuation">;</span>
fish<span class="token punctuation">.</span><span class="token function">displayType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Output:Fishes</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ï¼ˆ4ï¼‰ä½¿ç”¨ECMAScript6 æä¾›çš„å…³é”®å­—ï¼šclass, constructor, static, extends, superã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">"use strict"</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Polygon</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">height<span class="token punctuation">,</span> width</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Polygon</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">sideLength</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>sideLength<span class="token punctuation">,</span> sideLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">get</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">set</span> <span class="token function">sideLength</span><span class="token punctuation">(</span><span class="token parameter">newLength</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> newLength<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> newLength<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> square <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Square</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>è®¿é—®æ–¹å¼ï¼š</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 1. ç‚¹è¿ç®—ç¬¦è®¿é—®</span>
objectName<span class="token punctuation">.</span>propertyName
<span class="token comment">// 2. é€šè¿‡æ–¹æ‹¬å·è®¿é—®</span>
objectName<span class="token punctuation">[</span>propertyName<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>æšä¸¾å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼š</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...in">forâ€¦in</a> å¾ªç¯<br>è¯¥æ–¹æ³•ä¾æ¬¡è®¿é—®ä¸€ä¸ª<font color="orange">å¯¹è±¡åŠå…¶åŸå‹é“¾ä¸­æ‰€æœ‰å¯æšä¸¾çš„å±æ€§</font>ã€‚</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/keys">Object.keys(o)</a><br>è¯¥æ–¹æ³•è¿”å›å¯¹è±¡ <code>o</code> è‡ªèº«åŒ…å«ï¼ˆä¸åŒ…æ‹¬åŸå‹ä¸­ï¼‰çš„æ‰€æœ‰<font color="orange">å¯æšä¸¾å±æ€§</font>çš„åç§°çš„æ•°ç»„ã€‚</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames">Object.getOwnPropertyNames(o)</a><br>è¯¥æ–¹æ³•è¿”å›å¯¹è±¡ <code>o</code> è‡ªèº«åŒ…å«ï¼ˆä¸åŒ…æ‹¬åŸå‹ä¸­ï¼‰çš„<font color="orange">æ‰€æœ‰å±æ€§ (æ— è®ºæ˜¯å¦å¯æšä¸¾)</font> çš„åç§°çš„æ•°ç»„ã€‚</li>
</ul>
<p><strong>åˆ é™¤ä¸€ä¸ª<font color="red">ä¸æ˜¯ç»§æ‰¿è€Œæ¥</font>çš„å±æ€§ï¼š</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//Creates a new object, myobj, with two properties, a and b.</span>
<span class="token keyword">var</span> myobj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">;</span>
myobj<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
myobj<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>

<span class="token comment">//Removes the a property, leaving myobj with only the b property.</span>
<span class="token keyword">delete</span> myobj<span class="token punctuation">.</span>a<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<blockquote>
<ol>
<li>åŸå‹å’ŒåŸå‹é“¾ï¼›</li>
<li>ç»§æ‰¿æ–¹å¼</li>
<li>new</li>
</ol>
</blockquote>
<h4 id="åŸå‹å’ŒåŸå‹é“¾"><a href="#åŸå‹å’ŒåŸå‹é“¾" class="headerlink" title="åŸå‹å’ŒåŸå‹é“¾"></a>åŸå‹å’ŒåŸå‹é“¾</h4><p>ã€MDNã€‘</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain">ç»§æ‰¿å’ŒåŸå‹é“¾</a></li>
</ul>
<p>JavaScript æ˜¯ä¸€ç§åŸºäºåŸå‹è€Œä¸æ˜¯åŸºäºç±»çš„åŸºäºå¯¹è±¡ (object-based) è¯­è¨€ã€‚å½“è°ˆåˆ°ç»§æ‰¿æ—¶ï¼ŒJavaScript åªæœ‰ä¸€ç§ç»“æ„ï¼šå¯¹è±¡ã€‚æ¯ä¸ªå®ä¾‹å¯¹è±¡ï¼ˆobjectï¼‰éƒ½æœ‰ä¸€ä¸ªç§æœ‰å±æ€§ï¼ˆç§°ä¹‹ä¸º<code>__proto__</code> ï¼‰æŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼ˆ<strong>prototype</strong>ï¼‰ã€‚è¯¥åŸå‹å¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªè‡ªå·±çš„åŸå‹å¯¹è±¡ï¼ˆ<code>__proto__</code>ï¼‰ï¼Œå±‚å±‚å‘ä¸Šç›´åˆ°ä¸€ä¸ªå¯¹è±¡çš„åŸå‹å¯¹è±¡ä¸º <code>null</code>ã€‚æ ¹æ®å®šä¹‰ï¼Œ<code>null</code> æ²¡æœ‰åŸå‹ï¼Œå¹¶ä½œä¸ºè¿™ä¸ª<strong>åŸå‹é“¾</strong>ä¸­çš„æœ€åä¸€ä¸ªç¯èŠ‚ã€‚</p>
<p align="center" style="font-weight: bold; font-size: 1.3rem">åŸºäºç±»ï¼ˆJavaï¼‰å’ŒåŸºäºåŸå‹ï¼ˆJavaScriptï¼‰çš„å¯¹è±¡ç³»ç»Ÿçš„æ¯”è¾ƒ</p>

<table>
<thead>
<tr>
<th align="left">åŸºäºç±»çš„ï¼ˆJavaï¼‰</th>
<th align="left">åŸºäºåŸå‹çš„ï¼ˆJavaScriptï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ç±»å’Œå®ä¾‹æ˜¯ä¸åŒçš„äº‹ç‰©ã€‚</td>
<td align="left">æ‰€æœ‰å¯¹è±¡å‡ä¸ºå®ä¾‹ã€‚</td>
</tr>
<tr>
<td align="left">é€šè¿‡ç±»å®šä¹‰æ¥å®šä¹‰ç±»ï¼›é€šè¿‡æ„é€ å™¨æ–¹æ³•æ¥å®ä¾‹åŒ–ç±»ã€‚</td>
<td align="left">é€šè¿‡æ„é€ å™¨å‡½æ•°æ¥å®šä¹‰å’Œåˆ›å»ºä¸€ç»„å¯¹è±¡ã€‚</td>
</tr>
<tr>
<td align="left">é€šè¿‡ <code>new</code> æ“ä½œç¬¦åˆ›å»ºå•ä¸ªå¯¹è±¡ã€‚</td>
<td align="left">ç›¸åŒã€‚</td>
</tr>
<tr>
<td align="left">é€šè¿‡ç±»å®šä¹‰æ¥å®šä¹‰ç°å­˜ç±»çš„å­ç±»ï¼Œä»è€Œæ„å»ºå¯¹è±¡çš„å±‚çº§ç»“æ„ã€‚</td>
<td align="left">æŒ‡å®šä¸€ä¸ªå¯¹è±¡ä½œä¸ºåŸå‹å¹¶ä¸”ä¸æ„é€ å‡½æ•°ä¸€èµ·æ„å»ºå¯¹è±¡çš„å±‚çº§ç»“æ„</td>
</tr>
<tr>
<td align="left">éµå¾ªç±»é“¾ç»§æ‰¿å±æ€§ã€‚</td>
<td align="left">éµå¾ªåŸå‹é“¾ç»§æ‰¿å±æ€§ã€‚</td>
</tr>
<tr>
<td align="left">ç±»å®šä¹‰æŒ‡å®šç±»çš„æ‰€æœ‰å®ä¾‹çš„<strong>æ‰€æœ‰</strong>å±æ€§ã€‚æ— æ³•åœ¨è¿è¡Œæ—¶åŠ¨æ€æ·»åŠ å±æ€§ã€‚</td>
<td align="left">æ„é€ å™¨å‡½æ•°æˆ–åŸå‹æŒ‡å®šå®ä¾‹çš„<strong>åˆå§‹</strong>å±æ€§é›†ã€‚å…è®¸åŠ¨æ€åœ°å‘å•ä¸ªçš„å¯¹è±¡æˆ–è€…æ•´ä¸ªå¯¹è±¡é›†ä¸­æ·»åŠ æˆ–ç§»é™¤å±æ€§ã€‚</td>
</tr>
</tbody></table>
<p>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª <code>__proto__</code> å¯¹è±¡å±æ€§ï¼ˆé™¤äº† <code>Objectï¼‰ï¼›æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª</code> <code>prototype</code> å¯¹è±¡å±æ€§ã€‚ç‰¹æ®Šçš„ <code>__proto__</code> å±æ€§æ˜¯åœ¨æ„å»ºå¯¹è±¡æ—¶è®¾ç½®çš„ï¼Œè®¾ç½®ä¸ºæ„é€ å™¨çš„ <code>prototype</code> å±æ€§çš„å€¼ã€‚</p>
<p><img src="https://typora-lee.oss-cn-chengdu.aliyuncs.com/img-typora/20220410174017.png" alt="image-20220304172647086"></p>
<p><strong>åŸå‹å…³ç³»ï¼š</strong></p>
<ul>
<li>æ¯ä¸ª classéƒ½æœ‰æ˜¾ç¤ºåŸå‹å¯¹è±¡ <code>prototype</code></li>
<li>æ¯ä¸ªå®ä¾‹éƒ½æœ‰éšå¼åŸå‹å±æ€§ <code>__proto__</code></li>
<li>å®ä¾‹çš„ <code>__proto__</code> æŒ‡å‘å¯¹åº” class çš„ <code>prototype</code></li>
</ul>
<p>â€Œ <strong>åŸå‹:</strong> &nbsp;åœ¨ JS ä¸­ï¼Œæ¯å½“å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼ˆå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼‰æ—¶ï¼Œå¯¹è±¡ä¸­éƒ½ä¼šåŒ…å«ä¸€äº›é¢„å®šä¹‰çš„å±æ€§ã€‚å…¶ä¸­æ¯ä¸ª<code>å‡½æ•°å¯¹è±¡</code>éƒ½æœ‰ä¸€ä¸ª<code>prototype</code>&nbsp;å±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘å‡½æ•°çš„<code>åŸå‹å¯¹è±¡</code>ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°ï¼ˆå‡½æ•°æœ¬èº«ï¼‰ã€‚</p>
<p><strong>åŸå‹é“¾ï¼š</strong>å‡½æ•°çš„åŸå‹å¯¹è±¡çš„<code>constructor</code>é»˜è®¤æŒ‡å‘å‡½æ•°æœ¬èº«ï¼ŒåŸå‹å¯¹è±¡é™¤äº†æœ‰åŸå‹å±æ€§å¤–ï¼Œä¸ºäº†å®ç°ç»§æ‰¿ï¼Œè¿˜æœ‰ä¸€ä¸ªåŸå‹é“¾æŒ‡é’ˆ<code>__proto__</code>ï¼Œè¯¥æŒ‡é’ˆæ˜¯æŒ‡å‘ä¸Šä¸€å±‚çš„åŸå‹å¯¹è±¡ï¼Œè€Œä¸Šä¸€å±‚çš„åŸå‹å¯¹è±¡çš„ç»“æ„ä¾ç„¶ç±»ä¼¼ã€‚å› æ­¤å¯ä»¥åˆ©ç”¨<code>__proto__</code>ä¸€ç›´æŒ‡å‘Objectçš„åŸå‹å¯¹è±¡ä¸Šï¼Œè€ŒObjectåŸå‹å¯¹è±¡ç”¨<code>Object.prototype.__ proto__ = null</code>è¡¨ç¤ºåŸå‹é“¾é¡¶ç«¯ã€‚å¦‚æ­¤å½¢æˆäº†jsçš„åŸå‹é“¾ç»§æ‰¿ã€‚åŒæ—¶æ‰€æœ‰çš„jså¯¹è±¡éƒ½æœ‰Objectçš„åŸºæœ¬æ–¹æ³•ã€‚</p>
<p><strong>ç‰¹ç‚¹:</strong> &nbsp;<code>JavaScript</code>å¯¹è±¡æ˜¯é€šè¿‡å¼•ç”¨æ¥ä¼ é€’çš„ï¼Œæˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸ªæ–°å¯¹è±¡å®ä½“ä¸­å¹¶æ²¡æœ‰ä¸€ä»½å±äºè‡ªå·±çš„åŸå‹å‰¯æœ¬ã€‚å½“æˆ‘ä»¬ä¿®æ”¹åŸå‹æ—¶ï¼Œä¸ä¹‹ç›¸å…³çš„å¯¹è±¡ä¹Ÿä¼šç»§æ‰¿è¿™ä¸€æ”¹å˜ã€‚</p>
<p align="center" style="font-weight: bold; font-size:1.3rem;">4ä¸ªæ‹“å±•åŸå‹é“¾çš„æ–¹æ³•</p>

<table>
<thead>
<tr>
<th align="center">åç§°</th>
<th align="center">ä¾‹å­</th>
<th align="center">ä¼˜åŠ¿</th>
<th align="center">ç¼ºé™·</th>
</tr>
</thead>
<tbody><tr>
<td align="center">New</td>
<td align="center">1</td>
<td align="center">æ”¯æŒç›®å‰ä»¥åŠæ‰€æœ‰å¯æƒ³è±¡åˆ°çš„æµè§ˆå™¨ (IE5.5 éƒ½å¯ä»¥ä½¿ç”¨)ã€‚ ==è¿™ç§æ–¹æ³•éå¸¸å¿«ï¼Œéå¸¸ç¬¦åˆæ ‡å‡†ï¼Œå¹¶ä¸”å……åˆ†åˆ©ç”¨ JIT ä¼˜åŒ–==ã€‚</td>
<td align="center">ä¸ºä½¿ç”¨æ­¤æ–¹æ³•ï¼Œå¿…é¡»å¯¹ç›¸å…³å‡½æ•°åˆå§‹åŒ–ã€‚ åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œæ„é€ å‡½æ•°å¯ä»¥å­˜å‚¨æ¯ä¸ªå¯¹è±¡å¿…é¡»ç”Ÿæˆçš„å”¯ä¸€ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œè¿™ç§å”¯ä¸€ä¿¡æ¯åªç”Ÿæˆä¸€æ¬¡ï¼Œå¯èƒ½ä¼šå¸¦æ¥æ½œåœ¨çš„é—®é¢˜ã€‚æ­¤å¤–ï¼Œæ„é€ å‡½æ•°çš„åˆå§‹åŒ–ï¼Œå¯èƒ½ä¼šå°†ä¸éœ€è¦çš„æ–¹æ³•æ”¾åœ¨å¯¹è±¡ä¸Šã€‚ç„¶è€Œï¼Œå¦‚æœä½ åªåœ¨è‡ªå·±çš„ä»£ç ä¸­ä½¿ç”¨ï¼Œä½ ä¹Ÿæ¸…æ¥šï¼ˆæˆ–æœ‰é€šè¿‡æ³¨é‡Šç­‰å†™æ˜ï¼‰å„æ®µä»£ç åœ¨åšä»€ä¹ˆï¼Œè¿™äº›åœ¨å¤§ä½“ä¸Šéƒ½ä¸æ˜¯é—®é¢˜ï¼ˆäº‹å®ä¸Šï¼Œé€šå¸¸æ˜¯æœ‰ç›Šå¤„çš„ï¼‰ã€‚</td>
</tr>
<tr>
<td align="center">Object.create</td>
<td align="center">2</td>
<td align="center">æ”¯æŒå½“å‰æ‰€æœ‰éå¾®è½¯ç‰ˆæœ¬æˆ–è€… IE9 ä»¥ä¸Šç‰ˆæœ¬çš„æµè§ˆå™¨ã€‚å…è®¸ä¸€æ¬¡æ€§åœ°ç›´æ¥è®¾ç½® _<em>proto</em>_ å±æ€§ï¼Œä»¥ä¾¿æµè§ˆå™¨èƒ½æ›´å¥½åœ°ä¼˜åŒ–å¯¹è±¡ã€‚åŒæ—¶å…è®¸é€šè¿‡ Object.create(null) æ¥åˆ›å»ºä¸€ä¸ªæ²¡æœ‰åŸå‹çš„å¯¹è±¡ã€‚</td>
<td align="center">ä¸æ”¯æŒ IE8 ä»¥ä¸‹çš„ç‰ˆæœ¬ã€‚ç„¶è€Œï¼Œéšç€å¾®è½¯ä¸å†å¯¹ç³»ç»Ÿä¸­è¿è¡Œçš„æ—§ç‰ˆæœ¬æµè§ˆå™¨æä¾›æ”¯æŒï¼Œè¿™å°†ä¸æ˜¯åœ¨å¤§å¤šæ•°åº”ç”¨ä¸­çš„ä¸»è¦é—®é¢˜ã€‚ å¦å¤–ï¼Œè¿™ä¸ªæ…¢å¯¹è±¡åˆå§‹åŒ–åœ¨ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°çš„æ—¶å€™æœ‰å¯èƒ½æˆä¸ºä¸€ä¸ªæ€§èƒ½é»‘æ´ï¼Œå› ä¸ºæ¯ä¸ªå¯¹è±¡çš„æè¿°ç¬¦å±æ€§éƒ½æœ‰è‡ªå·±çš„æè¿°å¯¹è±¡ã€‚å½“ä»¥å¯¹è±¡çš„æ ¼å¼å¤„ç†æˆç™¾ä¸Šåƒçš„å¯¹è±¡æè¿°çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šé€ æˆä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚</td>
</tr>
<tr>
<td align="center">Object.setPrototypeOf</td>
<td align="center">3</td>
<td align="center">æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨å’Œå¾®è½¯ IE9+ æµè§ˆå™¨ã€‚å…è®¸åŠ¨æ€æ“ä½œå¯¹è±¡çš„åŸå‹ï¼Œç”šè‡³èƒ½å¼ºåˆ¶ç»™é€šè¿‡ Object.create(null) åˆ›å»ºå‡ºæ¥çš„æ²¡æœ‰åŸå‹çš„å¯¹è±¡æ·»åŠ ä¸€ä¸ªåŸå‹ã€‚</td>
<td align="center">==è¿™ä¸ªæ–¹å¼è¡¨ç°å¹¶ä¸å¥½ï¼Œåº”è¯¥è¢«å¼ƒç”¨==ã€‚å¦‚æœä½ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå¿«é€Ÿè¿è¡Œ Javascript å°±æ˜¯ä¸å¯èƒ½çš„ï¼Œ<u>å› ä¸ºè®¸å¤šæµè§ˆå™¨ä¼˜åŒ–äº†åŸå‹ï¼Œå°è¯•åœ¨è°ƒç”¨å®ä¾‹ä¹‹å‰çŒœæµ‹æ–¹æ³•åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œä½†æ˜¯åŠ¨æ€è®¾ç½®åŸå‹å¹²æ‰°äº†æ‰€æœ‰çš„ä¼˜åŒ–ï¼Œç”šè‡³å¯èƒ½ä½¿æµè§ˆå™¨ä¸ºäº†è¿è¡ŒæˆåŠŸï¼Œä½¿ç”¨å®Œå…¨æœªç»ä¼˜åŒ–çš„ä»£ç è¿›è¡Œé‡ç¼–è¯‘ã€‚</u> ä¸æ”¯æŒ IE8 åŠä»¥ä¸‹çš„æµè§ˆå™¨ç‰ˆæœ¬ã€‚</td>
</tr>
<tr>
<td align="center">_<em>proto</em>_</td>
<td align="center">4</td>
<td align="center">æ”¯æŒæ‰€æœ‰ç°ä»£éå¾®è½¯ç‰ˆæœ¬ä»¥åŠ IE11 ä»¥ä¸Šç‰ˆæœ¬çš„æµè§ˆå™¨ã€‚å°† _<em>proto</em>_ è®¾ç½®ä¸ºéå¯¹è±¡çš„å€¼ä¼šé™é»˜å¤±è´¥ï¼Œå¹¶ä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚</td>
<td align="center">åº”è¯¥å®Œå…¨å°†å…¶æŠ›å¼ƒå› ä¸ºè¿™ä¸ªè¡Œä¸ºå®Œå…¨ä¸å…·å¤‡æ€§èƒ½å¯è¨€ã€‚ å¦‚æœä½ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå¿«é€Ÿè¿è¡Œ Javascript å°±æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºè®¸å¤šæµè§ˆå™¨ä¼˜åŒ–äº†åŸå‹ï¼Œå°è¯•åœ¨è°ƒç”¨å®ä¾‹ä¹‹å‰çŒœæµ‹æ–¹æ³•åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œä½†æ˜¯åŠ¨æ€è®¾ç½®åŸå‹å¹²æ‰°äº†æ‰€æœ‰çš„ä¼˜åŒ–ï¼Œç”šè‡³å¯èƒ½ä½¿æµè§ˆå™¨ä¸ºäº†è¿è¡ŒæˆåŠŸï¼Œä½¿ç”¨å®Œå…¨æœªç»ä¼˜åŒ–çš„ä»£ç è¿›è¡Œé‡ç¼–è¯‘ã€‚ä¸æ”¯æŒ IE10 åŠä»¥ä¸‹çš„æµè§ˆå™¨ç‰ˆæœ¬ã€‚</td>
</tr>
</tbody></table>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/* ä¾‹å­1 */</span>
 <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
 foo<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">foo_prop</span><span class="token operator">:</span> <span class="token string">"foo val"</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
 <span class="token keyword">var</span> proto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">foo</span><span class="token punctuation">;</span>
 proto<span class="token punctuation">.</span>bar_prop <span class="token operator">=</span> <span class="token string">"bar val"</span><span class="token punctuation">;</span>
 bar<span class="token punctuation">.</span>prototype <span class="token operator">=</span> proto<span class="token punctuation">;</span>
 <span class="token keyword">var</span> inst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bar</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inst<span class="token punctuation">.</span>foo_prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inst<span class="token punctuation">.</span>bar_prop<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* ä¾‹å­2 */</span>
 <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
 foo<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">foo_prop</span><span class="token operator">:</span> <span class="token string">"foo val"</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
 <span class="token keyword">var</span> proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
   foo<span class="token punctuation">.</span>prototype
 <span class="token punctuation">)</span><span class="token punctuation">;</span>
 proto<span class="token punctuation">.</span>bar_prop <span class="token operator">=</span> <span class="token string">"bar val"</span><span class="token punctuation">;</span>
 bar<span class="token punctuation">.</span>prototype <span class="token operator">=</span> proto<span class="token punctuation">;</span>
 <span class="token keyword">var</span> inst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bar</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inst<span class="token punctuation">.</span>foo_prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inst<span class="token punctuation">.</span>bar_prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
 

<span class="token comment">/* ä¾‹å­3*/</span>
 <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
 foo<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">foo_prop</span><span class="token operator">:</span> <span class="token string">"foo val"</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
 <span class="token keyword">var</span> proto <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">bar_prop</span><span class="token operator">:</span> <span class="token string">"bar val"</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>
   proto<span class="token punctuation">,</span> foo<span class="token punctuation">.</span>prototype
 <span class="token punctuation">)</span><span class="token punctuation">;</span>
 bar<span class="token punctuation">.</span>prototype <span class="token operator">=</span> proto<span class="token punctuation">;</span>
 <span class="token keyword">var</span> inst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bar</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inst<span class="token punctuation">.</span>foo_prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inst<span class="token punctuation">.</span>bar_prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
 

<span class="token comment">/* ä¾‹å­4*/</span>
 <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
 foo<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">foo_prop</span><span class="token operator">:</span> <span class="token string">"foo val"</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
 <span class="token keyword">var</span> proto <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">bar_prop</span><span class="token operator">:</span> <span class="token string">"bar val"</span><span class="token punctuation">,</span>
   <span class="token literal-property property">__proto__</span><span class="token operator">:</span> foo<span class="token punctuation">.</span>prototype
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 bar<span class="token punctuation">.</span>prototype <span class="token operator">=</span> proto<span class="token punctuation">;</span>
 <span class="token keyword">var</span> inst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bar</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inst<span class="token punctuation">.</span>foo_prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inst<span class="token punctuation">.</span>bar_prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token keyword">var</span> inst <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">__proto__</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token literal-property property">bar_prop</span><span class="token operator">:</span> <span class="token string">"bar val"</span><span class="token punctuation">,</span>
     <span class="token literal-property property">__proto__</span><span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token literal-property property">foo_prop</span><span class="token operator">:</span> <span class="token string">"foo val"</span><span class="token punctuation">,</span>
       <span class="token literal-property property">__proto__</span><span class="token operator">:</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inst<span class="token punctuation">.</span>foo_prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inst<span class="token punctuation">.</span>bar_prop<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<hr>
<h4 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h4><blockquote>
<ol>
<li>ES5: <ul>
<li>ç»„åˆç»§æ‰¿</li>
<li>åŸå‹å¼ç»§æ‰¿</li>
<li>å¯„ç”Ÿå¼ç»§æ‰¿</li>
<li>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼ˆæœ€ä¼˜ï¼‰</li>
</ul>
</li>
<li>ES6ï¼šç±»ï¼Œextendså…³é”®å­—ï¼ˆåº•å±‚å®ç°ä¹Ÿæ˜¯é€šè¿‡åŸå‹å’Œæ„é€ å‡½æ•°å®ç°ï¼‰</li>
</ol>
</blockquote>
<h5 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h5><p><em>åŸå‹é“¾+ç›—ç”¨æ„é€ å‡½æ•°</em>ï¼Œä½¿ç”¨åŸå‹é“¾ç»§æ‰¿åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•ï¼Œé€šè¿‡ç›—ç”¨æ„é€ å‡½æ•°ç»§æ‰¿å®ä¾‹å±æ€§ã€‚</p>
<p>ç¼ºç‚¹ï¼šå­˜åœ¨æ•ˆç‡é—®é¢˜ï¼Œä¸»è¦æ˜¯çˆ¶ç±»æ„é€ å‡½æ•°å§‹ç»ˆä¼šè¢«è°ƒç”¨ä¸¤æ¬¡ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/* çˆ¶æ„é€ å‡½æ•° */</span>
<span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> <span class="token string">"green"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* å­æ„é€ å‡½æ•° */</span>
<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç›—ç”¨æ„é€ å‡½æ•°---ç»§æ‰¿å±æ€§</span>
  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç¬¬äºŒæ¬¡è°ƒç”¨SuperType()</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// åŸå‹é“¾ç»§æ‰¿---ç»§æ‰¿æ–¹æ³•</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨SuperType()---è¿™é‡Œå¯ä»¥æ”¹è¿›</span>

<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayAge</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> instance1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token string">"Nicholas"</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
instance1<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"black"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance1<span class="token punctuation">.</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span>
instance1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
instance1<span class="token punctuation">.</span><span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> instance2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token string">"Greg"</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance2<span class="token punctuation">.</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span>
instance2<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
instance2<span class="token punctuation">.</span><span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* è¾“å‡º

[ 'red', 'blue', 'green', 'black' ]
Nicholas
29
[ 'red', 'blue', 'green' ]
Greg
27

*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="åŸå‹å¼ç»§æ‰¿"><a href="#åŸå‹å¼ç»§æ‰¿" class="headerlink" title="åŸå‹å¼ç»§æ‰¿"></a>åŸå‹å¼ç»§æ‰¿</h5><p><em>Object.create</em>ï¼Œåœ¨å·²æœ‰å¯¹è±¡çš„åŸºç¡€ä¸Šå†åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯å¢å¼ºåçš„å¯¹è±¡ï¼Œå³æ·»åŠ äº†æ–°çš„å±æ€§æˆ–æ–¹æ³•ï¼›</p>
<p>åœºæ™¯ï¼šé€‚åˆä¸éœ€è¦å•ç‹¬åˆ›å»ºæ„é€ å‡½æ•°ï¼Œä½†ä»ç„¶éœ€è¦åœ¨å¯¹è±¡é—´å…±äº«ä¿¡æ¯çš„åœºåˆã€‚</p>
<p>ç¼ºç‚¹ï¼š<u>å¼•ç”¨ç±»å‹çš„å±æ€§ç»§æ‰¿å­˜åœ¨é—®é¢˜ï¼Œä¸åŒå¯¹è±¡å…±äº«åŒä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å±æ€§</u>ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Nicholas"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">friends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Shelby"</span><span class="token punctuation">,</span> <span class="token string">"Court"</span><span class="token punctuation">,</span> <span class="token string">"Van"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> anotherPerson <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
anotherPerson<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Greg"</span><span class="token punctuation">;</span>
anotherPerson<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"Rob"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> yetAnotherPerson <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
yetAnotherPerson<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Linda"</span><span class="token punctuation">;</span>
yetAnotherPerson<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"Barbie"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>friends<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">let</span> anotherPerson2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">25</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>anotherPerson2<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/** è¾“å‡º
 * [ 'Shelby', 'Court', 'Van', 'Rob', 'Barbie' ]
 * 25
 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="å¯„ç”Ÿå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿå¼ç»§æ‰¿"></a>å¯„ç”Ÿå¼ç»§æ‰¿</h5><p><em>ï¼ˆåœ¨å·²æœ‰å¯¹è±¡çš„åŸºç¡€ä¸Šï¼‰</em>ä¸åŸå‹å¼ç»§æ‰¿æ¯”è¾ƒæ¥è¿‘ã€‚<u>åˆ›å»ºä¸€ä¸ªå®ç°ç»§æ‰¿çš„å‡½æ•°ï¼Œä»¥æŸç§æ–¹å¼å¢å¼ºå¯¹è±¡ï¼Œç„¶åè¿”å›è¿™ä¸ªå¯¹è±¡ã€‚</u></p>
<p>åœºæ™¯ï¼šé€‚åˆä¸»è¦å…³æ³¨å¯¹è±¡ï¼Œè€Œä¸åœ¨ä¹ç±»å‹å’Œæ„é€ å‡½æ•°çš„åœºæ™¯ã€‚</p>
<p>ç¼ºç‚¹ï¼š<u>å¼•ç”¨ç±»å‹çš„å±æ€§ç»§æ‰¿æœ‰é—®é¢˜</u>ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">createAnother</span><span class="token punctuation">(</span><span class="token parameter">original</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> clone <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é€šè¿‡è°ƒç”¨å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</span>
  clone<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// ä»¥æŸç§æ–¹å¼å¢å¼ºè¿™ä¸ªå¯¹è±¡</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"hi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> clone<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Nicholas"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">friends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Shelby"</span><span class="token punctuation">,</span> <span class="token string">"Court"</span><span class="token punctuation">,</span> <span class="token string">"Van"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> anotherPerson <span class="token operator">=</span> <span class="token function">createAnother</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
anotherPerson<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**è¾“å‡º
 * hi
 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"></a>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</h5><p>ä¸é€šè¿‡è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ç»™å­ç±»åŸå‹èµ‹å€¼ï¼Œè€Œæ˜¯å¯„ç”Ÿå¼ç»§æ‰¿çˆ¶ç±»åŸå‹çš„ä¸€ä¸ªå‰¯æœ¬ã€‚</p>
<p>==å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿æ˜¯å¼•ç”¨ç±»å‹ç»§æ‰¿çš„æœ€ä½³æ¨¡å¼ã€‚==</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li>é¿å…äº†å­ç±»åŸå‹ä¸Šæ‹¥æœ‰ä¸å¿…è¦çš„å±æ€§ï¼Œæ•ˆç‡æ›´é«˜ï¼›</li>
<li>åŸå‹é“¾ä¿æŒä¸å˜ï¼Œ<code>instanceof</code>æ“ä½œç¬¦å’Œ<code>isPrototypeOf()</code>æ–¹æ³•æœ‰æ•ˆã€‚</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/* å¯„ç”Ÿå¼ç»§æ‰¿æ¥ç»§æ‰¿çˆ¶ç±»åŸå‹ */</span>
<span class="token keyword">function</span> <span class="token function">inheritPrototype</span><span class="token punctuation">(</span><span class="token parameter">subType<span class="token punctuation">,</span> superType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> prototype <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>superType<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>  		<span class="token comment">// åˆ›å»ºå¯¹è±¡---å–å¾—çˆ¶ç±»åŸå‹çš„å‰¯æœ¬</span>
  prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> subType<span class="token punctuation">;</span>                    <span class="token comment">// å¢å¼ºå¯¹è±¡---è§£å†³é‡å†™åŸå‹å¯¼è‡´é»˜è®¤constructorä¸¢å¤±é—®é¢˜---</span>
  subType<span class="token punctuation">.</span>prototype <span class="token operator">=</span> prototype<span class="token punctuation">;</span>                      <span class="token comment">// èµ‹å€¼å¯¹è±¡---å­ç±»çš„åŸå‹å¯¹è±¡æŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> <span class="token string">"green"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç»§æ‰¿çˆ¶ç±»çš„å±æ€§</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">inheritPrototype</span><span class="token punctuation">(</span>SubType<span class="token punctuation">,</span> SuperType<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç»§æ‰¿çˆ¶ç±»åŸå‹ä¸Šçš„æ–¹æ³•å’Œå±æ€§</span>

<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayAge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> subType1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token string">"test1"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subType1<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"pink"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>subType1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>subType1<span class="token punctuation">.</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span>
subType1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subType1<span class="token punctuation">.</span><span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> subType2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token string">"test2"</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>subType2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>subType2<span class="token punctuation">.</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span>
subType2<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subType2<span class="token punctuation">.</span><span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**è¾“å‡º
test1
[ 'red', 'blue', 'green', 'pink' ]
test1
20
test2
[ 'red', 'blue', 'green' ]
test2
21
*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="extendså…³é”®å­—"><a href="#extendså…³é”®å­—" class="headerlink" title="extendså…³é”®å­—"></a>extendså…³é”®å­—</h5><hr>
<h4 id="newè¿ç®—ç¬¦çš„å®ç°æœºåˆ¶"><a href="#newè¿ç®—ç¬¦çš„å®ç°æœºåˆ¶" class="headerlink" title="newè¿ç®—ç¬¦çš„å®ç°æœºåˆ¶"></a>newè¿ç®—ç¬¦çš„å®ç°æœºåˆ¶</h4><ol>
<li> é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æ™®é€š<code>ç©ºå¯¹è±¡</code></li>
<li> <code>è®¾ç½®åŸå‹</code>ï¼Œå°†è¿™ä¸ªæ™®é€šå¯¹è±¡ä¸­çš„<code>__proto__</code>å±æ€§è®¾ç½®ä¸ºæ„é€ å‡½æ•°çš„<code>prototype</code>ã€‚</li>
<li> è®©æ„é€ å‡½æ•°çš„<code>this</code>æŒ‡å‘è¿™ä¸ªæ™®é€šå¯¹è±¡ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰</li>
<li> å¦‚æœæ„é€ å‡½æ•°è¿”å›éç©ºå¯¹è±¡ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡ï¼›å¦åˆ™ï¼Œè¿”å›åˆšåˆ›å»ºçš„å¯¹è±¡ã€‚</li>
</ol>
<p>å½“æ‰§è¡Œï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>JavaScriptå®é™…æ‰§è¡Œçš„æ˜¯ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
<span class="token function">Foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>ä»»ä½•å‡½æ•°åªè¦ä½¿ç”¨newæ“ä½œç¬¦è°ƒç”¨å°±æ˜¯æ„é€ å‡½æ•°ï¼Œè€Œä¸ä½¿ç”¨newæ“ä½œç¬¦è°ƒç”¨çš„å‡½æ•°å°±æ˜¯æ™®é€šå‡½æ•°ã€‚â€”â€”ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡-ç¬¬å››ç‰ˆã€‹</p>
</blockquote>
<p><strong>è®¿é—®ä¸€ä¸ªå¯¹è±¡å±æ€§æ—¶ï¼ŒJavaScriptçš„æ‰§è¡Œæ­¥éª¤ï¼š</strong></p>
<ol>
<li>æ£€æŸ¥å¯¹è±¡è‡ªèº«æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å›å€¼ã€‚</li>
<li>å¦‚æœæœ¬åœ°å€¼ä¸å­˜åœ¨ï¼Œæ£€æŸ¥åŸå‹é“¾ï¼ˆé€šè¿‡ <code>__proto__</code> å±æ€§ï¼‰ã€‚</li>
<li>å¦‚æœåŸå‹é“¾ä¸­çš„æŸä¸ªå¯¹è±¡å…·æœ‰æŒ‡å®šå±æ€§ï¼Œåˆ™è¿”å›å€¼ã€‚</li>
<li>å¦‚æœç›´åˆ°æ‰¾åˆ°åŸå‹é“¾çš„é¡¶ç«¯nullä¹Ÿæ²¡æ‰¾åˆ°è¿™ä¸ªå±æ€§ï¼Œåˆ™åˆ¤å®šè¯¥å¯¹è±¡æ²¡æœ‰è¯¥å±æ€§ï¼Œè¿”å› undefinedã€‚</li>
</ol>
<hr>
<h3 id="thisæŒ‡å‘"><a href="#thisæŒ‡å‘" class="headerlink" title="thisæŒ‡å‘"></a>thisæŒ‡å‘</h3><h4 id="thisæŒ‡å‘åˆ†å“ªå‡ ç±»æƒ…å†µï¼Ÿ"><a href="#thisæŒ‡å‘åˆ†å“ªå‡ ç±»æƒ…å†µï¼Ÿ" class="headerlink" title="thisæŒ‡å‘åˆ†å“ªå‡ ç±»æƒ…å†µï¼Ÿ"></a>thisæŒ‡å‘åˆ†å“ªå‡ ç±»æƒ…å†µï¼Ÿ</h4><ul>
<li>å…¨å±€ç¯å¢ƒä¸‹è°ƒç”¨thisï¼ˆå…¨å±€å¯¹è±¡ï¼‰</li>
<li>å‡½æ•°ä½œä¸ºå¯¹è±¡æ–¹æ³•è¢«è°ƒç”¨ï¼ˆæŒ‡å‘è¯¥å¯¹è±¡ï¼‰</li>
<li>é€šè¿‡callã€applyå’Œbindæ–¹æ³•æ˜¾å¼æŒ‡å®šthis</li>
<li>ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼ˆæŒ‡å‘åˆ›å»ºçš„å¯¹è±¡å®ä¾‹ï¼‰</li>
</ul>
<h4 id="ç®­å¤´å‡½æ•°çš„this"><a href="#ç®­å¤´å‡½æ•°çš„this" class="headerlink" title="ç®­å¤´å‡½æ•°çš„this"></a>ç®­å¤´å‡½æ•°çš„this</h4><ul>
<li>æ²¡æœ‰è‡ªå·±çš„thisï¼Œç»§æ‰¿è‡ªæœ€å¤–å±‚æ™®é€šå‡½æ•°ï¼Œä¸€ä½†ç¡®å®šæ— æ³•è¢«ä¿®æ”¹ï¼›</li>
</ul>
<h4 id="call-apply-bind-çš„åŒºåˆ«"><a href="#call-apply-bind-çš„åŒºåˆ«" class="headerlink" title="call/apply/bind çš„åŒºåˆ«"></a>call/apply/bind çš„åŒºåˆ«</h4><p>ç›¸åŒï¼š</p>
<p>1ã€éƒ½æ˜¯ç”¨æ¥æ”¹å˜å‡½æ•°çš„thiså¯¹è±¡çš„æŒ‡å‘çš„ã€‚</p>
<p>2ã€ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯thisè¦æŒ‡å‘çš„å¯¹è±¡ã€‚</p>
<p>3ã€éƒ½å¯ä»¥åˆ©ç”¨åç»­å‚æ•°ä¼ å‚ã€‚</p>
<p>ä¸åŒï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">let fn = function(a, b) {
	console.log(this, a, b);
}
let obj = {name: "obj"};\

fn.call(obj, 1, 2);
fn.apply(obj, [1, 2]);
fn.bind(obj, 1, 2);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>applyå’Œcallä¼ å…¥çš„å‚æ•°åˆ—è¡¨å½¢å¼ä¸åŒã€‚apply æ¥æ”¶å‚æ•°æ•°ç»„ï¼Œcallæ¥æ”¶ä¸€ä¸²å‚æ•°åˆ—è¡¨ï¼Œä¸¤è€…éƒ½æ˜¯ç«‹å³æ‰§è¡Œã€‚</p>
<p>bindï¼šè¯­æ³•å’Œcallä¸€æ¨¡ä¸€æ ·ï¼Œä½†ä¸æ˜¯ç«‹å³æ‰§è¡Œï¼Œè¿”å›æ”¹å˜thisæŒ‡å‘åçš„å‡½æ•°ï¼Œbindä¸å…¼å®¹IE6~8ï¼›</p>
<p>æ€»ç»“ï¼šåŸºäºFunction.prototypeä¸Šçš„ <code>apply ã€ call å’Œ bind </code>è°ƒç”¨æ¨¡å¼ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•éƒ½å¯ä»¥æ˜¾å¼çš„æŒ‡å®šè°ƒç”¨å‡½æ•°çš„ this æŒ‡å‘ã€‚<code>apply</code>æ¥æ”¶å‚æ•°çš„æ˜¯æ•°ç»„ï¼Œ<code>call</code>æ¥å—å‚æ•°åˆ—è¡¨ï¼Œ<code>bind</code>æ–¹æ³•é€šè¿‡ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ª<code>this</code> ç»‘å®šäº†ä¼ å…¥å¯¹è±¡çš„æ–°å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°çš„  <code>this</code>æŒ‡å‘é™¤äº†ä½¿ç”¨<code>new </code>æ—¶ä¼šè¢«æ”¹å˜ï¼Œå…¶ä»–æƒ…å†µä¸‹éƒ½ä¸ä¼šæ”¹å˜ã€‚è‹¥ä¸ºç©ºé»˜è®¤æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡windowã€‚</p>
<p>å‚è€ƒï¼šğŸ‘‰ <a target="_blank" rel="noopener" href="https://blog.csdn.net/hexinyu_1022/article/details/82795517">callã€applyã€bindä¸‰è€…çš„ç”¨æ³•å’ŒåŒºåˆ«</a></p>
<hr>
<h2 id="å¼‚æ­¥JavaScript"><a href="#å¼‚æ­¥JavaScript" class="headerlink" title="å¼‚æ­¥JavaScript"></a>å¼‚æ­¥JavaScript</h2><h3 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h3><p>Gmailå¼€å‘äººå‘˜å‘ç°IEé‡Œé¢æœ‰ä¸ªXMLHTTPRequestå¯¹è±¡æ¥è¯·æ±‚æ•°æ®æ—¶ï¼Œå¯ä»¥å®ç°<strong>æ— åˆ·æ–°æ•°æ®è¯·æ±‚</strong>ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œè¿›è¡Œç½‘ç»œæ•°æ®è¯·æ±‚ï¼Œè¿™å°±æ˜¯AJAXçš„ç”±æ¥ã€‚</p>
<p>Ajaxä¸æ˜¯ä¸€ä¸ªå•è¯ï¼Œä»–çš„å…¨ç§°æ˜¯Asynchronous JavaScript and XMLï¼Œå°±æ˜¯<strong>å¼‚æ­¥çš„JavaScriptå’ŒXML</strong>ï¼Œå®ƒæ˜¯ä¸€å¥—ç”¨äºåˆ›å»ºå¿«é€ŸåŠ¨æ€ç½‘é¡µçš„æŠ€æœ¯æ ‡å‡†ï¼Œä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆ›å»ºå¼‚æ­¥XMLHttpRequestå¯¹è±¡    <code>conet httpRequest = new XMLHttpRequest()</code>ï¼›</li>
<li>è®¾ç½®è¯·æ±‚å‚æ•°ï¼ŒåŒ…æ‹¬è¯·æ±‚çš„æ–¹æ³•å’ŒURLç­‰ <code>httpRequest.open('GET',url)</code>ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥è®¾ç½®è¿™ä¸ªè¯·æ±‚æ˜¯å¼‚æ­¥è¿˜æ˜¯åŒæ­¥çš„ï¼Œé»˜è®¤æ˜¯å¼‚æ­¥è¯·æ±‚ï¼‰ï¼›</li>
<li>å‘é€è¯·æ±‚   <code>httpRequest.send()</code>ï¼›</li>
<li>æ³¨å†Œäº‹ä»¶ï¼Œäº‹ä»¶çŠ¶æ€å˜æ›´ä¼šåŠæ—¶å“åº”ç›‘å¬  ï¼›</li>
<li>åœ¨ç›‘å¬é‡Œé¢è·å–å¹¶å¤„ç†è¿”å›æ•°æ®ï¼›</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">httpRequest<span class="token punctuation">.</span><span class="token function-variable function">onReadyStateChange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>readyState<span class="token operator">===</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>status<span class="token operator">&gt;=</span><span class="token number">200</span><span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>status<span class="token operator">&lt;</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>httpRequest <span class="token punctuation">.</span>response<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ‰€ä»¥AJAXçš„æ ¸å¿ƒå°±æ˜¯<code>XMLHttpRequest</code>å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ—©çš„å®ç°æ–¹æ³•ï¼Œä¹Ÿæ˜¯å…¼å®¹æ€§æœ€å¥½çš„ï¼Œå·²ç»æˆä¸ºäº†æµè§ˆå™¨æ ‡å‡†ï¼Œè™½ç„¶æˆ‘ä»¬ç°åœ¨éƒ½ä½¿ç”¨å…¶å®ƒçš„APIè§„èŒƒï¼Œä½†å¯¹è±¡åå­—æš‚æ—¶è¿˜æ˜¯ç”¨XMLå‘½åã€‚</p>
<h3 id="äº‹ä»¶å¤„ç†å‡½æ•°å’Œå›è°ƒå‡½æ•°"><a href="#äº‹ä»¶å¤„ç†å‡½æ•°å’Œå›è°ƒå‡½æ•°" class="headerlink" title="äº‹ä»¶å¤„ç†å‡½æ•°å’Œå›è°ƒå‡½æ•°"></a>äº‹ä»¶å¤„ç†å‡½æ•°å’Œå›è°ƒå‡½æ•°</h3><p>äº‹ä»¶å¤„ç†å‡½æ•°æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œåªæœ‰åœ¨äº‹ä»¶å‘ç”Ÿæ—¶è¢«è°ƒç”¨ï¼›äº‹ä»¶å¤„ç†ç¨‹åºæ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å›è°ƒå‡½æ•°ã€‚è€Œå›è°ƒå‡½æ•°åˆ™æ˜¯ä¸€ä¸ªè¢«ä¼ é€’åˆ°å¦ä¸€ä¸ªå‡½æ•°ä¸­çš„ä¼šåœ¨é€‚å½“çš„æ—¶å€™è¢«è°ƒç”¨çš„å‡½æ•°ã€‚å›è°ƒå‡½æ•°æ›¾ç»æ˜¯ JavaScript ä¸­å®ç°å¼‚æ­¥å‡½æ•°çš„ä¸»è¦æ–¹å¼ã€‚ç„¶è€Œï¼Œå½“å›è°ƒå‡½æ•°æœ¬èº«éœ€è¦è°ƒç”¨å…¶ä»–åŒæ ·æ¥å—å›è°ƒå‡½æ•°çš„å‡½æ•°æ—¶ï¼ŒåŸºäºå›è°ƒçš„ä»£ç ä¼šå˜å¾—éš¾ä»¥ç†è§£ï¼Œå³â€œå›è°ƒåœ°ç‹±â€ã€‚</p>
<h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><p><strong><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></strong> æ˜¯ç°ä»£ JavaScript ä¸­å¼‚æ­¥ç¼–ç¨‹çš„åŸºç¡€ï¼Œæ˜¯ä¸€ä¸ªç”±å¼‚æ­¥å‡½æ•°è¿”å›çš„å¯ä»¥å‘æˆ‘ä»¬æŒ‡ç¤ºå½“å‰æ“ä½œæ‰€å¤„çš„çŠ¶æ€çš„å¯¹è±¡ã€‚åœ¨ Promise è¿”å›ç»™è°ƒç”¨è€…çš„æ—¶å€™ï¼Œæ“ä½œå¾€å¾€è¿˜æ²¡æœ‰å®Œæˆï¼Œä½† Promise å¯¹è±¡å¯ä»¥è®©æˆ‘ä»¬æ“ä½œæœ€ç»ˆå®Œæˆæ—¶å¯¹å…¶è¿›è¡Œå¤„ç†ï¼ˆæ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼‰ã€‚Promiseä½¿å¼‚æ­¥æ“ä½œå¯ä»¥é“¾å¼è°ƒç”¨ï¼Œé¿å…äº†å›è°ƒåœ°ç‹±ï¼Œä½¿ä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°ã€‚</p>
<h3 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/fetch">fetch()</a>æ˜¯ä¸€ä¸ªç°ä»£çš„ã€åŸºäº Promise çš„ã€ç”¨äºæ›¿ä»£ <code>XMLHttpRequest</code> çš„æ–¹æ³•ã€‚</p>
<p>fetchä¸æ˜¯XMLHttpRequestå¯¹è±¡ï¼Œå®ƒæ˜¯åŸç”Ÿçš„jså¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¸ä¾èµ–æµè§ˆå™¨ã€‚æˆ‘ä»¬ä¸»è¦éœ€è¦äº†è§£ä¸‹fetchå’Œajaxçš„æœ¬è´¨åŒºåˆ«ï¼š</p>
<ol>
<li>fetchè¿”å›çš„æ˜¯Promiseï¼Œæ‰€ä»¥å¦‚æœHTTPçŠ¶æ€ç æ˜¯404ä¹‹ç±»çš„ï¼Œfetchä¹Ÿæ˜¯æˆåŠŸè¿”å›çš„ï¼Œåªæœ‰åœ¨ç½‘ç»œè¿æ¥é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šreject</li>
<li>fetchä¸å‘é€cookies</li>
</ol>
<p>fetchçš„è¯·æ±‚å†™æ³•ä¼šæ¯”Ajaxç®€å•è®¸å¤šï¼Œä½†æˆ‘æƒ³ï¼Œæœ€ä¸»è¦çš„é—®é¢˜æ˜¯ï¼Œæ— æ³•åŒºåˆ†HTTPçŠ¶æ€ç äº†ï¼Œè¿™ä¸ªåœ¨ç¼–ç¨‹æ—¶è¿˜æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›®å‰è¿˜æ˜¯ä½¿ç”¨axiosæ¯”è¾ƒå¤šï¼Œè€Œå¾ˆå°‘ä½¿ç”¨fetchã€‚</p>
<h3 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h3><p>axiosæ˜¯ä¸€ä¸ªåŸºäºPromiseçš„HTTPåº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œnode.jsä¸­ï¼Œåœ¨æœåŠ¡ç«¯ä½¿ç”¨node.jsçš„<code>http</code>æ¨¡å—ï¼Œåœ¨å¼€æµè§ˆå™¨ä¸­ä½¿ç”¨XMLHttpRequestå¯¹è±¡ã€‚ä½ å¯ä»¥è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„å°è£…åº“ï¼Œé™¤äº†åŸºç¡€è¯·æ±‚æ•°æ®ï¼Œå®ƒè¿˜å¢åŠ äº†å¦‚ä¸‹åŠŸèƒ½ï¼š</p>
<ol>
<li>å¯¹PromiseAPIçš„æ”¯æŒ</li>
<li>æ”¯æŒè¯·æ±‚æ‹¦æˆªå’Œå“åº”ã€è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®ã€å–æ¶ˆè¯·æ±‚</li>
<li>å¯ä»¥è‡ªåŠ¨è½¬æ¢JSONæ•°æ®</li>
<li>å®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡XSRFï¼ˆCross-site request forgery-CSRF-è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰</li>
</ol>
<h3 id="å•çº¿ç¨‹"><a href="#å•çº¿ç¨‹" class="headerlink" title="å•çº¿ç¨‹"></a>å•çº¿ç¨‹</h3><p>JavaScriptçš„å•çº¿ç¨‹ï¼Œä¸å®ƒçš„ç”¨é€”æœ‰å…³ã€‚ä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼ŒJavaScriptçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ï¼Œä»¥åŠæ“ä½œDOMã€‚è¿™å†³å®šäº†å®ƒåªèƒ½æ˜¯å•çº¿ç¨‹ï¼Œå¦åˆ™ä¼šå¸¦æ¥å¾ˆå¤æ‚çš„åŒæ­¥é—®é¢˜ã€‚æ¯”å¦‚ï¼Œå‡å®šJavaScriptåŒæ—¶æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨æŸä¸ªDOMèŠ‚ç‚¹ä¸Šæ·»åŠ å†…å®¹ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹åˆ é™¤äº†è¿™ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ—¶æµè§ˆå™¨åº”è¯¥ä»¥å“ªä¸ªçº¿ç¨‹ä¸ºå‡†ï¼Ÿæ‰€ä»¥ï¼Œä¸ºäº†é¿å…å¤æ‚æ€§ï¼Œä»ä¸€è¯ç”Ÿï¼ŒJavaScriptå°±æ˜¯å•çº¿ç¨‹ï¼Œè¿™å·²ç»æˆäº†è¿™é—¨è¯­è¨€çš„æ ¸å¿ƒç‰¹å¾ï¼Œå°†æ¥ä¹Ÿä¸ä¼šæ”¹å˜ã€‚</p>
<p>ä¸ºäº†åˆ©ç”¨å¤šæ ¸CPUçš„è®¡ç®—èƒ½åŠ›ï¼ŒHTML5æå‡ºWeb Workeræ ‡å‡†ï¼Œå…è®¸JavaScriptè„šæœ¬åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯å­çº¿ç¨‹å®Œå…¨å—ä¸»çº¿ç¨‹æ§åˆ¶ï¼Œä¸”ä¸å¾—æ“ä½œDOMã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªæ–°æ ‡å‡†å¹¶æ²¡æœ‰æ”¹å˜JavaScriptå•çº¿ç¨‹çš„æœ¬è´¨ã€‚</p>
<h3 id="wokers"><a href="#wokers" class="headerlink" title="wokers"></a>wokers</h3><p>Workers ç»™äº†ä½ åœ¨ä¸åŒçº¿ç¨‹ä¸­è¿è¡ŒæŸäº›ä»»åŠ¡çš„èƒ½åŠ›ï¼Œå› æ­¤ä½ å¯ä»¥å¯åŠ¨ä»»åŠ¡ï¼Œç„¶åç»§ç»­å…¶ä»–çš„å¤„ç†ï¼ˆä¾‹å¦‚å¤„ç†ç”¨æˆ·æ“ä½œï¼‰ã€‚ä½†æ˜¯è¿™æ˜¯è¦ä»˜å‡ºä»£ä»·çš„ã€‚å¯¹äºå¤šçº¿ç¨‹ä»£ç ï¼Œä½ æ°¸è¿œä¸çŸ¥é“ä½ çš„çº¿ç¨‹ä»€ä¹ˆæ—¶å€™å°†ä¼šè¢«æŒ‚èµ·ï¼Œå…¶ä»–çº¿ç¨‹å°†ä¼šå¾—åˆ°è¿è¡Œçš„æœºä¼šã€‚å› æ­¤ï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹éƒ½å¯ä»¥è®¿é—®ç›¸åŒçš„å˜é‡ï¼Œé‚£ä¹ˆå˜é‡å°±æœ‰å¯èƒ½åœ¨ä»»ä½•æ—¶å€™å‘ç”Ÿæ„å¤–çš„å˜åŒ–ï¼Œè¿™å°†å¯¼è‡´å¾ˆéš¾å‘ç°çš„ Bugã€‚ä¸ºäº†é¿å… Web ä¸­çš„è¿™äº›é—®é¢˜ï¼Œä½ çš„ä¸»ä»£ç å’Œä½ çš„ worker ä»£ç æ°¸è¿œä¸èƒ½ç›´æ¥è®¿é—®å½¼æ­¤çš„å˜é‡ã€‚Workers å’Œä¸»ä»£ç è¿è¡Œåœ¨å®Œå…¨åˆ†ç¦»çš„ç¯å¢ƒä¸­ï¼Œåªæœ‰é€šè¿‡ç›¸äº’å‘é€æ¶ˆæ¯æ¥è¿›è¡Œäº¤äº’ã€‚ç‰¹åˆ«æ˜¯ï¼Œè¿™æ„å‘³ç€ workers ä¸èƒ½è®¿é—® DOMï¼ˆçª—å£ã€æ–‡æ¡£ã€é¡µé¢å…ƒç´ ç­‰ç­‰ï¼‰ã€‚</p>
<p>æœ‰ä¸‰ç§ä¸åŒç±»å‹çš„ workersï¼š</p>
<ul>
<li>dedicated workers(ç”±ä¸€ä¸ªè„šæœ¬å®ä¾‹ä½¿ç”¨)</li>
<li>shared workers(å¯ä»¥ç”±è¿è¡Œåœ¨ä¸åŒçª—å£ä¸­çš„å¤šä¸ªä¸åŒè„šæœ¬å…±äº«)</li>
<li>service workers(è¡Œä¸ºå°±åƒä»£ç†æœåŠ¡å™¨ï¼Œç¼“å­˜èµ„æºä»¥ä¾¿äº web åº”ç”¨ç¨‹åºå¯ä»¥åœ¨ç”¨æˆ·ç¦»çº¿æ—¶å·¥ä½œã€‚ä»–ä»¬æ˜¯<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps">æ¸è¿›å¼ Web åº”ç”¨</a>çš„å…³é”®ç»„ä»¶)</li>
</ul>
<p>web workersï¼Œå®ƒä½¿å¾— web åº”ç”¨èƒ½å¤Ÿç¦»çº¿åŠ è½½ä»»åŠ¡åˆ°å•ç‹¬çš„çº¿ç¨‹ä¸­ã€‚ä¸»çº¿ç¨‹å’Œ worker ä¸ç›´æ¥å…±äº«ä»»ä½•å˜é‡ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å‘é€æ¶ˆæ¯æ¥è¿›è¡Œé€šä¿¡ï¼Œè¿™äº›æ¶ˆæ¯ä½œä¸º <code>message</code> äº‹ä»¶è¢«å¯¹æ–¹æ¥å—ã€‚Workers å°½ç®¡ä¸èƒ½è®¿é—®ä¸»åº”ç”¨ç¨‹åºèƒ½è®¿é—®çš„æ‰€æœ‰ APIï¼Œå°¤å…¶æ˜¯ä¸èƒ½è®¿é—® DOMï¼Œä½†æ˜¯å¯ä»¥ä½œä¸ºä½¿ä¸»åº”ç”¨ç¨‹åºä¿æŒå“åº”çš„ä¸€ä¸ªæœ‰æ•ˆçš„æ–¹å¼ã€‚</p>
<h4 id="å¼‚æ­¥"><a href="#å¼‚æ­¥" class="headerlink" title="å¼‚æ­¥"></a>å¼‚æ­¥</h4><p>å¦‚æœjsä¸å­˜åœ¨å¼‚æ­¥ï¼Œåªèƒ½è‡ªä¸Šè€Œä¸‹æ‰§è¡Œï¼Œé‚£ä¹ˆå½“ä¸Šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå¾ˆé•¿æ—¶é—´åï¼Œä¸‹é¢çš„ä»»åŠ¡å°±éƒ½ä¼šé˜»å¡ã€‚å¯¹ç”¨æˆ·æ¥è¯´ï¼Œé¡µé¢å°±å¡æ­»äº†ï¼Œè¿™æ ·ç”¨æˆ·ä½“éªŒè¾ƒå·®ã€‚JSä¸»è¦æ˜¯é€šè¿‡<code>äº‹ä»¶å¾ªç¯</code>æ¥å®ç°å¼‚æ­¥çš„ã€‚</p>
<hr>
<h2 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h2><h3 id="äº‹ä»¶æ•è·å’Œå†’æ³¡"><a href="#äº‹ä»¶æ•è·å’Œå†’æ³¡" class="headerlink" title="äº‹ä»¶æ•è·å’Œå†’æ³¡"></a>äº‹ä»¶æ•è·å’Œå†’æ³¡</h3><div class="admonition info"><p class="admonition-title">[MDN](https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Building_blocks/Events)
</p></div>

<p> <img src="https://typora-lee.oss-cn-chengdu.aliyuncs.com/img-typora/20220728102415.png" alt="äº‹ä»¶æ•è·å’Œå†’æ³¡ç¤ºæ„å›¾ï¼ˆæ¥æºï¼šMDN)"></p>
<p>å½“ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿåœ¨å…·æœ‰çˆ¶å…ƒç´ çš„å…ƒç´ ä¸Š (ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯<code>&lt;video&gt;</code>å…ƒç´ ) æ—¶ï¼Œç°ä»£æµè§ˆå™¨è¿è¡Œä¸¤ä¸ªä¸åŒçš„é˜¶æ®µ - æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µã€‚åœ¨æ•è·é˜¶æ®µï¼š</p>
<ul>
<li>æµè§ˆå™¨æ£€æŸ¥å…ƒç´ çš„æœ€å¤–å±‚ç¥–å…ˆ<code>&lt;html&gt;</code>ï¼Œæ˜¯å¦åœ¨æ•è·é˜¶æ®µä¸­æ³¨å†Œäº†ä¸€ä¸ª<code>onclick</code>äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿è¡Œå®ƒã€‚</li>
<li>ç„¶åï¼Œå®ƒç§»åŠ¨åˆ°<code>&lt;html&gt;</code>ä¸­å•å‡»å…ƒç´ çš„ä¸‹ä¸€ä¸ªç¥–å…ˆå…ƒç´ ï¼Œå¹¶æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œç„¶åæ˜¯å•å‡»å…ƒç´ å†ä¸‹ä¸€ä¸ªç¥–å…ˆå…ƒç´ ï¼Œä¾æ­¤ç±»æ¨ï¼Œç›´åˆ°åˆ°è¾¾å®é™…ç‚¹å‡»çš„å…ƒç´ ã€‚</li>
</ul>
<p>åœ¨å†’æ³¡é˜¶æ®µï¼Œæ°æ°ç›¸åï¼š</p>
<ul>
<li>æµè§ˆå™¨æ£€æŸ¥å®é™…ç‚¹å‡»çš„å…ƒç´ æ˜¯å¦åœ¨å†’æ³¡é˜¶æ®µä¸­æ³¨å†Œäº†ä¸€ä¸ª<code>onclick</code>äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿è¡Œå®ƒ</li>
<li>ç„¶åå®ƒç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªç›´æ¥çš„ç¥–å…ˆå…ƒç´ ï¼Œå¹¶åšåŒæ ·çš„äº‹æƒ…ï¼Œç„¶åæ˜¯ä¸‹ä¸€ä¸ªï¼Œç­‰ç­‰ï¼Œç›´åˆ°å®ƒåˆ°è¾¾<code>&lt;html&gt;</code>å…ƒç´ ã€‚</li>
</ul>
<p>==åœ¨ç°ä»£æµè§ˆå™¨ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰äº‹ä»¶å¤„ç†ç¨‹åºéƒ½åœ¨å†’æ³¡é˜¶æ®µè¿›è¡Œæ³¨å†Œã€‚==å› æ­¤ï¼Œåœ¨æˆ‘ä»¬å½“å‰çš„ç¤ºä¾‹ä¸­ï¼Œå½“æ‚¨å•å‡»è§†é¢‘æ—¶ï¼Œè¿™ä¸ªå•å‡»äº‹ä»¶ä» <code>&lt;video&gt;</code>å…ƒç´ å‘å¤–å†’æ³¡ç›´åˆ°<code>&lt;html&gt;</code>å…ƒç´ ã€‚æ²¿ç€è¿™ä¸ªäº‹ä»¶å†’æ³¡çº¿è·¯ï¼š</p>
<ul>
<li>å®ƒå‘ç°äº†<code>video.onclick...</code>äº‹ä»¶å¤„ç†å™¨å¹¶ä¸”è¿è¡Œå®ƒï¼Œå› æ­¤è¿™ä¸ªè§†é¢‘<code>&lt;video&gt;</code>ç¬¬ä¸€æ¬¡å¼€å§‹æ’­æ”¾ã€‚</li>
<li>æ¥ç€å®ƒå‘ç°äº†ï¼ˆå¾€å¤–å†’æ³¡æ‰¾åˆ°çš„ï¼‰ <code>videoBox.onclick...</code>äº‹ä»¶å¤„ç†å™¨å¹¶ä¸”è¿è¡Œå®ƒï¼Œå› æ­¤è¿™ä¸ªè§†é¢‘<code>&lt;video&gt;</code>ä¹Ÿéšè—èµ·æ¥äº†ã€‚</li>
</ul>
<p><strong>é˜»æ­¢äº‹ä»¶å†’æ³¡</strong></p>
<p>æ ‡å‡†äº‹ä»¶å¯¹è±¡å…·æœ‰stopPropagation() æ–¹æ³•ï¼Œå½“åœ¨äº‹ä»¶å¯¹è±¡ä¸Šè°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå®ƒåªä¼šè®©å½“å‰äº‹ä»¶å¤„ç†ç¨‹åºè¿è¡Œï¼Œä½†äº‹ä»¶ä¸ä¼šåœ¨<strong>å†’æ³¡</strong>é“¾ä¸Šè¿›ä¸€æ­¥æ‰©å¤§ï¼Œå› æ­¤å°†ä¸ä¼šæœ‰æ›´å¤šäº‹ä»¶å¤„ç†å™¨è¢«è¿è¡Œ (ä¸ä¼šå‘ä¸Šå†’æ³¡)ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">video<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  video<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<div class="admonition info"><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰äº‹ä»¶å¤„ç†ç¨‹åºéƒ½æ˜¯åœ¨å†’æ³¡é˜¶æ®µæ³¨å†Œçš„ï¼Œè¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ›´æœ‰æ„ä¹‰ã€‚å¦‚æœæ‚¨çœŸçš„æƒ³åœ¨æ•è·é˜¶æ®µæ³¨å†Œä¸€ä¸ªäº‹ä»¶ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨<code>addEventListener()</code>æ³¨å†Œæ‚¨çš„å¤„ç†ç¨‹åºï¼Œå¹¶å°†å¯é€‰çš„ç¬¬ä¸‰ä¸ªå±æ€§è®¾ç½®ä¸º trueã€‚</p>
</div>

<h3 id="äº‹ä»¶å§”æ‰˜ï¼Ÿ"><a href="#äº‹ä»¶å§”æ‰˜ï¼Ÿ" class="headerlink" title="äº‹ä»¶å§”æ‰˜ï¼Ÿ"></a>äº‹ä»¶å§”æ‰˜ï¼Ÿ</h3><p><strong>äº‹ä»¶å§”æ‰˜</strong>æ˜¯æŠŠæŠŠåŸæœ¬éœ€è¦ç»‘å®šç»™å­å…ƒç´ çš„äº‹ä»¶å§”æ‰˜ç»™çˆ¶å…ƒç´ ï¼Œè®©çˆ¶å…ƒç´ è´Ÿè´£äº‹ä»¶ç›‘å¬ã€‚</p>
<p>å› ä¸ºæ¯ç»‘å®šä¸€ä¸ªäº‹ä»¶å¤„ç†å™¨éƒ½æ˜¯æœ‰ä»£ä»·çš„ï¼Œå¦‚æœä¸€ä¸ªçˆ¶å…ƒç´ æœ‰å¾ˆå¤šçš„å­å…ƒç´ ï¼Œè¦ç»™æ¯ä¸ªå­å…ƒç´ éƒ½ç»‘å®šäº‹ä»¶ï¼Œä¼šæå¤§çš„å½±å“é¡µé¢çš„æ€§èƒ½ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬é€šè¿‡äº‹ä»¶å§”æ‰˜æ¥è¿›è¡Œä¼˜åŒ–ã€‚ä»¥æ­¤æ¥å‡å°‘å†…å­˜æ¶ˆè€—ï¼Œå’Œå®ç°åŠ¨æ€ç»‘å®šäº‹ä»¶ã€‚</p>
<h4 id="äº‹ä»¶å§”æ‰˜çš„åŸç†ï¼š"><a href="#äº‹ä»¶å§”æ‰˜çš„åŸç†ï¼š" class="headerlink" title="äº‹ä»¶å§”æ‰˜çš„åŸç†ï¼š"></a>äº‹ä»¶å§”æ‰˜çš„åŸç†ï¼š</h4><p>äº‹ä»¶å§”æ‰˜åˆ©ç”¨çš„å°±æ˜¯å†’æ³¡çš„åŸç†ã€‚</p>
<h4 id="äº‹ä»¶å§”æ‰˜çš„ä¼˜ç‚¹ï¼š"><a href="#äº‹ä»¶å§”æ‰˜çš„ä¼˜ç‚¹ï¼š" class="headerlink" title="äº‹ä»¶å§”æ‰˜çš„ä¼˜ç‚¹ï¼š"></a>äº‹ä»¶å§”æ‰˜çš„ä¼˜ç‚¹ï¼š</h4><p>â€‹    1ã€å‡å°å†…å­˜æ¶ˆè€—</p>
<p>â€‹    2ã€åŠ¨æ€ç»‘å®šäº‹ä»¶</p>
<h4 id="äº‹ä»¶å§”æ‰˜ä¸¾ä¾‹ï¼š"><a href="#äº‹ä»¶å§”æ‰˜ä¸¾ä¾‹ï¼š" class="headerlink" title="äº‹ä»¶å§”æ‰˜ä¸¾ä¾‹ï¼š"></a>äº‹ä»¶å§”æ‰˜ä¸¾ä¾‹ï¼š</h4><p>åœ¨ulå’Œliçš„ä¾‹å­ä¸­ï¼šæ­£å¸¸æƒ…å†µæˆ‘ä»¬ç»™æ¯ä¸€ä¸ªliéƒ½ä¼šç»‘å®šä¸€ä¸ªç›‘å¬äº‹ä»¶ï¼Œä½†æ˜¯å¦‚æœè¿™æ—¶å€™liæ˜¯åŠ¨æ€æ¸²æŸ“çš„ï¼Œæ•°æ®åˆç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œæ¯æ¬¡æ¸²æŸ“åï¼ˆæœ‰æ–°å¢çš„æƒ…å†µï¼‰æˆ‘ä»¬è¿˜éœ€è¦é‡æ–°æ¥ç»‘å®šï¼Œåˆç¹çåˆè€—æ€§èƒ½ï¼›è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥å°†ç»‘å®šäº‹ä»¶å§”æ‰˜åˆ°liçš„çˆ¶çº§å…ƒç´ ï¼Œå³ulã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> ul_dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span>
ul_dom<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>target<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="targetå’ŒcurrentTarget"><a href="#targetå’ŒcurrentTarget" class="headerlink" title="targetå’ŒcurrentTarget"></a>targetå’ŒcurrentTarget</h4><p>ä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ç§è·å–ç›®æ ‡å…ƒç´ çš„æ–¹å¼ï¼Œtargetå’ŒcurrentTargetï¼Œé‚£ä¹ˆä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼š</p>
<ul>
<li>targetè¿”å›è§¦å‘äº‹ä»¶çš„å…ƒç´ ï¼Œ<code>ä¸ä¸€å®šæ˜¯ç»‘å®šäº‹ä»¶çš„å…ƒç´ </code></li>
<li>currentTargetè¿”å›çš„æ˜¯ç»‘å®šäº‹ä»¶çš„å…ƒç´ </li>
</ul>
<h3 id="äº‹ä»¶å¾ªç¯ï¼ˆJSå¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œæœºåˆ¶ã€JavaScriptçš„æ‰§è¡Œæœºåˆ¶ï¼‰"><a href="#äº‹ä»¶å¾ªç¯ï¼ˆJSå¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œæœºåˆ¶ã€JavaScriptçš„æ‰§è¡Œæœºåˆ¶ï¼‰" class="headerlink" title="äº‹ä»¶å¾ªç¯ï¼ˆJSå¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œæœºåˆ¶ã€JavaScriptçš„æ‰§è¡Œæœºåˆ¶ï¼‰"></a>äº‹ä»¶å¾ªç¯ï¼ˆJSå¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œæœºåˆ¶ã€JavaScriptçš„æ‰§è¡Œæœºåˆ¶ï¼‰</h3><p><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2014/10/event-loop.html">é˜®ä¸€å³°</a></p>
<p>JavaScriptæ˜¯å•çº¿ç¨‹çš„ï¼Œè¿™æ„å‘³ç€ä»»åŠ¡çš„æ‰§è¡Œéœ€è¦æ’é˜Ÿï¼Œå¦‚æœæœ‰è€—æ—¶ç‰¹åˆ«é•¿çš„ä»»åŠ¡åœ¨æ‰§è¡Œï¼Œé‚£ä¹ˆåä¸€ä¸ªä»»åŠ¡å°±å¾—ç­‰å¾…ä¸Šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œã€‚è¿™æ ·çš„æ‰§è¡Œæ•ˆç‡æ˜¯å¾ˆä½çš„ï¼Œæ²¡æœ‰å……åˆ†åˆ©ç”¨CPUã€‚äºæ˜¯JavaScriptå°†ä»»åŠ¡åˆ†ä¸ºä¸¤ç§ï¼šåŒæ­¥ä»»åŠ¡ï¼ˆsynchronousï¼‰å’Œå¼‚æ­¥ä»»åŠ¡ï¼ˆasynchronousï¼‰ã€‚åŒæ­¥ä»»åŠ¡æŒ‡çš„æ˜¯åªåœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œçš„ä»»åŠ¡ï¼Œåªæœ‰å‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œåä¸€ä¸ªä»»åŠ¡æ‰èƒ½æ‰§è¡Œï¼›å¼‚æ­¥ä»»åŠ¡æŒ‡çš„æ˜¯ï¼Œä¸è¿›å…¥ä¸»çº¿ç¨‹è€Œè¿›å…¥â€œä»»åŠ¡é˜Ÿåˆ—ï¼ˆtash queueï¼‰â€çš„ä»»åŠ¡ï¼Œåªæœ‰â€œä»»åŠ¡é˜Ÿåˆ—â€é€šçŸ¥ä¸»çº¿ç¨‹æŸä¸ªå¼‚æ­¥ä»»åŠ¡å¯ä»¥æ‰§è¡Œäº†ï¼Œæ”¹ä»»åŠ¡æ‰è¿›å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚</p>
<p>å…·ä½“æ¥è¯´äº‹ä»¶çš„æ‰§è¡Œæœºåˆ¶å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>ï¼ˆ1ï¼‰æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ª<a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2013/11/stack.html">æ‰§è¡Œæ ˆ</a>ï¼ˆexecution context stackï¼‰ã€‚</p>
<p>ï¼ˆ2ï¼‰ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªâ€ä»»åŠ¡é˜Ÿåˆ—â€ï¼ˆtask queueï¼‰ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨â€ä»»åŠ¡é˜Ÿåˆ—â€ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚</p>
<p>ï¼ˆ3ï¼‰ä¸€æ—¦â€æ‰§è¡Œæ ˆâ€ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ï¼Œä¸»çº¿ç¨‹æ‰§è¡Œäº‹ä»¶å¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œå³æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ã€‚</p>
<p>ï¼ˆ4ï¼‰ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ã€‚</p>
</blockquote>
<p><img src="https://typora-lee.oss-cn-chengdu.aliyuncs.com/img-typora/20220723102716.jpeg" alt="ä»»åŠ¡é˜Ÿåˆ—"></p>
<p>åªè¦ä¸»çº¿ç¨‹ç©ºäº†ï¼Œå°±ä¼šå»è¯»å–â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œè¿™å°±æ˜¯JavaScriptçš„è¿è¡Œæœºåˆ¶ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šä¸æ–­é‡å¤ã€‚ä¸»çº¿ç¨‹ä»â€ä»»åŠ¡é˜Ÿåˆ—â€ä¸­è¯»å–äº‹ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ªç¯ä¸æ–­çš„ï¼Œæ‰€ä»¥æ•´ä¸ªçš„è¿™ç§è¿è¡Œæœºåˆ¶åˆç§°ä¸º<strong>Event Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰</strong>ã€‚</p>
<p><img src="https://typora-lee.oss-cn-chengdu.aliyuncs.com/img-typora/20220723103134.png" alt="Event Loop"></p>
<p>ä¸Šå›¾ä¸­ï¼Œä¸»çº¿ç¨‹è¿è¡Œçš„æ—¶å€™ï¼Œäº§ç”Ÿå †ï¼ˆheapï¼‰å’Œæ ˆï¼ˆstackï¼‰ï¼Œæ ˆä¸­çš„ä»£ç è°ƒç”¨å„ç§å¤–éƒ¨APIï¼Œå®ƒä»¬åœ¨â€ä»»åŠ¡é˜Ÿåˆ—â€ä¸­åŠ å…¥å„ç§äº‹ä»¶ï¼ˆclickï¼Œloadï¼Œdoneï¼‰ã€‚åªè¦æ ˆä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œä¸»çº¿ç¨‹å°±ä¼šå»è¯»å–â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œä¾æ¬¡æ‰§è¡Œé‚£äº›äº‹ä»¶æ‰€å¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚</p>
<p>â€œä»»åŠ¡é˜Ÿåˆ—â€æ˜¯ä¸€ä¸ªäº‹ä»¶çš„é˜Ÿåˆ—ï¼ˆä¹Ÿå¯ä»¥ç†è§£æˆæ¶ˆæ¯çš„é˜Ÿåˆ—ï¼‰ï¼ŒIOè®¾å¤‡å®Œæˆä¸€é¡¹ä»»åŠ¡ï¼Œå°±åœ¨â€ä»»åŠ¡é˜Ÿåˆ—â€ä¸­æ·»åŠ ä¸€ä¸ªäº‹ä»¶ï¼Œè¡¨ç¤ºç›¸å…³çš„å¼‚æ­¥ä»»åŠ¡å¯ä»¥è¿›å…¥â€æ‰§è¡Œæ ˆâ€äº†ã€‚ä¸»çº¿ç¨‹è¯»å–â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œå°±æ˜¯è¯»å–é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚</p>
<p>â€œä»»åŠ¡é˜Ÿåˆ—â€ä¸­çš„äº‹ä»¶ï¼Œé™¤äº†IOè®¾å¤‡çš„äº‹ä»¶ä»¥å¤–ï¼Œè¿˜åŒ…æ‹¬ä¸€äº›ç”¨æˆ·äº§ç”Ÿçš„äº‹ä»¶ï¼ˆæ¯”å¦‚é¼ æ ‡ç‚¹å‡»ã€é¡µé¢æ»šåŠ¨ç­‰ç­‰ï¼‰ã€‚åªè¦æŒ‡å®šè¿‡å›è°ƒå‡½æ•°ï¼Œè¿™äº›äº‹ä»¶å‘ç”Ÿæ—¶å°±ä¼šè¿›å…¥â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œç­‰å¾…ä¸»çº¿ç¨‹è¯»å–ã€‚</p>
<p>æ‰€è°“â€å›è°ƒå‡½æ•°â€ï¼ˆcallbackï¼‰ï¼Œå°±æ˜¯é‚£äº›ä¼šè¢«ä¸»çº¿ç¨‹æŒ‚èµ·æ¥çš„ä»£ç ã€‚==å¼‚æ­¥ä»»åŠ¡å¿…é¡»æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œå½“ä¸»çº¿ç¨‹å¼€å§‹æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œå°±æ˜¯æ‰§è¡Œå¯¹åº”çš„å›è°ƒå‡½æ•°==ã€‚</p>
<hr>
<p>â€œä»»åŠ¡é˜Ÿåˆ—â€æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„ï¼Œæ’åœ¨å‰é¢çš„äº‹ä»¶ï¼Œä¼˜å…ˆè¢«ä¸»çº¿ç¨‹è¯»å–ã€‚ä¸»çº¿ç¨‹çš„è¯»å–è¿‡ç¨‹åŸºæœ¬ä¸Šæ˜¯è‡ªåŠ¨çš„ï¼Œåªè¦æ‰§è¡Œæ ˆä¸€æ¸…ç©ºï¼Œâ€ä»»åŠ¡é˜Ÿåˆ—â€ä¸Šç¬¬ä¸€ä½çš„äº‹ä»¶å°±è‡ªåŠ¨è¿›å…¥ä¸»çº¿ç¨‹ã€‚ä½†æ˜¯ï¼Œç”±äºå­˜åœ¨åæ–‡æåˆ°çš„â€å®šæ—¶å™¨â€åŠŸèƒ½ï¼Œä¸»çº¿ç¨‹é¦–å…ˆè¦æ£€æŸ¥ä¸€ä¸‹æ‰§è¡Œæ—¶é—´ï¼ŒæŸäº›äº‹ä»¶åªæœ‰åˆ°äº†è§„å®šçš„æ—¶é—´ï¼Œæ‰èƒ½è¿”å›ä¸»çº¿ç¨‹ã€‚</p>
<p>setTimeout(function, delay)åªæ˜¯å°†äº‹ä»¶æ’å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå¿…é¡»ç­‰åˆ°æ‰§è¡Œæ ˆæ¸…ç©ºä¸”ä»»åŠ¡é˜Ÿåˆ—ä¸­æ’åœ¨setTimeoutäº‹ä»¶ä¹‹å‰çš„äº‹ä»¶æ‰§è¡Œå®Œï¼Œæ‰ä¼šæ‰§è¡ŒsetTimeoutçš„äº‹ä»¶ï¼Œå› æ­¤delayè¡¨ç¤ºè‡³å°‘ç­‰åˆ°delayæ—¶é—´åæ‰æ‰§è¡Œfunctionï¼Œä¸èƒ½ä¿è¯functionåœ¨delayæ—¶é—´é—´éš”å†…ä¸€å®šä¼šæ‰§è¡Œã€‚</p>
<hr>
<p><strong>ï¼ˆæ¯ä¸€ä¸ªå®ä»»åŠ¡å’Œå®ä»»åŠ¡çš„å¾®ä»»åŠ¡æ‰§è¡Œå®Œåéƒ½ä¼šå¯¹é¡µé¢ UI è¿›è¡Œæ¸²æŸ“ã€‚ï¼‰</strong></p>
<p>â€‹    <img src="https://typora-lee.oss-cn-chengdu.aliyuncs.com/img-typora/20220410225821.webp" alt="äº‹ä»¶å¾ªç¯æµç¨‹"></p>
<p><code>await</code> æ˜¯ä¸€ä¸ªè®©å‡ºçº¿ç¨‹çš„æ ‡å¿—ã€‚<code>await</code> åé¢çš„è¡¨è¾¾å¼ä¼šå…ˆæ‰§è¡Œä¸€éï¼Œå°† <code>await</code> åé¢çš„ä»£ç åŠ å…¥åˆ° <code>å¾®ä»»åŠ¡é˜Ÿåˆ—</code>ä¸­ï¼Œè¿™ä¸ªå¾®ä»»åŠ¡æ˜¯ <code>promise</code> é˜Ÿåˆ—ä¸­å¾®ä»»åŠ¡ï¼Œç„¶åå°±ä¼šè·³å‡ºæ•´ä¸ª <code>async</code> å‡½æ•°æ¥ç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ã€‚</p>
<p>æµè§ˆå™¨ä¸­çš„ä»»åŠ¡æº(task):</p>
<ul>
<li><code>å®ä»»åŠ¡(macrotask)</code>ï¼š<br>  å®¿ä¸»ç¯å¢ƒæä¾›çš„ï¼Œæ¯”å¦‚æµè§ˆå™¨<br>  ajaxã€setTimeoutã€setIntervalã€setTmmediate(åªå…¼å®¹ie)ã€scriptã€requestAnimationFrameã€messageChannelã€UIæ¸²æŸ“ã€ä¸€äº›æµè§ˆå™¨api;</li>
<li><code>å¾®ä»»åŠ¡(microtask)</code>ï¼š<br>  è¯­è¨€æœ¬èº«æä¾›çš„ï¼Œæ¯”å¦‚promise.thenã€queueMicrotask(åŸºäºthen)ã€mutationObserver(æµè§ˆå™¨æä¾›)ã€messageChannel ã€mutationObersve;</li>
</ul>
<p>ä¼ é€é—¨ â˜ <a target="_blank" rel="noopener" href="https://juejin.cn/post/7001881781125251086"># å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡</a></p>
<h4 id="Node-ç¯å¢ƒä¸­çš„äº‹ä»¶ç¯ï¼ˆEvent-Loop"><a href="#Node-ç¯å¢ƒä¸­çš„äº‹ä»¶ç¯ï¼ˆEvent-Loop" class="headerlink" title="Node ç¯å¢ƒä¸­çš„äº‹ä»¶ç¯ï¼ˆEvent Loop)"></a>Node ç¯å¢ƒä¸­çš„äº‹ä»¶ç¯ï¼ˆEvent Loop)</h4><p><a target="_blank" rel="noopener" href="https://nodejs.org/zh-cn/docs/guides/event-loop-timers-and-nexttick/">Node.js</a></p>
<p><code>Node</code>æ˜¯åŸºäºV8å¼•æ“çš„è¿è¡Œåœ¨æœåŠ¡ç«¯çš„<code>JavaScript</code>è¿è¡Œç¯å¢ƒï¼Œåœ¨å¤„ç†é«˜å¹¶å‘ã€I/Oå¯†é›†(æ–‡ä»¶æ“ä½œã€ç½‘ç»œæ“ä½œã€æ•°æ®åº“æ“ä½œç­‰)åœºæ™¯æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ã€‚è™½ç„¶ç”¨åˆ°ä¹Ÿæ˜¯V8å¼•æ“ï¼Œä½†ç”±äºæœåŠ¡ç›®çš„å’Œç¯å¢ƒä¸åŒï¼Œå¯¼è‡´äº†å®ƒçš„APIä¸åŸç”ŸJSæœ‰äº›åŒºåˆ«ï¼Œå…¶Event Loopè¿˜è¦å¤„ç†ä¸€äº›I/Oï¼Œæ¯”å¦‚æ–°çš„ç½‘ç»œè¿æ¥ç­‰ï¼Œæ‰€ä»¥Nodeçš„Event Loop(äº‹ä»¶ç¯æœºåˆ¶)ä¸æµè§ˆå™¨çš„æ˜¯ä¸å¤ªä¸€æ ·ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://libuv.org/">libuv</a>ï¼ˆå®ç° Node.js äº‹ä»¶å¾ªç¯å’Œå¹³å°çš„æ‰€æœ‰å¼‚æ­¥è¡Œä¸ºçš„ C å‡½æ•°åº“ï¼‰ã€‚</p>
<p><img src="https://typora-lee.oss-cn-chengdu.aliyuncs.com/img-typora/20220724100848.png" alt="Node.js"></p>
<p>æ‰§è¡Œçš„ä»»åŠ¡åˆ†ä¸ºä¸¤ç§ï¼šåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ã€‚åŒæ­¥ä»»åŠ¡æ€»æ˜¯æ¯”å¼‚æ­¥ä»»åŠ¡å…ˆæ‰§è¡Œã€‚å¼‚æ­¥ä»»åŠ¡åˆåˆ†ä¸ºä¸¤ç§ï¼šè¿½åŠ åœ¨<strong>æœ¬æ¬¡å¾ªç¯</strong>çš„å¼‚æ­¥ä»»åŠ¡å’Œè¿½åŠ åœ¨<strong>æ¬¡è½®å¾ªç¯</strong>çš„å¼‚æ­¥ä»»åŠ¡ã€‚è¿™é‡Œçš„å¾ªç¯å°±æŒ‡çš„æ˜¯â€œäº‹ä»¶å¾ªç¯ï¼ˆevent loopï¼‰â€ã€‚æœ¬è½®å¾ªç¯ä¸€å®šæ¯”æ¬¡è½®å¾ªç¯å…ˆæ‰§è¡Œã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// ä¸‹é¢ä¸¤è¡Œï¼Œæ¬¡è½®å¾ªç¯æ‰§è¡Œ</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä¸‹é¢ä¸¤è¡Œï¼Œæœ¬è½®å¾ªç¯æ‰§è¡Œ</span>
process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åŒæ­¥ä»»åŠ¡</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¾“å‡ºï¼š5 3 4 1 2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æœ¬è½®å¾ªç¯çš„æ‰§è¡Œé¡ºåºï¼š</p>
<ol>
<li>åŒæ­¥ä»»åŠ¡ï¼›</li>
<li>process.nextTick() â€” ==nextTickQueue==</li>
<li>å¾®ä»»åŠ¡ â€” ==microTaskQueue==</li>
</ol>
<p>Node.jsåœ¨è¿›å…¥äº‹ä»¶å¾ªç¯ä¹‹å‰ä¼šå…ˆå®Œæˆä¸‹é¢çš„äº‹æƒ…ï¼š</p>
<ul>
<li>æ‰§è¡ŒåŒæ­¥ä»»åŠ¡</li>
<li>å‘å‡ºå¼‚æ­¥è¯·æ±‚ï¼ˆè°ƒç”¨ä¸€äº›å¼‚æ­¥çš„ APIï¼‰</li>
<li>è§„å®šå®šæ—¶å™¨ç”Ÿæ•ˆçš„æ—¶é—´ ï¼ˆè°ƒåº¦å®šæ—¶å™¨ï¼‰</li>
<li>æ‰§è¡Œprocess.nextTick()ç­‰ç­‰</li>
</ul>
<p>==æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š==</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e362c1770f62428fbf3faabd99d2a64c~tplv-k3u1fbpfcp-zoom-1.image" alt="2020120317343116.png"> </p>
<ul>
<li><p><code>timers(å®šæ—¶å™¨)</code>: è®¡æ—¶å™¨ï¼Œæ‰§è¡ŒsetTimeoutå’ŒsetIntervalçš„å›è°ƒ</p>
<ul>
<li>  è¿™ä¸ªæ˜¯å®šæ—¶å™¨é˜¶æ®µï¼Œå¤„ç†<code>setTimeout()</code>å’Œ<code>setInterval()</code>çš„å›è°ƒå‡½æ•°ã€‚è¿›å…¥è¿™ä¸ªé˜¶æ®µåï¼Œä¸»çº¿ç¨‹ä¼šæ£€æŸ¥ä¸€ä¸‹å½“å‰æ—¶é—´ï¼Œæ˜¯å¦æ»¡è¶³å®šæ—¶å™¨çš„æ¡ä»¶ã€‚å¦‚æœæ»¡è¶³å°±æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå¦åˆ™å°±ç¦»å¼€è¿™ä¸ªé˜¶æ®µã€‚</li>
<li>  è®¡æ—¶å™¨æŒ‡å®š <em>å¯ä»¥æ‰§è¡Œæ‰€æä¾›å›è°ƒ</em> çš„ <strong>é˜ˆå€¼</strong>ï¼Œè€Œä¸æ˜¯ç”¨æˆ·å¸Œæœ›å…¶æ‰§è¡Œçš„ç¡®åˆ‡æ—¶é—´ã€‚åœ¨æŒ‡å®šçš„ä¸€æ®µæ—¶é—´é—´éš”åï¼Œ è®¡æ—¶å™¨å›è°ƒå°†è¢«å°½å¯èƒ½æ—©åœ°è¿è¡Œã€‚ä½†æ˜¯ï¼Œæ“ä½œç³»ç»Ÿè°ƒåº¦æˆ–å…¶å®ƒæ­£åœ¨è¿è¡Œçš„å›è°ƒå¯èƒ½ä¼šå»¶è¿Ÿå®ƒä»¬ã€‚</li>
</ul>
</li>
<li><p><code>pending callbacks(å¾…å®šå›è°ƒ)</code>: æ‰§è¡Œå»¶è¿Ÿåˆ°ä¸‹ä¸€ä¸ªå¾ªç¯è¿­ä»£çš„ I/O å›è°ƒ</p>
<ul>
<li><p>æ­¤é˜¶æ®µå¯¹æŸäº›ç³»ç»Ÿæ“ä½œï¼ˆå¦‚ TCP é”™è¯¯ç±»å‹ï¼‰æ‰§è¡Œå›è°ƒã€‚ä¾‹å¦‚ï¼Œå¦‚æœ TCP å¥—æ¥å­—åœ¨å°è¯•è¿æ¥æ—¶æ¥æ”¶åˆ° <code>ECONNREFUSED</code>ï¼Œåˆ™æŸäº› *nix çš„ç³»ç»Ÿå¸Œæœ›ç­‰å¾…æŠ¥å‘Šé”™è¯¯ã€‚è¿™å°†è¢«æ’é˜Ÿä»¥åœ¨ <strong>æŒ‚èµ·çš„å›è°ƒ</strong> é˜¶æ®µæ‰§è¡Œã€‚</p>
</li>
<li><p>é™¤äº†ä»¥ä¸‹æ“ä½œçš„å›è°ƒå‡½æ•°ï¼Œå…¶ä»–çš„å›è°ƒå‡½æ•°éƒ½åœ¨è¿™ä¸ªé˜¶æ®µæ‰§è¡Œã€‚</p>
<blockquote>
<ul>
<li><code>setTimeout()</code>å’Œ<code>setInterval()</code>çš„å›è°ƒå‡½æ•°</li>
<li><code>setImmediate()</code>çš„å›è°ƒå‡½æ•°</li>
<li>ç”¨äºå…³é—­è¯·æ±‚çš„å›è°ƒå‡½æ•°ï¼Œæ¯”å¦‚<code>socket.on('close', ...)</code></li>
</ul>
</blockquote>
</li>
</ul>
</li>
<li><p><code>idle, prepare</code>: é˜Ÿåˆ—çš„ç§»åŠ¨ï¼Œä»…ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨</p>
</li>
<li><p><code>poll(è½®è¯¢)</code>: æ£€ç´¢æ–°çš„ I/O äº‹ä»¶;æ‰§è¡Œä¸ I/O ç›¸å…³çš„å›è°ƒã€‚äº‹å®ä¸Šé™¤äº†å…¶ä»–å‡ ä¸ªé˜¶æ®µå¤„ç†çš„äº‹æƒ…ï¼Œå…¶ä»–å‡ ä¹æ‰€æœ‰çš„å¼‚æ­¥éƒ½åœ¨è¿™ä¸ªé˜¶æ®µå¤„ç†ã€‚</p>
<ul>
<li><p>è¿™ä¸ªé˜¶æ®µæ˜¯è½®è¯¢æ—¶é—´ï¼Œç”¨äºç­‰å¾…è¿˜æœªè¿”å›çš„ I/O äº‹ä»¶ï¼Œæ¯”å¦‚æœåŠ¡å™¨çš„å›åº”ã€ç”¨æˆ·ç§»åŠ¨é¼ æ ‡ç­‰ç­‰ã€‚</p>
<p>  è¿™ä¸ªé˜¶æ®µçš„æ—¶é—´ä¼šæ¯”è¾ƒé•¿ã€‚å¦‚æœæ²¡æœ‰å…¶ä»–å¼‚æ­¥ä»»åŠ¡è¦å¤„ç†ï¼ˆæ¯”å¦‚åˆ°æœŸçš„å®šæ—¶å™¨ï¼‰ï¼Œä¼šä¸€ç›´åœç•™åœ¨è¿™ä¸ªé˜¶æ®µï¼Œç­‰å¾… I/O è¯·æ±‚è¿”å›ç»“æœã€‚</p>
</li>
<li><p><strong>è½®è¯¢</strong> é˜¶æ®µæœ‰ä¸¤ä¸ªé‡è¦çš„åŠŸèƒ½ï¼š</p>
<ol>
<li>è®¡ç®—åº”è¯¥é˜»å¡å’Œè½®è¯¢ I/O çš„æ—¶é—´ã€‚</li>
<li>ç„¶åï¼Œå¤„ç† <strong>è½®è¯¢</strong> é˜Ÿåˆ—é‡Œçš„äº‹ä»¶ã€‚</li>
</ol>
</li>
<li><p>å½“äº‹ä»¶å¾ªç¯è¿›å…¥ <strong>è½®è¯¢</strong> é˜¶æ®µä¸” <em>æ²¡æœ‰è¢«è°ƒåº¦çš„è®¡æ—¶å™¨æ—¶</em> ï¼Œå°†å‘ç”Ÿä»¥ä¸‹ä¸¤ç§æƒ…å†µä¹‹ä¸€ï¼š</p>
<ul>
<li><em>å¦‚æœ <strong>è½®è¯¢</strong> é˜Ÿåˆ— <strong>ä¸æ˜¯ç©ºçš„</strong></em> ï¼Œäº‹ä»¶å¾ªç¯å°†å¾ªç¯è®¿é—®å›è°ƒé˜Ÿåˆ—å¹¶åŒæ­¥æ‰§è¡Œå®ƒä»¬ï¼Œç›´åˆ°é˜Ÿåˆ—å·²ç”¨å°½ï¼Œæˆ–è€…è¾¾åˆ°äº†ä¸ç³»ç»Ÿç›¸å…³çš„ç¡¬æ€§é™åˆ¶ã€‚</li>
<li><em>å¦‚æœ <strong>è½®è¯¢</strong> é˜Ÿåˆ— <strong>æ˜¯ç©ºçš„</strong></em> ï¼Œè¿˜æœ‰ä¸¤ä»¶äº‹å‘ç”Ÿï¼š<ul>
<li>å¦‚æœè„šæœ¬è¢« <code>setImmediate()</code> è°ƒåº¦ï¼Œåˆ™äº‹ä»¶å¾ªç¯å°†ç»“æŸ <strong>è½®è¯¢</strong> é˜¶æ®µï¼Œå¹¶ç»§ç»­ <strong>æ£€æŸ¥</strong> é˜¶æ®µä»¥æ‰§è¡Œé‚£äº›è¢«è°ƒåº¦çš„è„šæœ¬ã€‚</li>
<li>å¦‚æœè„šæœ¬ <strong>æœªè¢«</strong> <code>setImmediate()</code>è°ƒåº¦ï¼Œåˆ™äº‹ä»¶å¾ªç¯å°†ç­‰å¾…å›è°ƒè¢«æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œç„¶åç«‹å³æ‰§è¡Œã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>  ä¸€æ—¦ <strong>è½®è¯¢</strong> é˜Ÿåˆ—ä¸ºç©ºï¼Œäº‹ä»¶å¾ªç¯å°†æ£€æŸ¥ _å·²è¾¾åˆ°æ—¶é—´é˜ˆå€¼çš„è®¡æ—¶å™¨_ã€‚å¦‚æœä¸€ä¸ªæˆ–å¤šä¸ªè®¡æ—¶å™¨å·²å‡†å¤‡å°±ç»ªï¼Œåˆ™äº‹ä»¶å¾ªç¯å°†ç»•å›è®¡æ—¶å™¨é˜¶æ®µä»¥æ‰§è¡Œè¿™äº›è®¡æ—¶å™¨çš„å›è°ƒã€‚</p>
</li>
</ul>
</li>
<li><p><code>check(æ£€æµ‹)</code>: æ‰§è¡Œ<code>setImmediate</code>å›è°ƒï¼ŒsetImmediateåœ¨è¿™é‡Œæ‰§è¡Œ</p>
<ul>
<li>  é€šå¸¸ï¼Œåœ¨æ‰§è¡Œä»£ç æ—¶ï¼Œäº‹ä»¶å¾ªç¯æœ€ç»ˆä¼šå‘½ä¸­è½®è¯¢é˜¶æ®µï¼Œåœ¨é‚£ç­‰å¾…ä¼ å…¥è¿æ¥ã€è¯·æ±‚ç­‰ã€‚ä½†æ˜¯ï¼Œå¦‚æœå›è°ƒå·²ä½¿ç”¨ <code>setImmediate()</code>è°ƒåº¦è¿‡ï¼Œå¹¶ä¸”è½®è¯¢é˜¶æ®µå˜ä¸ºç©ºé—²çŠ¶æ€ï¼Œåˆ™å®ƒå°†ç»“æŸæ­¤é˜¶æ®µï¼Œå¹¶ç»§ç»­åˆ°æ£€æŸ¥é˜¶æ®µè€Œä¸æ˜¯ç»§ç»­ç­‰å¾…è½®è¯¢äº‹ä»¶ã€‚</li>
</ul>
</li>
<li><p><code>close callbacks(å…³é—­çš„å›è°ƒå‡½æ•°)</code>: æ‰§è¡Œ<code>close</code>äº‹ä»¶çš„<code>callback</code>ï¼Œä¸€äº›å…³é—­çš„å›è°ƒå‡½æ•°ï¼Œå¦‚ï¼šsocket.on(â€˜closeâ€™, â€¦)</p>
<ul>
<li>  å¦‚æœå¥—æ¥å­—æˆ–å¤„ç†å‡½æ•°çªç„¶å…³é—­ï¼ˆä¾‹å¦‚ <code>socket.destroy()</code>ï¼‰ï¼Œåˆ™<code>'close'</code> äº‹ä»¶å°†åœ¨è¿™ä¸ªé˜¶æ®µå‘å‡ºã€‚å¦åˆ™å®ƒå°†é€šè¿‡ <code>process.nextTick()</code> å‘å‡ºã€‚</li>
</ul>
</li>
</ul>
<h2 id="setImmediate-å¯¹æ¯”-setTimeout"><a href="#setImmediate-å¯¹æ¯”-setTimeout" class="headerlink" title="setImmediate() å¯¹æ¯” setTimeout()"></a><code>setImmediate()</code> å¯¹æ¯” <code>setTimeout()</code></h2><p><code>setImmediate()</code> å’Œ <code>setTimeout()</code> å¾ˆç±»ä¼¼ï¼Œä½†æ˜¯åŸºäºè¢«è°ƒç”¨çš„æ—¶æœºï¼Œä»–ä»¬ä¹Ÿæœ‰ä¸åŒè¡¨ç°ã€‚</p>
<ul>
<li><code>setImmediate()</code> è®¾è®¡ä¸ºä¸€æ—¦åœ¨å½“å‰ <strong>è½®è¯¢</strong> é˜¶æ®µå®Œæˆï¼Œ å°±æ‰§è¡Œè„šæœ¬ã€‚</li>
<li><code>setTimeout()</code> åœ¨æœ€å°é˜ˆå€¼ï¼ˆms å•ä½ï¼‰è¿‡åè¿è¡Œè„šæœ¬ã€‚</li>
</ul>
<p>æ‰§è¡Œè®¡æ—¶å™¨çš„é¡ºåºå°†æ ¹æ®è°ƒç”¨å®ƒä»¬çš„ä¸Šä¸‹æ–‡è€Œå¼‚ã€‚å¦‚æœäºŒè€…éƒ½ä»ä¸»æ¨¡å—å†…è°ƒç”¨ï¼Œåˆ™è®¡æ—¶å™¨å°†å—è¿›ç¨‹æ€§èƒ½çš„çº¦æŸï¼ˆè¿™å¯èƒ½ä¼šå—åˆ°è®¡ç®—æœºä¸Šå…¶ä»–æ­£åœ¨è¿è¡Œåº”ç”¨ç¨‹åºçš„å½±å“ï¼‰ã€‚</p>
<p>å¦‚æœè¿è¡Œä»¥ä¸‹ä¸åœ¨ I/O å‘¨æœŸï¼ˆå³ä¸»æ¨¡å—ï¼‰å†…çš„è„šæœ¬ï¼Œåˆ™æ‰§è¡Œä¸¤ä¸ªè®¡æ—¶å™¨çš„é¡ºåºæ˜¯éç¡®å®šæ€§çš„ï¼Œå› ä¸ºå®ƒå—è¿›ç¨‹æ€§èƒ½çš„çº¦æŸã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æŠŠè¿™ä¸¤ä¸ªå‡½æ•°æ”¾å…¥ä¸€ä¸ª I/O å¾ªç¯å†…è°ƒç”¨ï¼ŒsetImmediate æ€»æ˜¯è¢«ä¼˜å…ˆè°ƒç”¨ã€‚</p>
<p><strong>æ€»ç»“ï¼š</strong>ä½¿ç”¨ <code>setImmediate()</code> ç›¸å¯¹äº<code>setTimeout()</code> çš„ä¸»è¦ä¼˜åŠ¿æ˜¯ï¼Œå¦‚æœ<code>setImmediate()</code>æ˜¯åœ¨ I/O å‘¨æœŸå†…è¢«è°ƒåº¦çš„ï¼Œé‚£å®ƒå°†ä¼šåœ¨å…¶ä¸­ä»»ä½•çš„å®šæ—¶å™¨ä¹‹å‰æ‰§è¡Œï¼Œè·Ÿè¿™é‡Œå­˜åœ¨å¤šå°‘ä¸ªå®šæ—¶å™¨æ— å…³</p>
<h2 id="process-nextTick-å¯¹æ¯”-setImmediate"><a href="#process-nextTick-å¯¹æ¯”-setImmediate" class="headerlink" title="process.nextTick() å¯¹æ¯” setImmediate()"></a><code>process.nextTick()</code> å¯¹æ¯” <code>setImmediate()</code></h2><ul>
<li><code>process.nextTick()</code> åœ¨åŒä¸€ä¸ªé˜¶æ®µç«‹å³æ‰§è¡Œã€‚</li>
<li><code>setImmediate()</code> åœ¨äº‹ä»¶å¾ªç¯çš„æ¥ä¸‹æ¥çš„è¿­ä»£æˆ– â€˜tickâ€™ ä¸Šè§¦å‘ã€‚</li>
</ul>
<p>Node.jsä¸­æä¾›çš„ä¸¤ä¸ªä¸â€œä»»åŠ¡é˜Ÿåˆ—â€ç›¸å…³çš„æ–¹æ³•ï¼šprocess.nextTickå’ŒsetImmediateã€‚</p>
<p>process.nextTickæ–¹æ³•å¯ä»¥åœ¨å½“å‰â€æ‰§è¡Œæ ˆâ€çš„å°¾éƒ¨â€”-ä¸‹ä¸€æ¬¡Event Loopï¼ˆä¸»çº¿ç¨‹è¯»å–â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼‰ä¹‹å‰â€”-è§¦å‘å›è°ƒå‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæŒ‡å®šçš„ä»»åŠ¡æ€»æ˜¯å‘ç”Ÿåœ¨æ‰€æœ‰å¼‚æ­¥ä»»åŠ¡ä¹‹å‰ã€‚setImmediateæ–¹æ³•åˆ™æ˜¯åœ¨å½“å‰â€ä»»åŠ¡é˜Ÿåˆ—â€çš„å°¾éƒ¨æ·»åŠ äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæŒ‡å®šçš„ä»»åŠ¡æ€»æ˜¯åœ¨ä¸‹ä¸€æ¬¡Event Loopæ—¶æ‰§è¡Œï¼Œè¿™ä¸setTimeout(fn, 0)å¾ˆåƒã€‚setImmediateæŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œæ€»æ˜¯æ’åœ¨setTimeoutå‰é¢ã€‚å®é™…ä¸Šï¼Œè¿™ç§æƒ…å†µåªå‘ç”Ÿåœ¨é€’å½’è°ƒç”¨çš„æ—¶å€™ã€‚ç”±äºprocess.nextTickæŒ‡å®šçš„å›è°ƒå‡½æ•°æ˜¯åœ¨æœ¬æ¬¡â€äº‹ä»¶å¾ªç¯â€è§¦å‘ï¼Œè€ŒsetImmediateæŒ‡å®šçš„æ˜¯åœ¨ä¸‹æ¬¡â€äº‹ä»¶å¾ªç¯â€è§¦å‘ï¼Œæ‰€ä»¥å¾ˆæ˜¾ç„¶ï¼Œå‰è€…æ€»æ˜¯æ¯”åè€…å‘ç”Ÿå¾—æ—©ï¼Œè€Œä¸”æ‰§è¡Œæ•ˆç‡ä¹Ÿé«˜ï¼ˆå› ä¸ºä¸ç”¨æ£€æŸ¥â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼‰ã€‚</p>
<hr>
<h3 id="JSé˜»å¡DOMè§£æ"><a href="#JSé˜»å¡DOMè§£æ" class="headerlink" title="JSé˜»å¡DOMè§£æ"></a>JSé˜»å¡DOMè§£æ</h3><p>å› ä¸ºæµè§ˆå™¨æ— æ³•çŸ¥é“DOMæ ‘çš„å†…å®¹ï¼Œå¦‚æœå…ˆè§£æäº†DOMï¼Œè€Œæœ€åjsåˆæŠŠDOMå…¨éƒ¨åˆ é™¤äº†ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ç™½è§£æäº†ä¸€æ¬¡ï¼Œå› æ­¤éœ€è¦åœ¨jsæ‰§è¡Œå®Œåï¼Œå†è§£æDOMã€‚</p>
<p><strong>æ‰©å±•ï¼š</strong></p>
<p>ä¸ºä»€ä¹ˆcssä¸ä¼šé˜»å¡DOMè§£æï¼Œè€Œä¼šé˜»å¡DOMæ¸²æŸ“ï¼Ÿ</p>
<blockquote>
<p>åœ¨æµè§ˆå™¨è§£æè¿‡ç¨‹ä¸­ï¼ŒHTMLä¸ CSSæ˜¯å¹¶è¡Œçš„ï¼Œæ‰€ä»¥ä¸ä¼šé˜»å¡DOMçš„è§£æã€‚ç„¶åæ¸²æŸ“çš„æ—¶å€™ï¼Œæ¸²æŸ“æ ‘å¿…é¡»ç»“åˆDOMæ ‘å’ŒCSSæ ‘ï¼Œå¦‚æœCSSæ²¡æœ‰è§£æå®Œæˆï¼Œé‚£ä¹ˆå°±æ— æ³•æ¸²æŸ“ã€‚</p>
</blockquote>
<p>ä¸ºä»€ä¹ˆCSSä¼šé˜»å¡JSçš„æ‰§è¡Œï¼Ÿjsä¼šè§¦å‘é¡µé¢æ¸²æŸ“ï¼Ÿ</p>
<blockquote>
<p>å¦‚æœjsæƒ³è¦è·å–åˆ°DOMçš„æœ€æ–°æ ·å¼ï¼Œåˆ™å¿…é¡»å…ˆæŠŠå¯¹åº”çš„CSSåŠ è½½å®Œæˆåï¼Œå¦åˆ™è·å–çš„æ ·å¼å¯èƒ½æ˜¯é”™è¯¯æˆ–è€…ä¸æ˜¯æœ€æ–°çš„ã€‚</p>
</blockquote>
<p><strong>æ€»ç»“ï¼š</strong></p>
<p>cssä¸ä¼šé˜»å¡DOMçš„è§£æï¼Œä½†ä¼šé˜»å¡DOMçš„æ¸²æŸ“ã€‚æˆ–è€…è¯´æ˜¯é˜»å¡æ¸²æŸ“æ ‘çš„ç”Ÿæˆï¼Œè¿›è€Œé˜»å¡DOMçš„æ¸²æŸ“ã€‚</p>
<p>jsä¼šé˜»å¡DOMçš„è§£æã€‚</p>
<p>cssä¼šé˜»å¡jsçš„æ‰§è¡Œã€‚</p>
<p>æµè§ˆå™¨é‡åˆ°<code>&lt;script&gt;</code>æ ‡ç­¾ä¸”æ²¡æœ‰<code>defer</code>æˆ–<code>async</code>å±æ€§æ—¶ä¼šè§¦å‘é¡µé¢æ¸²æŸ“ã€‚</p>
<hr>
<h2 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h2><h3 id="è§£æ„èµ‹å€¼"><a href="#è§£æ„èµ‹å€¼" class="headerlink" title="è§£æ„èµ‹å€¼"></a>è§£æ„èµ‹å€¼</h3><p>ES6 å…è®¸æŒ‰ç…§ä¸€å®šæ¨¡å¼ï¼Œä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¿™è¢«ç§°ä¸º<strong>è§£æ„ï¼ˆDestructuringï¼‰</strong>ã€‚</p>
<h4 id="1ã€æ•°ç»„çš„è§£æ„èµ‹å€¼"><a href="#1ã€æ•°ç»„çš„è§£æ„èµ‹å€¼" class="headerlink" title="1ã€æ•°ç»„çš„è§£æ„èµ‹å€¼"></a>1ã€æ•°ç»„çš„è§£æ„èµ‹å€¼</h4><p>ES6ä¹‹å‰ï¼Œä¸ºå˜é‡èµ‹å€¼ï¼Œåªèƒ½ç›´æ¥æŒ‡å®šå€¼ï¼Œéœ€è¦let a = 1, let b = 2ï¼Œåœ¨ES6ä¸­ï¼Œå¯ä»¥ä»æ•°ç»„ä¸­æå–å€¼ï¼ŒæŒ‰ç…§å¯¹åº”ä½ç½®ï¼Œå¯¹å˜é‡èµ‹å€¼ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>	<span class="token comment">//å¯ä»¥æŒ‰ç…§å¯¹åº”ä½ç½®å¯¹å˜é‡èµ‹å€¼ï¼Œä¹Ÿå¯ä»¥ä¸å®Œå…¨å¯¹åº”</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> <span class="token punctuation">,</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>	<span class="token comment">//x=1, y=3</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span><span class="token operator">...</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>	<span class="token comment">// x=1, y=[2,3,4]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>å¦ä¸€ç§çŠ¶æ€æ˜¯<strong>ä¸å®Œå…¨è§£æ„</strong>,ä½†å¯ä»¥<strong>è§£æ„æˆåŠŸ</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>		<span class="token comment">//x=1,y=2</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>å½“ç„¶ä¹Ÿå­˜åœ¨<strong>è§£æ„å¤±è´¥</strong>çš„çŠ¶æ€</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token operator">...</span>z<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span>	<span class="token comment">//x=a, y=undefined, z=[]</span>
<span class="token comment">//ä¸Šè¿°yå°±æ˜¯èµ‹å€¼ä¸æˆåŠŸï¼Œå€¼ä¸ºundefined</span>
<span class="token comment">//zä¸ºæ•°ç»„ï¼Œåˆ™ä¸ºç©ºæ•°ç»„</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>ä½†å¦‚æœå³è¾¹ä¸æ˜¯æ•°ç»„ï¼Œæˆ–ä¸æ˜¯å¯éå†çš„ç»“æ„ï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™ï¼Œè§£æ„å¤±è´¥ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token punctuation">[</span>foo<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>	<span class="token comment">//	æŠ¥é”™ï¼Œè§£æ„å¤±è´¥</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<div class="admonition warning"><p class="admonition-title">æ³¨æ„
</p><p>äº‹å®ä¸Šï¼Œåªè¦æŸç§æ•°æ®ç»“æ„å…·æœ‰ Iterator æ¥å£ï¼Œéƒ½å¯ä»¥é‡‡ç”¨æ•°ç»„å½¢å¼çš„è§£æ„èµ‹å€¼ã€‚</p>
</div>

<p><strong>æ•°ç»„è§£æ„èµ‹å€¼çš„é»˜è®¤å€¼</strong></p>
<p>åªæœ‰å½“ä¸€ä¸ªæ•°ç»„æˆå‘˜<code>===</code>ç­‰äº<code>undefined</code>ï¼Œé»˜è®¤å€¼æ‰ä¼šç”Ÿæ•ˆã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token punctuation">[</span>foo <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">//foo = true</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span>y<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span>	<span class="token comment">//x='a',y='b'</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">undefined</span><span class="token punctuation">]</span>	<span class="token comment">// x=1</span>
<span class="token keyword">let</span>	<span class="token punctuation">[</span>x<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span>	<span class="token comment">//	x=null</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¦‚æœé»˜è®¤å€¼æ˜¯ä¸€ä¸ª<strong>è¡¨è¾¾å¼</strong>ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨è¾¾å¼æ˜¯<strong>æƒ°æ€§æ±‚å€¼</strong>çš„ï¼Œå³åªæœ‰åœ¨ç”¨åˆ°çš„æ—¶å€™ï¼Œæ‰ä¼šæ±‚å€¼ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token punctuation">[</span>x <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œå› ä¸ºxèƒ½å–åˆ°å€¼ï¼Œæ‰€ä»¥å‡½æ•°<code>f</code>æ ¹æœ¬ä¸ä¼šæ‰§è¡Œã€‚</p>
<p>é»˜è®¤å€¼å¯ä»¥å¼•ç”¨è§£æ„èµ‹å€¼çš„å…¶ä»–å˜é‡ï¼ˆæƒ°æ€§çš„ï¼‰ï¼Œä½†è¯¥å˜é‡å¿…é¡»å·²ç»å£°æ˜ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>y<span class="token operator">=</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>	<span class="token comment">//x=1,y=1</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>y<span class="token operator">=</span>x<span class="token punctuation">]</span><span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>	<span class="token comment">// x=1,y=2</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>y<span class="token operator">=</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// x=1; y=2</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>x<span class="token operator">=</span>y<span class="token punctuation">,</span>y<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>     <span class="token comment">// ReferenceError: y is not defined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="2ã€å¯¹è±¡çš„è§£æ„èµ‹å€¼"><a href="#2ã€å¯¹è±¡çš„è§£æ„èµ‹å€¼" class="headerlink" title="2ã€å¯¹è±¡çš„è§£æ„èµ‹å€¼"></a>2ã€å¯¹è±¡çš„è§£æ„èµ‹å€¼</h4><p>ï¼ˆ1ï¼‰å¯¹è±¡çš„è§£æ„èµ‹å€¼ä¸æ•°ç»„çš„è§£æ„èµ‹å€¼ç±»ä¼¼ï¼Œä¸è¿‡å¯¹è±¡çš„è§£æ„èµ‹å€¼å¯ä»¥æ˜¯æ— åºçš„ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token string">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
foo <span class="token comment">// "aaa"</span>
bar <span class="token comment">// "bbb"</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span> bar<span class="token punctuation">,</span> foo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token string">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
foo <span class="token comment">// "aaa"</span>
bar <span class="token comment">// "bbb"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ï¼ˆ2ï¼‰å¦‚æœè§£æ„å¤±è´¥ï¼Œå˜é‡çš„å€¼ç­‰äº<code>undefined</code>ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token punctuation">{</span>foo<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token string">'baz'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
foo <span class="token comment">// undefined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>ï¼ˆ3ï¼‰å¯¹è±¡çš„è§£æ„èµ‹å€¼ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†<strong>ç°æœ‰å¯¹è±¡çš„æ–¹æ³•</strong>ï¼Œ<strong>èµ‹å€¼åˆ°æŸä¸ªå˜é‡</strong>ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token operator">=</span> console<span class="token punctuation">;</span>	<span class="token comment">//å°†console.logèµ‹å€¼åˆ°logå˜é‡</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span> <span class="token comment">// hello</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>ï¼ˆ4ï¼‰å¯¹è±¡çš„è§£æ„èµ‹å€¼çš„å†…éƒ¨æœºåˆ¶ï¼Œæ˜¯å…ˆæ‰¾åˆ°åŒåå±æ€§ï¼Œç„¶åå†èµ‹ç»™å¯¹åº”çš„å˜é‡ã€‚çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯åè€…ï¼Œè€Œä¸æ˜¯å‰è€…ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> baz <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token string">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
baz <span class="token comment">// "aaa"</span>
foo <span class="token comment">// error: foo is not defined</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>foo</code>æ˜¯åŒ¹é…çš„æ¨¡å¼ï¼Œ<code>baz</code>æ‰æ˜¯å˜é‡ã€‚çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯å˜é‡<code>baz</code>ï¼Œè€Œä¸æ˜¯æ¨¡å¼<code>foo</code>ã€‚</p>
<p>ï¼ˆ5ï¼‰<u>ä¸æ•°ç»„ä¸€æ ·ï¼Œè§£æ„ä¹Ÿå¯ä»¥ç”¨äºåµŒå¥—ç»“æ„çš„å¯¹è±¡ã€‚</u></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">p</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'Hello'</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token string">'World'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span> p<span class="token punctuation">,</span> <span class="token literal-property property">p</span><span class="token operator">:</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> <span class="token punctuation">{</span> y <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
x <span class="token comment">// "Hello"</span>
y <span class="token comment">// "World"</span>
p <span class="token comment">// ["Hello", {y: "World"}]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> node <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">loc</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">start</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">line</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token literal-property property">column</span><span class="token operator">:</span> <span class="token number">5</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span> loc<span class="token punctuation">,</span> <span class="token literal-property property">loc</span><span class="token operator">:</span> <span class="token punctuation">{</span> start <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">loc</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">start</span><span class="token operator">:</span> <span class="token punctuation">{</span> line <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> node<span class="token punctuation">;</span>
line <span class="token comment">// 1</span>
loc  <span class="token comment">// Object {start: Object}</span>
start <span class="token comment">// Object {line: 1, column: 5}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>åµŒå¥—èµ‹å€¼</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> obj<span class="token punctuation">.</span>prop<span class="token punctuation">,</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

obj <span class="token comment">// {prop:123}</span>
arr <span class="token comment">// [true]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¦‚æœè§£æ„æ¨¡å¼æ˜¯åµŒå¥—çš„å¯¹è±¡ï¼Œè€Œä¸”å­å¯¹è±¡æ‰€åœ¨çš„çˆ¶å±æ€§ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// æŠ¥é”™</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span><span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span>bar<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">baz</span><span class="token operator">:</span> <span class="token string">'baz'</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><strong>å¯¹è±¡è§£æ„èµ‹å€¼çš„é»˜è®¤å€¼</strong></p>
<p>ç±»ä¼¼æ•°ç»„çš„é»˜è®¤å€¼ï¼ˆæƒ°æ€§ï¼‰ï¼Œé»˜è®¤å€¼ç”Ÿæ•ˆçš„æ¡ä»¶æ˜¯ï¼Œå¯¹è±¡çš„å±æ€§å€¼ä¸¥æ ¼ç­‰äº<code>undefined</code>ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>	<span class="token comment">//x = 3</span>
<span class="token keyword">var</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>	<span class="token comment">// x=1,y=5</span>
<span class="token keyword">var</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>	<span class="token comment">// y:3</span>
<span class="token keyword">var</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>	<span class="token comment">// y:5</span>
<span class="token keyword">var</span> <span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> msg <span class="token operator">=</span> <span class="token string">'Something went wrong'</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>	<span class="token comment">//msg:"Something went wrong</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>!!! attension è¡¥å……<br>    é™¤ä»¥ä¸Šä¸¤ç§è§£æ„èµ‹å€¼å¤–ï¼Œè¿˜æœ‰<code>å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼</code>ã€<code>æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼</code>ã€<code>å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼</code>ã€‚åŸºæœ¬ç±»å‹ï¼ˆå­—ç¬¦ä¸²ã€æ•°å€¼å’Œå¸ƒå°”å€¼ï¼‰ä¼šå…ˆè½¬æ¢æˆå¯¹è±¡ã€‚</p>
<hr>
<h3 id="ç®­å¤´å‡½æ•°ï¼ˆé‡ç‚¹ï¼‰"><a href="#ç®­å¤´å‡½æ•°ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="ç®­å¤´å‡½æ•°ï¼ˆé‡ç‚¹ï¼‰"></a>ç®­å¤´å‡½æ•°ï¼ˆé‡ç‚¹ï¼‰</h3><blockquote>
<p>ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«</p>
</blockquote>
<p>1ã€thisæŒ‡å‘</p>
<ul>
<li><p>æ™®é€šå‡½æ•°çš„thisæ˜¯ï¼Œè°è°ƒç”¨å‡½æ•°ï¼ŒthisæŒ‡å‘è°</p>
</li>
<li><p>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œä½“å†…çš„ this å¯¹è±¡ï¼Œå°±æ˜¯å‡½æ•°å®šä¹‰æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸä¸­çš„hisï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶æ‰€åœ¨çš„å¯¹è±¡ã€‚</p>
</li>
</ul>
<p>2ã€ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹å¯¹è±¡ï¼Œä¸å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½ä½¿ç”¨newå‘½ä»¤ã€‚</p>
<h3 id="varã€constå’Œletçš„åŒºåˆ«"><a href="#varã€constå’Œletçš„åŒºåˆ«" class="headerlink" title="varã€constå’Œletçš„åŒºåˆ«"></a>varã€constå’Œletçš„åŒºåˆ«</h3><p>ä»–ä»¬çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨ï¼š</p>
<p><strong>å˜é‡æå‡</strong>æ–¹é¢ï¼švarå­˜åœ¨å˜é‡æå‡ã€ä½†letå’Œconstä¸å­˜åœ¨å˜é‡æå‡ã€‚</p>
<p><strong>å—çº§ä½œç”¨åŸŸ</strong>æ–¹é¢ï¼šletå’Œconstå…·æœ‰å—çº§ä½œç”¨åŸŸï¼Œè€Œvaræ²¡æœ‰ã€‚</p>
<p>é‡å¤å£°æ˜æ–¹é¢ï¼švaråœ¨å£°æ˜å˜é‡æ—¶æ˜¯å¯ä»¥é‡å¤å£°æ˜çš„ï¼Œè€Œletå’Œconstä¸å¯ä»¥ã€‚</p>
<p><strong>æš‚æ—¶æ€§æ­»åŒº</strong>ï¼šletå’Œconstå­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œå¦‚æœä¸å£°æ˜æ˜¯æ— æ³•ä½¿ç”¨çš„ã€‚è€Œvarå¯ä»¥å…ˆä½¿ç”¨ï¼Œåå£°æ˜ã€‚</p>
<p><strong>åˆå§‹å€¼</strong>ï¼švarå’Œletåœ¨å®šä¹‰æ—¶å¯ä»¥ä¸è®¾ç½®åˆå§‹å€¼ï¼Œä½†constå¿…é¡»è®¾ç½®åˆå§‹å€¼ã€‚è€Œä¸”å¦‚æœåˆå§‹å€¼æ˜¯åŸå§‹æ•°æ®ç±»å‹çš„è¯ï¼Œåˆå§‹å€¼ä¸å¯ä¿®æ”¹ï¼Œä½†å¼•ç”¨æ•°æ®ç±»å‹çš„å±æ€§å¯ä»¥ä¿®æ”¹ã€‚</p>
<h3 id="Promiseï¼ˆé‡ç‚¹ï¼‰"><a href="#Promiseï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="Promiseï¼ˆé‡ç‚¹ï¼‰"></a>Promiseï¼ˆé‡ç‚¹ï¼‰</h3><h4 id="ä»€ä¹ˆæ˜¯promiseï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯promiseï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯promiseï¼Ÿ"></a>ä»€ä¹ˆæ˜¯promiseï¼Ÿ</h4><p>promiseæ˜¯ES6æä¾›çš„ç”¨äºè§£å†³å¼‚æ­¥é—®é¢˜çš„ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚å®ƒå°†å›è°ƒå‡½æ•°çš„åµŒå¥—ï¼Œæ”¹æˆé“¾å¼è°ƒç”¨ï¼Œä»¥æ­¤ç”¨æ¥è§£å†³ä¼ ç»Ÿç¼–ç¨‹ä¸­å› ä¸ºåµŒå¥—å±‚æ•°è¿‡å¤šè€Œäº§ç”Ÿçš„å¼‚æ­¥å›è°ƒåœ°ç‹±é—®é¢˜ã€‚</p>
<h4 id="Promiseè§„èŒƒ"><a href="#Promiseè§„èŒƒ" class="headerlink" title="Promiseè§„èŒƒ"></a>Promiseè§„èŒƒ</h4><ol>
<li><p>promiseæœ‰ä¸‰ç§çŠ¶æ€ï¼š<code>pending</code>ï¼ˆåˆå§‹çŠ¶æ€ï¼Œæ—¢æ²¡æœ‰è¢«å…‘ç°ï¼Œä¹Ÿæ²¡æœ‰è¢«æ‹’ç»ï¼‰ã€<code>fulfilled</code>ï¼ˆå·²å…‘ç°ï¼‰ã€<code>rejected</code>ï¼ˆå·²æ‹’ç»ï¼‰</p>
<ol>
<li>å¦‚æœä¸€ä¸ª promise å·²ç»è¢«å…‘ç°æˆ–è¢«æ‹’ç»ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥è¯´å®ƒå¤„äº <em>å·²æ•²å®šï¼ˆsettledï¼‰</em> çŠ¶æ€ã€‚</li>
</ol>
</li>
<li><p>promiseçš„çŠ¶æ€ï¼Œåªèƒ½ä»åˆå§‹çŠ¶æ€åˆ°å…‘ç°æˆ–æ‹’ç»ï¼Œä¸èƒ½é€†å‘ã€‚ç„¶åå…‘ç°å’Œæ‹’ç»çŠ¶æ€ä¹Ÿä¸èƒ½ç›¸äº’è½¬æ¢ã€‚</p>
</li>
<li><p><code>then</code>ä½œä¸ºpromiseçš„æ ¸å¿ƒæ–¹æ³•ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªpromiseã€‚è€Œä¸”åŒä¸€ä¸ªpromiseå¯ä»¥è°ƒç”¨å¤šæ¬¡ã€‚</p>
</li>
<li><p><code>then</code>æ–¹æ³•ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æˆåŠŸçš„å›è°ƒï¼Œä¸€ä¸ªæ˜¯å¤±è´¥çš„å›è°ƒã€‚</p>
</li>
</ol>
<p>ç”¨ <code>Promise.prototype.then()</code>ã€<code>Promise.prototype.catch()</code> å’Œ <code>Promise.prototype.finally()</code> è¿™äº›æ–¹æ³•å°†è¿›ä¸€æ­¥çš„æ“ä½œä¸ä¸€ä¸ªå˜ä¸ºå·²æ•²å®šçŠ¶æ€çš„ promise å…³è”èµ·æ¥ã€‚</p>
<h4 id="æ‰‹å†™Promiseï¼ˆæœ€ç®€å®ç°ï¼‰"><a href="#æ‰‹å†™Promiseï¼ˆæœ€ç®€å®ç°ï¼‰" class="headerlink" title="æ‰‹å†™Promiseï¼ˆæœ€ç®€å®ç°ï¼‰"></a>æ‰‹å†™Promiseï¼ˆæœ€ç®€å®ç°ï¼‰</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">Promise</span>ï¼ˆ<span class="token keyword">function</span> <span class="token punctuation">(</span> <span class="token parameter">resolve<span class="token punctuation">,</span>reject</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//å¤„ç†è¯­å¥</span>
        æˆåŠŸæ“ä½œï¼šresolveï¼ˆ<span class="token punctuation">[</span>å‚æ•°<span class="token punctuation">]</span>ï¼‰ï¼›
        å¤±è´¥æ“ä½œï¼šrejectï¼ˆ<span class="token punctuation">[</span>å‚æ•°<span class="token punctuation">]</span>ï¼‰ï¼›
    <span class="token punctuation">}</span>ï¼‰<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>å‚æ•°<span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        å½“å¤„ç†è¯­å¥è¿”å›resolveæ—¶ï¼Œè¦æ‰§è¡Œçš„è¯­å¥
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>å‚æ•°<span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        å½“promiseå¯¹è±¡ä¸­å¤„ç†è¯­å¥å¤±è´¥è¿”å›rejectæ—¶ï¼Œè¦æ‰§è¡Œçš„è¯­å¥
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>å‚æ•°<span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">do</span> something<span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="promiseå¦‚ä½•è§£å†³å¼‚æ­¥ï¼Ÿ"><a href="#promiseå¦‚ä½•è§£å†³å¼‚æ­¥ï¼Ÿ" class="headerlink" title="promiseå¦‚ä½•è§£å†³å¼‚æ­¥ï¼Ÿ"></a>promiseå¦‚ä½•è§£å†³å¼‚æ­¥ï¼Ÿ</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">Promise</span>ï¼ˆ<span class="token keyword">function</span> <span class="token punctuation">(</span> <span class="token parameter">resolve<span class="token punctuation">,</span>reject</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//å¤„ç†è¯­å¥</span>
        æˆåŠŸæ“ä½œï¼šresolveï¼ˆ<span class="token punctuation">[</span>å‚æ•°<span class="token punctuation">]</span>ï¼‰ï¼›
        å¤±è´¥æ“ä½œï¼šrejectï¼ˆ<span class="token punctuation">[</span>å‚æ•°<span class="token punctuation">]</span>ï¼‰ï¼›
    <span class="token punctuation">}</span>ï¼‰<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>å‚æ•°<span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        å½“å¤„ç†è¯­å¥è¿”å›resolveæ—¶ï¼Œè¦æ‰§è¡Œçš„è¯­å¥
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>å‚æ•°<span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        å½“promiseå¯¹è±¡ä¸­å¤„ç†è¯­å¥å¤±è´¥è¿”å›rejectæ—¶ï¼Œè¦æ‰§è¡Œçš„è¯­å¥
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

ä¾‹ï¼š
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">boo</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//boo å¸ƒå°”å€¼</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>boo<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"æˆåŠŸ"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"å¤±è´¥"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> oP <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ ¹æ®é‡Œé¢ä¼ çš„å‚æ•°çš„çœŸå‡æ¥æ‰§è¡Œ</span>
op<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      å¼‚æ­¥æ“ä½œï¼Œå¾—åˆ°ä¸€ä¸ªvalue
        <span class="token keyword">if</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"æˆåŠŸ"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"å¤±è´¥"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  resolvedæ—¶è¿›å…¥æ‰§è¡Œ
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  rejectedæ—¶è¿›å…¥æ‰§è¡Œ
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="promiseçš„å¼‚æ­¥æ¨¡å¼æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#promiseçš„å¼‚æ­¥æ¨¡å¼æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="promiseçš„å¼‚æ­¥æ¨¡å¼æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>promiseçš„å¼‚æ­¥æ¨¡å¼æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>â€‹    promiseçš„å¼‚æ­¥æ¨¡å¼æœ‰ï¼š<code>Promise.all</code>, <code>primise.race</code>, <code>Promise.alSettled</code>. <code>Promise.any</code>ã€‚</p>
<p><strong>Promise.all</strong></p>
<p>å¯ä»¥å°†å¤šä¸ªPromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ã€‚</p>
<p>åŒæ—¶ï¼ŒæˆåŠŸå’Œå¤±è´¥çš„è¿”å›å€¼æ˜¯ä¸åŒçš„ï¼ŒæˆåŠŸçš„æ—¶å€™è¿”å›çš„æ˜¯ä¸€ä¸ª<strong>ç»“æœæ•°ç»„</strong>ï¼Œè€Œå¤±è´¥çš„æ—¶å€™åˆ™è¿”å›<strong>æœ€å…ˆè¢«rejectå¤±è´¥çŠ¶æ€</strong>çš„å€¼ã€‚</p>
<p>Promse.allåœ¨<strong>å¤„ç†å¤šä¸ªå¼‚æ­¥å¤„ç†</strong>æ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚è¯´ä¸€ä¸ªé¡µé¢ä¸Šéœ€è¦ç­‰ä¸¤ä¸ªæˆ–å¤šä¸ªajaxçš„æ•°æ®å›æ¥ä»¥åæ‰æ­£å¸¸æ˜¾ç¤ºï¼Œåœ¨æ­¤ä¹‹å‰åªæ˜¾ç¤ºloadingå›¾æ ‡ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'p1 success'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'p2 success'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> p3 <span class="token operator">=</span> Promse<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'p3 failed'</span><span class="token punctuation">)</span>

Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>              
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span>p3<span class="token punctuation">,</span>p2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>     
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>**Promse.race **å°±æ˜¯èµ›è·‘çš„æ„æ€ï¼Œæ„æ€å°±æ˜¯è¯´ï¼Œ<code>Promise.race([p1, p2, p3])</code> é‡Œé¢å“ªä¸ªç»“æœè·å¾—çš„å¿«ï¼Œå°±è¿”å›é‚£ä¸ªç»“æœï¼Œä¸ç®¡ç»“æœæœ¬èº«æ˜¯æˆåŠŸçŠ¶æ€è¿˜æ˜¯å¤±è´¥çŠ¶æ€ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'failed'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="å¦‚æœå‘-Promise-all-å’Œ-Promise-race-ä¼ é€’ç©ºæ•°ç»„ï¼Œè¿è¡Œç»“æœä¼šæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"><a href="#å¦‚æœå‘-Promise-all-å’Œ-Promise-race-ä¼ é€’ç©ºæ•°ç»„ï¼Œè¿è¡Œç»“æœä¼šæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ" class="headerlink" title="å¦‚æœå‘ Promise.all() å’Œ Promise.race() ä¼ é€’ç©ºæ•°ç»„ï¼Œè¿è¡Œç»“æœä¼šæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"></a>å¦‚æœå‘ Promise.all() å’Œ Promise.race() ä¼ é€’ç©ºæ•°ç»„ï¼Œè¿è¡Œç»“æœä¼šæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h4><p><code>all</code> ä¼šé©¬ä¸Šresolveï¼Œè¿›å…¥ <code>fullfilled</code> çŠ¶æ€ï¼Œä¼ é€’çš„valueæ˜¯ <code>[]</code>ï¼›</p>
<p><code>race</code> çš„çŠ¶æ€æ˜¯ <code>pending</code>ï¼Œä¸ä¼šè¿›å…¥ <code>then</code>ã€‚</p>
<h4 id="è®¾è®¡å®ç°promise-race"><a href="#è®¾è®¡å®ç°promise-race" class="headerlink" title="è®¾è®¡å®ç°promise.race"></a>è®¾è®¡å®ç°promise.race</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Promise<span class="token punctuation">.</span><span class="token function-variable function">_race</span> <span class="token operator">=</span> <span class="token parameter">promises</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    promises<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">promise</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="Promise-ä¸­-reject-å’Œ-catch-å¤„ç†ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Promise-ä¸­-reject-å’Œ-catch-å¤„ç†ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Promise ä¸­ reject å’Œ catch å¤„ç†ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Promise ä¸­ reject å’Œ catch å¤„ç†ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>reject æ˜¯ç”¨æ¥æŠ›å‡ºå¼‚å¸¸çš„ï¼Œcatch æ˜¯ç”¨æ¥å¤„ç†å¼‚å¸¸ã€‚</p>
<p>reject æ˜¯ Promise çš„æ–¹æ³•ï¼Œè€Œ catch æ˜¯ Promise å®ä¾‹çš„æ–¹æ³•ã€‚</p>
<p>reject åçš„ä¸œè¥¿ï¼Œä¸€å®šä¼šè¿›å…¥ then ä¸­çš„ç¬¬äºŒä¸ªå›è°ƒï¼Œå¦‚æœ then ä¸­æ²¡æœ‰å†™ç¬¬äºŒä¸ªå›è°ƒï¼Œåˆ™è¿›å…¥ catch</p>
<p>ç½‘ç»œå¼‚å¸¸(æ¯”å¦‚æ–­ç½‘)ï¼Œä¼šç›´æ¥è¿›å…¥ catch è€Œä¸ä¼šè¿›å…¥ then çš„ç¬¬äºŒä¸ªå›è°ƒã€‚</p>
<h4 id="Promise-æ˜¯å¦‚ä½•æ•è·å¼‚å¸¸çš„ï¼Ÿä¸ä¼ ç»Ÿçš„-try-catch-ç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"><a href="#Promise-æ˜¯å¦‚ä½•æ•è·å¼‚å¸¸çš„ï¼Ÿä¸ä¼ ç»Ÿçš„-try-catch-ç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ" class="headerlink" title="Promise æ˜¯å¦‚ä½•æ•è·å¼‚å¸¸çš„ï¼Ÿä¸ä¼ ç»Ÿçš„ try/catch ç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"></a>Promise æ˜¯å¦‚ä½•æ•è·å¼‚å¸¸çš„ï¼Ÿä¸ä¼ ç»Ÿçš„ try/catch ç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ</h4><p>ä¼ ç»Ÿçš„ <code>try/catch</code> æ•è·å¼‚å¸¸æ–¹å¼æ˜¯æ— æ³•æ•è·å¼‚æ­¥çš„å¼‚å¸¸çš„ã€‚</p>
<p><strong>å¯¹äº promiseï¼š</strong></p>
<p>1.å•ç‹¬å¯¹ <code>then()</code>ä¸­æŒ‡å®šå¼‚å¸¸å¤„ç†å‡½æ•°ï¼ˆç”¨åœ¨å¸Œæœ›æ•è·å¼‚å¸¸ç„¶åä¸å½±å“æ¥ä¸‹æ¥ promise çš„æ‰§è¡Œï¼‰</p>
<p>2.ä½¿ç”¨ <code>catch</code> æ¥å®ç°å…¨éƒ¨æ•è·ï¼ˆç”¨åœ¨å½“ä¸€ä¸ª Promise å‘ç”Ÿå¼‚å¸¸ï¼Œå‰©ä¸‹çš„çš„ Promise éƒ½ä¸æ‰§è¡Œï¼‰</p>
<hr>
<h3 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h3><p><code>Generator</code> å‡½æ•°æ˜¯ ES6 æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€ï¼Œæ‰§è¡Œ <code>Generator</code> å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª <code>iterator</code> å¯¹è±¡ã€‚</p>
<p>æ¯æ¬¡è°ƒç”¨éå†å™¨å¯¹è±¡çš„ <code>next</code> æ–¹æ³•ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªæœ‰ç€ <strong>value</strong> å’Œ <strong>done</strong> ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ã€‚</p>
<p><strong>value</strong> å±æ€§è¡¨ç¤ºå½“å‰çš„å†…éƒ¨çŠ¶æ€çš„å€¼ï¼Œæ˜¯yieldè¡¨è¾¾å¼åé¢é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼› <strong>done</strong> å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦éå†ç»“æŸã€‚</p>
<p>å½¢å¼ä¸Šï¼ŒGenerator å‡½æ•°æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªç‰¹å¾ï¼š</p>
<p>â€‹    ä¸€æ˜¯ï¼Œ<code>function</code>å…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ªæ˜Ÿå·ï¼›</p>
<p>â€‹    äºŒæ˜¯ï¼Œå‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨<code>yield</code>è¡¨è¾¾å¼ï¼Œå®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€ï¼ˆ<code>yield</code>åœ¨è‹±è¯­é‡Œçš„æ„æ€å°±æ˜¯â€œäº§å‡ºâ€ï¼‰ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// * çš„ä½ç½®æ²¡æœ‰è§„å®šï¼Œä½†ä¸€èˆ¬çš„å†™æ³•å¦‚ä¸‹æ‰€ç¤º</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">helloWorldGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token string">'world'</span><span class="token punctuation">;</span>	<span class="token comment">//	`yield`è¡¨è¾¾å¼åªèƒ½ç”¨åœ¨ Generator å‡½æ•°é‡Œé¢ä½¿ç”¨</span>
  <span class="token keyword">return</span> <span class="token string">'ending'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> hw <span class="token operator">=</span> <span class="token function">helloWorldGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//è°ƒç”¨åä¸ä¼šæ‰§è¡Œ</span>

<span class="token comment">//åªæœ‰ä½¿ç”¨.next()æ‰ä¼šèµ°ä¸€æ­¥,è¿”å›çš„ä¹Ÿä¸æ˜¯å‡½æ•°è¿è¡Œç»“æœï¼Œè€Œæ˜¯ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„æŒ‡é’ˆå¯¹è±¡</span>
hw<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">//	{ value: 'hello', done: false }</span>
hw<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">//	{ value: 'world', done: false }</span>
hw<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">//	{ value: 'ending', done: true }</span>
hw<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">//	{ value: undefined, done: true }</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>éå†å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•çš„è¿è¡Œé€»è¾‘å¦‚ä¸‹ã€‚</p>
<p>ï¼ˆ1ï¼‰é‡åˆ°<code>yield</code>è¡¨è¾¾å¼ï¼Œå°±æš‚åœæ‰§è¡Œåé¢çš„æ“ä½œï¼Œå¹¶å°†ç´§è·Ÿåœ¨<code>yield</code>åé¢çš„é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œä½œä¸ºè¿”å›çš„å¯¹è±¡çš„<code>value</code>å±æ€§å€¼ã€‚</p>
<p>ï¼ˆ2ï¼‰ä¸‹ä¸€æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•æ—¶ï¼Œå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ã€‚</p>
<p>ï¼ˆ3ï¼‰å¦‚æœæ²¡æœ‰å†é‡åˆ°æ–°çš„<code>yield</code>è¡¨è¾¾å¼ï¼Œå°±ä¸€ç›´è¿è¡Œåˆ°å‡½æ•°ç»“æŸï¼Œç›´åˆ°<code>return</code>è¯­å¥ä¸ºæ­¢ï¼Œå¹¶å°†<code>return</code>è¯­å¥åé¢çš„è¡¨è¾¾å¼çš„å€¼ï¼Œä½œä¸ºè¿”å›çš„å¯¹è±¡çš„<code>value</code>å±æ€§å€¼ã€‚</p>
<p>ï¼ˆ4ï¼‰å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰<code>return</code>è¯­å¥ï¼Œåˆ™è¿”å›çš„å¯¹è±¡çš„<code>value</code>å±æ€§å€¼ä¸º<code>undefined</code>ã€‚</p>
<div class="admonition warning"><p class="admonition-title">æ³¨æ„
</p><p><code>yield</code>è¡¨è¾¾å¼åé¢çš„è¡¨è¾¾å¼ï¼Œåªæœ‰å½“è°ƒç”¨<code>next</code>æ–¹æ³•ã€å†…éƒ¨æŒ‡é’ˆæŒ‡å‘è¯¥è¯­å¥æ—¶æ‰ä¼šæ‰§è¡Œï¼Œå› æ­¤ç­‰äºä¸º JavaScript æä¾›äº†æ‰‹åŠ¨çš„â€œæƒ°æ€§æ±‚å€¼â€ï¼ˆLazy Evaluationï¼‰çš„è¯­æ³•åŠŸèƒ½ã€‚</p>
</div>

<h4 id="ä¸-Iterator-æ¥å£çš„å…³ç³»"><a href="#ä¸-Iterator-æ¥å£çš„å…³ç³»" class="headerlink" title="ä¸ Iterator æ¥å£çš„å…³ç³»"></a>ä¸ Iterator æ¥å£çš„å…³ç³»</h4><p>ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„<code>Symbol.iterator</code>æ–¹æ³•ï¼Œç­‰äºè¯¥å¯¹è±¡çš„éå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œè°ƒç”¨è¯¥å‡½æ•°ä¼šè¿”å›è¯¥å¯¹è±¡çš„ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚ç”±äº Generator å‡½æ•°å°±æ˜¯éå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œå› æ­¤å¯ä»¥æŠŠ Generator èµ‹å€¼ç»™å¯¹è±¡çš„<code>Symbol.iterator</code>å±æ€§ï¼Œä»è€Œä½¿å¾—è¯¥å¯¹è±¡å…·æœ‰ Iterator æ¥å£ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> myIterable <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
myIterable<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token operator">...</span>myIterable<span class="token punctuation">]</span> <span class="token comment">// [1, 2, 3]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="netx-æ–¹æ³•çš„å‚æ•°"><a href="#netx-æ–¹æ³•çš„å‚æ•°" class="headerlink" title="netx æ–¹æ³•çš„å‚æ•°"></a>netx æ–¹æ³•çš„å‚æ•°</h4><p><code>yield</code>è¡¨è¾¾å¼æœ¬èº«æ²¡æœ‰è¿”å›å€¼ï¼Œæˆ–è€…è¯´æ€»æ˜¯è¿”å›<code>undefined</code>ã€‚<code>next</code>æ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å°±ä¼šè¢«å½“ä½œä¸Šä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼çš„è¿”å›å€¼ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">yield</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> z <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token punctuation">(</span>y <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> y <span class="token operator">+</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Object{value:6, done:false}</span>
a<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Object{value:NaN, done:false}</span>
a<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Object{value:NaN, done:true}</span>

<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// { value:6, done:false }</span>
b<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token comment">// { value:8, done:false }</span>
b<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token comment">// { value:42, done:true }</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>for...of</code>å¾ªç¯å¯ä»¥è‡ªåŠ¨éå† Generator å‡½æ•°è¿è¡Œæ—¶ç”Ÿæˆçš„<code>Iterator</code>å¯¹è±¡ï¼Œä¸”æ­¤æ—¶ä¸å†éœ€è¦è°ƒç”¨<code>next</code>æ–¹æ³•ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">4</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">5</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> v <span class="token keyword">of</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1 2 3 4 5</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h4><ul>
<li><p>Generator.prototype.throw()</p>
<ul>
<li>Generator å‡½æ•°è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œéƒ½æœ‰ä¸€ä¸ª<code>throw</code>æ–¹æ³•ï¼Œå¯ä»¥åœ¨å‡½æ•°ä½“å¤–æŠ›å‡ºé”™è¯¯ï¼Œç„¶ååœ¨ Generator å‡½æ•°ä½“å†…æ•è·ã€‚</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">g</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å†…éƒ¨æ•è·'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
i<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  i<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  i<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å¤–éƒ¨æ•è·'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// å†…éƒ¨æ•è· a</span>
<span class="token comment">// å¤–éƒ¨æ•è· b</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>Generator.prototype.return()</p>
<ul>
<li>è¿”å›ç»™å®šçš„å€¼ï¼Œå¹¶ä¸”ç»ˆç»“éå† Generator å‡½æ•°ã€‚</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">// { value: 1, done: false }</span>
g<span class="token punctuation">.</span><span class="token function">return</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token comment">// { value: "foo", done: true }</span>
g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">// { value: undefined, done: true }</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<p><strong>next()ã€throw()ã€return() çš„å…±åŒç‚¹ï¼š</strong><code>next()</code>ã€<code>throw()</code>ã€<code>return()</code>è¿™ä¸‰ä¸ªæ–¹æ³•æœ¬è´¨ä¸Šæ˜¯åŒä¸€ä»¶äº‹ï¼Œå¯ä»¥æ”¾åœ¨ä¸€èµ·ç†è§£ã€‚å®ƒä»¬çš„ä½œç”¨éƒ½æ˜¯è®© Generator å‡½æ•°æ¢å¤æ‰§è¡Œï¼Œå¹¶ä¸”ä½¿ç”¨ä¸åŒçš„è¯­å¥æ›¿æ¢<code>yield</code>è¡¨è¾¾å¼ã€‚</p>
<ul>
<li><code>next()</code>æ˜¯å°†<code>yield</code>è¡¨è¾¾å¼æ›¿æ¢æˆä¸€ä¸ªå€¼ã€‚</li>
<li><code>throw()</code>æ˜¯å°†<code>yield</code>è¡¨è¾¾å¼æ›¿æ¢æˆä¸€ä¸ª<code>throw</code>è¯­å¥ã€‚</li>
<li><code>return()</code>æ˜¯å°†<code>yield</code>è¡¨è¾¾å¼æ›¿æ¢æˆä¸€ä¸ª<code>return</code>è¯­å¥ã€‚</li>
</ul>
<p>yield* è¡¨è¾¾å¼åœ¨Generator å‡½æ•°å†…éƒ¨ï¼Œè°ƒç”¨å¦ä¸€ä¸ª Generator å‡½æ•°</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">'x'</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token string">'y'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç­‰åŒäº</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">'x'</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token string">'a'</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token string">'b'</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token string">'y'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç­‰åŒäº</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">'x'</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> v <span class="token keyword">of</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> v<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">yield</span> <span class="token string">'y'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> v <span class="token keyword">of</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// "x"</span>
<span class="token comment">// "a"</span>
<span class="token comment">// "b"</span>
<span class="token comment">// "y"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>yield*</code>å–å‡ºåµŒå¥—æ•°ç»„çš„æ‰€æœ‰æˆ</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">iterTree</span><span class="token punctuation">(</span><span class="token parameter">tree</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tree<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">iterTree</span><span class="token punctuation">(</span>tree<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> tree<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> tree <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token keyword">of</span> <span class="token function">iterTree</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// a</span>
<span class="token comment">// b</span>
<span class="token comment">// c</span>
<span class="token comment">// d</span>
<span class="token comment">// e</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="å«ä¹‰"><a href="#å«ä¹‰" class="headerlink" title="å«ä¹‰"></a>å«ä¹‰</h4><p>ï¼ˆ1ï¼‰Generator æ˜¯å®ç°çŠ¶æ€æœºçš„æœ€ä½³ç»“æ„ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> ticking <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">clock</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ticking<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Tick!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Tock!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ticking <span class="token operator">=</span> <span class="token operator">!</span>ticking<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ï¼ˆ2ï¼‰Generator å‡½æ•°æ˜¯ ES6 å¯¹åç¨‹çš„å®ç°ï¼Œä½†å±äºä¸å®Œå…¨å®ç°ã€‚Generator å‡½æ•°è¢«ç§°ä¸ºâ€œåŠåç¨‹â€ï¼ˆsemi-coroutineï¼‰ï¼Œæ„æ€æ˜¯åªæœ‰ Generator å‡½æ•°çš„è°ƒç”¨è€…ï¼Œæ‰èƒ½å°†ç¨‹åºçš„æ‰§è¡Œæƒè¿˜ç»™ Generator å‡½æ•°ã€‚å¦‚æœæ˜¯å®Œå…¨æ‰§è¡Œçš„åç¨‹ï¼Œä»»ä½•å‡½æ•°éƒ½å¯ä»¥è®©æš‚åœçš„åç¨‹ç»§ç»­æ‰§è¡Œã€‚å¦‚æœå°† Generator å‡½æ•°å½“ä½œåç¨‹ï¼Œå®Œå…¨å¯ä»¥å°†å¤šä¸ªéœ€è¦äº’ç›¸åä½œçš„ä»»åŠ¡å†™æˆ Generator å‡½æ•°ï¼Œå®ƒä»¬ä¹‹é—´ä½¿ç”¨<code>yield</code>è¡¨è¾¾å¼äº¤æ¢æ§åˆ¶æƒã€‚</p>
<p><strong>å¼‚æ­¥è§£å†³æ–¹æ¡ˆï¼š</strong>yieldè¡¨è¾¾å¼å¯ä»¥æš‚åœå‡½æ•°æ‰§è¡Œï¼Œnextæ–¹æ³•ç”¨äºæ¢å¤å‡½æ•°æ‰§è¡Œï¼Œè¿™ä½¿å¾—Generatorå‡½æ•°éå¸¸é€‚åˆå°†å¼‚æ­¥ä»»åŠ¡åŒæ­¥åŒ–ã€‚</p>
<h4 id="Generator-ä¸ä¸Šä¸‹æ–‡"><a href="#Generator-ä¸ä¸Šä¸‹æ–‡" class="headerlink" title="Generator ä¸ä¸Šä¸‹æ–‡"></a>Generator ä¸ä¸Šä¸‹æ–‡</h4><p>JavaScript ä»£ç è¿è¡Œæ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªå…¨å±€çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆcontextï¼Œåˆç§°è¿è¡Œç¯å¢ƒï¼‰ï¼ŒåŒ…å«äº†å½“å‰æ‰€æœ‰çš„å˜é‡å’Œå¯¹è±¡ã€‚ç„¶åï¼Œæ‰§è¡Œå‡½æ•°ï¼ˆæˆ–å—çº§ä»£ç ï¼‰çš„æ—¶å€™ï¼Œåˆä¼šåœ¨å½“å‰ä¸Šä¸‹æ–‡ç¯å¢ƒçš„ä¸Šå±‚ï¼Œäº§ç”Ÿä¸€ä¸ªå‡½æ•°è¿è¡Œçš„ä¸Šä¸‹æ–‡ï¼Œå˜æˆå½“å‰ï¼ˆactiveï¼‰çš„ä¸Šä¸‹æ–‡ï¼Œç”±æ­¤å½¢æˆä¸€ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒçš„å †æ ˆï¼ˆcontext stackï¼‰ã€‚</p>
<p>è¿™ä¸ªå †æ ˆæ˜¯â€œåè¿›å…ˆå‡ºâ€çš„æ•°æ®ç»“æ„ï¼Œæœ€åäº§ç”Ÿçš„ä¸Šä¸‹æ–‡ç¯å¢ƒé¦–å…ˆæ‰§è¡Œå®Œæˆï¼Œé€€å‡ºå †æ ˆï¼Œç„¶åå†æ‰§è¡Œå®Œæˆå®ƒä¸‹å±‚çš„ä¸Šä¸‹æ–‡ï¼Œç›´è‡³æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæˆï¼Œå †æ ˆæ¸…ç©ºã€‚</p>
<p>Generator å‡½æ•°ä¸æ˜¯è¿™æ ·ï¼Œå®ƒæ‰§è¡Œäº§ç”Ÿçš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œä¸€æ—¦é‡åˆ°<code>yield</code>å‘½ä»¤ï¼Œå°±ä¼šæš‚æ—¶é€€å‡ºå †æ ˆï¼Œä½†æ˜¯å¹¶ä¸æ¶ˆå¤±ï¼Œé‡Œé¢çš„æ‰€æœ‰å˜é‡å’Œå¯¹è±¡ä¼šå†»ç»“åœ¨å½“å‰çŠ¶æ€ã€‚ç­‰åˆ°å¯¹å®ƒæ‰§è¡Œ<code>next</code>å‘½ä»¤æ—¶ï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒåˆä¼šé‡æ–°åŠ å…¥è°ƒç”¨æ ˆï¼Œå†»ç»“çš„å˜é‡å’Œå¯¹è±¡æ¢å¤æ‰§è¡Œã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
  g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
  g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œ<code>g.next()</code>æ—¶ï¼ŒGenerator å‡½æ•°<code>gen</code>çš„ä¸Šä¸‹æ–‡ä¼šåŠ å…¥å †æ ˆï¼Œå³å¼€å§‹è¿è¡Œ<code>gen</code>å†…éƒ¨çš„ä»£ç ã€‚ç­‰é‡åˆ°<code>yield 1</code>æ—¶ï¼Œ<code>gen</code>ä¸Šä¸‹æ–‡é€€å‡ºå †æ ˆï¼Œå†…éƒ¨çŠ¶æ€å†»ç»“ã€‚ç¬¬äºŒæ¬¡æ‰§è¡Œ<code>g.next()</code>æ—¶ï¼Œ<code>gen</code>ä¸Šä¸‹æ–‡é‡æ–°åŠ å…¥å †æ ˆï¼Œå˜æˆå½“å‰çš„ä¸Šä¸‹æ–‡ï¼Œé‡æ–°æ¢å¤æ‰§è¡Œã€‚</p>
<h4 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h4><p>åç¨‹ï¼ˆcoroutineï¼‰æ˜¯ä¸€ç§ç¨‹åºè¿è¡Œçš„æ–¹å¼ï¼Œå¯ä»¥ç†è§£æˆâ€œåä½œçš„çº¿ç¨‹â€æˆ–â€œåä½œçš„å‡½æ•°â€ã€‚åç¨‹æ—¢å¯ä»¥ç”¨å•çº¿ç¨‹å®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨å¤šçº¿ç¨‹å®ç°ã€‚å‰è€…æ˜¯ä¸€ç§ç‰¹æ®Šçš„å­ä¾‹ç¨‹ï¼Œåè€…æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿ç¨‹ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰åç¨‹ä¸å­ä¾‹ç¨‹çš„å·®å¼‚</strong></p>
<p>ä¼ ç»Ÿçš„â€œå­ä¾‹ç¨‹â€ï¼ˆsubroutineï¼‰é‡‡ç”¨å †æ ˆå¼â€œåè¿›å…ˆå‡ºâ€çš„æ‰§è¡Œæ–¹å¼ï¼Œåªæœ‰å½“è°ƒç”¨çš„å­å‡½æ•°å®Œå…¨æ‰§è¡Œå®Œæ¯•ï¼Œæ‰ä¼šç»“æŸæ‰§è¡Œçˆ¶å‡½æ•°ã€‚åç¨‹ä¸å…¶ä¸åŒï¼Œå¤šä¸ªçº¿ç¨‹ï¼ˆå•çº¿ç¨‹æƒ…å†µä¸‹ï¼Œå³å¤šä¸ªå‡½æ•°ï¼‰å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰å¤„äºæ­£åœ¨è¿è¡Œçš„çŠ¶æ€ï¼Œå…¶ä»–çº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰éƒ½å¤„äºæš‚åœæ€ï¼ˆsuspendedï¼‰ï¼Œçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰ä¹‹é—´å¯ä»¥äº¤æ¢æ‰§è¡Œæƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰æ‰§è¡Œåˆ°ä¸€åŠï¼Œå¯ä»¥æš‚åœæ‰§è¡Œï¼Œå°†æ‰§è¡Œæƒäº¤ç»™å¦ä¸€ä¸ªçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰ï¼Œç­‰åˆ°ç¨åæ”¶å›æ‰§è¡Œæƒçš„æ—¶å€™ï¼Œå†æ¢å¤æ‰§è¡Œã€‚è¿™ç§å¯ä»¥å¹¶è¡Œæ‰§è¡Œã€äº¤æ¢æ‰§è¡Œæƒçš„çº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰ï¼Œå°±ç§°ä¸ºåç¨‹ã€‚</p>
<p>ä»å®ç°ä¸Šçœ‹ï¼Œåœ¨å†…å­˜ä¸­ï¼Œå­ä¾‹ç¨‹åªä½¿ç”¨ä¸€ä¸ªæ ˆï¼ˆstackï¼‰ï¼Œè€Œåç¨‹æ˜¯åŒæ—¶å­˜åœ¨å¤šä¸ªæ ˆï¼Œä½†åªæœ‰ä¸€ä¸ªæ ˆæ˜¯åœ¨è¿è¡ŒçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåç¨‹æ˜¯ä»¥å¤šå ç”¨å†…å­˜ä¸ºä»£ä»·ï¼Œå®ç°å¤šä»»åŠ¡çš„å¹¶è¡Œã€‚</p>
<p><strong>ï¼ˆ2ï¼‰åç¨‹ä¸æ™®é€šçº¿ç¨‹çš„å·®å¼‚</strong></p>
<p>ä¸éš¾çœ‹å‡ºï¼Œåç¨‹é€‚åˆç”¨äºå¤šä»»åŠ¡è¿è¡Œçš„ç¯å¢ƒã€‚åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šï¼Œå®ƒä¸æ™®é€šçš„çº¿ç¨‹å¾ˆç›¸ä¼¼ï¼Œéƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€å¯ä»¥åˆ†äº«å…¨å±€å˜é‡ã€‚å®ƒä»¬çš„ä¸åŒä¹‹å¤„åœ¨äºï¼ŒåŒä¸€æ—¶é—´å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œä½†æ˜¯è¿è¡Œçš„åç¨‹åªèƒ½æœ‰ä¸€ä¸ªï¼Œå…¶ä»–åç¨‹éƒ½å¤„äºæš‚åœçŠ¶æ€ã€‚æ­¤å¤–ï¼Œæ™®é€šçš„çº¿ç¨‹æ˜¯æŠ¢å…ˆå¼çš„ï¼Œåˆ°åº•å“ªä¸ªçº¿ç¨‹ä¼˜å…ˆå¾—åˆ°èµ„æºï¼Œå¿…é¡»ç”±è¿è¡Œç¯å¢ƒå†³å®šï¼Œä½†æ˜¯åç¨‹æ˜¯åˆä½œå¼çš„ï¼Œæ‰§è¡Œæƒç”±åç¨‹è‡ªå·±åˆ†é…ã€‚</p>
<p>ç”±äº JavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œåªèƒ½ä¿æŒä¸€ä¸ªè°ƒç”¨æ ˆã€‚å¼•å…¥åç¨‹ä»¥åï¼Œæ¯ä¸ªä»»åŠ¡å¯ä»¥ä¿æŒè‡ªå·±çš„è°ƒç”¨æ ˆã€‚è¿™æ ·åšçš„æœ€å¤§å¥½å¤„ï¼Œå°±æ˜¯æŠ›å‡ºé”™è¯¯çš„æ—¶å€™ï¼Œå¯ä»¥æ‰¾åˆ°åŸå§‹çš„è°ƒç”¨æ ˆã€‚ä¸è‡³äºåƒå¼‚æ­¥æ“ä½œçš„å›è°ƒå‡½æ•°é‚£æ ·ï¼Œä¸€æ—¦å‡ºé”™ï¼ŒåŸå§‹çš„è°ƒç”¨æ ˆæ—©å°±ç»“æŸã€‚</p>
<h4 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h4><ol>
<li>å¼‚æ­¥æ“ä½œçš„åŒæ­¥åŒ–è¡¨è¾¾</li>
<li>æ§åˆ¶æµç®¡ç†</li>
<li>éƒ¨ç½² Iterator æ¥å£</li>
<li>ä½œä¸ºæ•°æ®ç»“æ„</li>
</ol>
<p><strong>å‚è€ƒï¼š</strong><a target="_blank" rel="noopener" href="https://es6.ruanyifeng.com/#docs/generator">Generator å‡½æ•°çš„è¯­æ³• - ECMAScript 6å…¥é—¨ (ruanyifeng.com)</a></p>
<hr>
<h3 id="async-awaitï¼ˆé‡ç‚¹ï¼‰"><a href="#async-awaitï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="async/awaitï¼ˆé‡ç‚¹ï¼‰"></a>async/awaitï¼ˆé‡ç‚¹ï¼‰</h3><p><code>async</code> å‡½æ•°æ˜¯ <code>Generator</code> å‡½æ•°çš„ä¸€ä¸ªè¯­æ³•ç³–ï¼Œ<code>async</code>å‡½æ•°å°±æ˜¯å°† <code>Generator</code> å‡½æ•°çš„æ˜Ÿå·ï¼ˆ<code>*</code>ï¼‰æ›¿æ¢æˆ<code>async</code>ï¼Œå°†<code>yield</code>æ›¿æ¢æˆ<code>await</code>ç›¸å½“äºä¼šè‡ªåŠ¨æ‰§è¡Œ <code>Generator </code> å‡½æ•°ï¼Œä¸éœ€è¦ä¾èµ– <code>.next()</code> ã€‚</p>
<p><code>async</code>å‡½æ•°å¯¹ Generator å‡½æ•°çš„æ”¹è¿›ï¼Œä½“ç°åœ¨ä»¥ä¸‹å››ç‚¹ã€‚</p>
<ol>
<li>å†…ç½®æ‰§è¡Œå™¨ã€‚<code>Generator</code> å‡½æ•°çš„æ‰§è¡Œå¿…é¡»é æ‰§è¡Œå™¨ï¼Œæ‰€ä»¥æ‰æœ‰äº†<code>co</code>æ¨¡å—ï¼Œè€Œ<code>async</code>å‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>async</code>å‡½æ•°çš„æ‰§è¡Œï¼Œä¸æ™®é€šå‡½æ•°ä¸€æ¨¡ä¸€æ ·ï¼Œåªè¦ä¸€è¡Œã€‚</li>
<li>æ›´å¥½çš„è¯­ä¹‰ã€‚<code>async</code>å’Œ<code>await</code>ï¼Œæ¯”èµ·<code>*</code>å’Œ<code>yield</code>ï¼Œè¯­ä¹‰æ›´æ¸…æ¥šäº†ã€‚<code>async</code>è¡¨ç¤ºå‡½æ•°é‡Œæœ‰å¼‚æ­¥æ“ä½œï¼Œ<code>await</code>è¡¨ç¤ºç´§è·Ÿåœ¨åé¢çš„è¡¨è¾¾å¼éœ€è¦ç­‰å¾…ç»“æœã€‚</li>
<li>æ›´å¹¿çš„é€‚ç”¨æ€§ã€‚<code>co</code>æ¨¡å—çº¦å®šï¼Œ<code>yield</code>å‘½ä»¤åé¢åªèƒ½æ˜¯ Thunk å‡½æ•°æˆ– Promise å¯¹è±¡ï¼Œè€Œ<code>async</code>å‡½æ•°çš„<code>await</code>å‘½ä»¤åé¢ï¼Œå¯ä»¥æ˜¯ Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼Œä½†è¿™æ—¶ä¼šè‡ªåŠ¨è½¬æˆç«‹å³ resolved çš„ Promise å¯¹è±¡ï¼‰ã€‚</li>
<li>è¿”å›å€¼æ˜¯ Promiseã€‚<code>async</code>å‡½æ•°çš„è¿”å›å€¼æ˜¯ <code>Promise</code> å¯¹è±¡ï¼Œè¿™æ¯” <code>Generator</code> å‡½æ•°çš„è¿”å›å€¼æ˜¯ <code>Iterator</code> å¯¹è±¡æ–¹ä¾¿å¤šäº†ã€‚ä½ å¯ä»¥ç”¨<code>then</code>æ–¹æ³•æŒ‡å®šä¸‹ä¸€æ­¥çš„æ“ä½œã€‚è¿›ä¸€æ­¥è¯´ï¼Œ<code>async</code>å‡½æ•°å®Œå…¨å¯ä»¥çœ‹ä½œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼ŒåŒ…è£…æˆçš„ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œè€Œ<code>await</code>å‘½ä»¤å°±æ˜¯å†…éƒ¨<code>then</code>å‘½ä»¤çš„è¯­æ³•ç³–ã€‚</li>
</ol>
<p><code>async</code> ä½¿ç”¨ä¸Šæ›´ä¸ºç®€æ´ï¼Œå°†å¼‚æ­¥ä»£ç ä»¥åŒæ­¥çš„å½¢å¼è¿›è¡Œç¼–å†™ï¼Œæ˜¯å¤„ç†å¼‚æ­¥ç¼–ç¨‹çš„æœ€ç»ˆæ–¹æ¡ˆ</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// ä»Šæ—¥å¤´æ¡é¢è¯•é¢˜	asyncåœ¨jsæ‰§è¡Œæœºåˆ¶ä¸­çš„é¡ºåº</span>
<span class="token comment">//asyncæ–¹æ³•æ‰§è¡Œæ—¶ï¼Œé‡åˆ°awaitä¼šç«‹å³æ‰§è¡Œç´§è·Ÿçš„è¡¨è¾¾å¼ï¼Œç„¶åæŠŠè¡¨è¾¾å¼åé¢çš„ä»£ç æ”¾åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œã€‚</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 start'</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'settimeout'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span>


<span class="token comment">/*è¾“å‡ºé¡ºåº:
script start
async1 start
async2
promise1
script end
async1 end
promise2
settimeout
*/</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/* å­—èŠ‚é¢è¯•é¢˜ */</span>
<span class="token keyword">function</span> <span class="token function">getJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">testAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">getJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//äº‹ä»¶å¾ªç¯æœºåˆ¶  await ä¸‹é¢çš„ä»£ç ä¼šå»åˆ°ä¸‹ä¸€æ¬¡äº‹ä»¶å¾ªç¯æœºåˆ¶</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token function">testAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment">/**è¾“å‡º
2
3
*/</span>



<span class="token comment">/*
å½“æˆ‘ä»¬ç†è§£äº†async/await å°±æ˜¯**è¯­æ³•ç³–**ï¼Œå®ƒçš„æœ¬è´¨è¿˜æ˜¯Promiseï¼Œasyncç›¸å½“äºç›¸å½“äºPromise.then(),awaitç›¸å½“äº.then()æ‹¬å·é‡Œé¢çš„æ“ä½œã€‚æ‰€ä»¥ç¿»è¯‘æˆPromiseåå°±æ˜¯ä¸‹é¢è¿™æ®µä»£ç :
*/</span>
<span class="token comment">// async function testAsync() {</span>
  <span class="token comment">//   await getJson()  </span>
  <span class="token comment">//   console.log(3);</span>
  <span class="token comment">// }</span>
  <span class="token comment">//ç›¸å½“äºï¼š</span>
<span class="token keyword">function</span> <span class="token function">testAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">getJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><ol>
<li><code>async</code>å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚<code>async</code>å‡½æ•°å†…éƒ¨<code>return</code>è¯­å¥è¿”å›çš„å€¼ï¼Œä¼šæˆä¸º<code>then</code>æ–¹æ³•å›è°ƒå‡½æ•°çš„å‚æ•°ã€‚</li>
<li><code>async</code>å‡½æ•°å†…éƒ¨æŠ›å‡ºé”™è¯¯ï¼Œä¼šå¯¼è‡´è¿”å›çš„ Promise å¯¹è±¡å˜ä¸º<code>reject</code>çŠ¶æ€ã€‚æŠ›å‡ºçš„é”™è¯¯å¯¹è±¡ä¼šè¢«<code>catch</code>æ–¹æ³•å›è°ƒå‡½æ•°æ¥æ”¶åˆ°ã€‚</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'å‡ºé”™äº†'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
  <span class="token parameter">v</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'resolve'</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token parameter">e</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'reject'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token comment">//reject Error: å‡ºé”™äº†</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="3">
<li><code>async</code>å‡½æ•°è¿”å›çš„ <code>Promise</code> å¯¹è±¡ï¼Œå¿…é¡»ç­‰åˆ°å†…éƒ¨æ‰€æœ‰<code>await</code>å‘½ä»¤åé¢çš„ <code>Promise</code> å¯¹è±¡æ‰§è¡Œå®Œï¼Œæ‰ä¼šå‘ç”ŸçŠ¶æ€æ”¹å˜ï¼Œé™¤éé‡åˆ°<code>return</code>è¯­å¥æˆ–è€…æŠ›å‡ºé”™è¯¯ã€‚ä»»ä½•ä¸€ä¸ª<code>await</code>è¯­å¥åé¢çš„ <code>Promise</code> å¯¹è±¡å˜ä¸º<code>reject</code>çŠ¶æ€ï¼Œé‚£ä¹ˆæ•´ä¸ª<code>async</code>å‡½æ•°éƒ½ä¼šä¸­æ–­æ‰§è¡Œã€‚</li>
<li>æ­£å¸¸æƒ…å†µä¸‹ï¼Œ<code>await</code>å‘½ä»¤åé¢æ˜¯ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œè¿”å›è¯¥å¯¹è±¡çš„ç»“æœã€‚å¦‚æœä¸æ˜¯ <code>Promise</code> å¯¹è±¡ï¼Œå°±ç›´æ¥è¿”å›å¯¹åº”çš„å€¼ã€‚å¦ä¸€ç§æƒ…å†µæ˜¯ï¼Œ<code>await</code>å‘½ä»¤åé¢æ˜¯ä¸€ä¸ª<code>thenable</code>å¯¹è±¡ï¼ˆå³å®šä¹‰äº†<code>then</code>æ–¹æ³•çš„å¯¹è±¡ï¼‰ï¼Œé‚£ä¹ˆ<code>await</code>ä¼šå°†å…¶ç­‰åŒäº Promise å¯¹è±¡ã€‚</li>
</ol>
<h4 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h4><p>å¦‚æœ<code>await</code>åé¢çš„å¼‚æ­¥æ“ä½œå‡ºé”™ï¼Œé‚£ä¹ˆç­‰åŒäº<code>async</code>å‡½æ•°è¿”å›çš„ Promise å¯¹è±¡è¢«<code>reject</code>ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'å‡ºé”™äº†'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// Errorï¼šå‡ºé”™äº†</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é˜²æ­¢å‡ºé”™çš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯å°†å…¶æ”¾åœ¨<code>try...catch</code>ä»£ç å—ä¹‹ä¸­ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'å‡ºé”™äº†'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">await</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div class="admonition warning"><p class="admonition-title">æ³¨æ„
</p><p>ï¼ˆ1ï¼‰<code>await</code>å‘½ä»¤åé¢çš„<code>Promise</code>å¯¹è±¡ï¼Œè¿è¡Œç»“æœå¯èƒ½æ˜¯<code>rejected</code>ï¼Œæ‰€ä»¥æœ€å¥½æŠŠ<code>await</code>å‘½ä»¤æ”¾åœ¨<code>try...catch</code>ä»£ç å—ä¸­ã€‚</p>
</div>

<pre><code>ï¼ˆ2ï¼‰å¤šä¸ª`await`å‘½ä»¤åé¢çš„å¼‚æ­¥æ“ä½œï¼Œå¦‚æœä¸å­˜åœ¨ç»§å‘å…³ç³»ï¼Œæœ€å¥½è®©å®ƒä»¬åŒæ—¶è§¦å‘ã€‚
ï¼ˆ3ï¼‰`await`å‘½ä»¤åªèƒ½ç”¨åœ¨`async`å‡½æ•°ä¹‹ä¸­ï¼Œå¦‚æœç”¨åœ¨æ™®é€šå‡½æ•°ï¼Œå°±ä¼šæŠ¥é”™ã€‚
ï¼ˆ4ï¼‰async å‡½æ•°å¯ä»¥ä¿ç•™è¿è¡Œå †æ ˆã€‚
</code></pre>
<h4 id="async-å‡½æ•°çš„å®ç°åŸç†"><a href="#async-å‡½æ•°çš„å®ç°åŸç†" class="headerlink" title="async å‡½æ•°çš„å®ç°åŸç†"></a>async å‡½æ•°çš„å®ç°åŸç†</h4><p>async å‡½æ•°çš„å®ç°åŸç†ï¼Œå°±æ˜¯å°† Generator å‡½æ•°å’Œè‡ªåŠ¨æ‰§è¡Œå™¨ï¼ŒåŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç­‰åŒäº</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// spawnå‡½æ•°å°±æ˜¯è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚</span>
  <span class="token keyword">return</span> <span class="token function">spawn</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">spawn</span><span class="token punctuation">(</span><span class="token parameter">genF</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> gen <span class="token operator">=</span> <span class="token function">genF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token parameter">nextF</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> next<span class="token punctuation">;</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        next <span class="token operator">=</span> <span class="token function">nextF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">resolve</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">step</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">step</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> gen<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">step</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="é¡¶å±‚-await"><a href="#é¡¶å±‚-await" class="headerlink" title="é¡¶å±‚ await"></a>é¡¶å±‚ await</h4><p>ä» <a target="_blank" rel="noopener" href="https://github.com/tc39/proposal-top-level-await">ES2022</a> å¼€å§‹ï¼Œå…è®¸åœ¨æ¨¡å—çš„é¡¶å±‚ç‹¬ç«‹ä½¿ç”¨<code>await</code>å‘½ä»¤ï¼Œä½¿å¾—ä¸‹é¢é‚£è¡Œä»£ç ä¸ä¼šæŠ¥é”™äº†ã€‚å®ƒçš„ä¸»è¦ç›®çš„æ˜¯ä½¿ç”¨<code>await</code>è§£å†³æ¨¡å—å¼‚æ­¥åŠ è½½çš„é—®é¢˜ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://api.example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>æ³¨æ„ï¼Œé¡¶å±‚<code>await</code>åªèƒ½ç”¨åœ¨ ES6 æ¨¡å—ï¼Œä¸èƒ½ç”¨åœ¨ CommonJS æ¨¡å—ã€‚è¿™æ˜¯å› ä¸º CommonJS æ¨¡å—çš„<code>require()</code>æ˜¯åŒæ­¥åŠ è½½ï¼Œå¦‚æœæœ‰é¡¶å±‚<code>await</code>ï¼Œå°±æ²¡æ³•å¤„ç†åŠ è½½äº†ã€‚</p>
<p>ä¸‹é¢æ˜¯é¡¶å±‚<code>await</code>çš„ä¸€äº›ä½¿ç”¨åœºæ™¯ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// import() æ–¹æ³•åŠ è½½</span>
<span class="token keyword">const</span> strings <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/i18n/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>navigator<span class="token punctuation">.</span>language<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ•°æ®åº“æ“ä½œ</span>
<span class="token keyword">const</span> connection <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">dbConnector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ä¾èµ–å›æ»š</span>
<span class="token keyword">let</span> jQuery<span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  jQuery <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'https://cdn-a.com/jQuery'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
  jQuery <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'https://cdn-b.com/jQuery'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="å¼‚æ­¥ç¼–ç¨‹çš„å‘å±•å†å²ï¼š"><a href="#å¼‚æ­¥ç¼–ç¨‹çš„å‘å±•å†å²ï¼š" class="headerlink" title="å¼‚æ­¥ç¼–ç¨‹çš„å‘å±•å†å²ï¼š"></a>å¼‚æ­¥ç¼–ç¨‹çš„å‘å±•å†å²ï¼š</h4><p>é¦–å…ˆæˆ‘ä»¬çŸ¥é“ï¼Œ<code>async/await</code> æ˜¯ <code>ES7</code> ä¸­çš„å¼‚æ­¥è¯­æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä»<strong>å¼‚æ­¥ç¼–ç¨‹çš„å‘å±•å²</strong>å¼€å§‹å’Œé¢è¯•å®˜èŠã€‚ å› ä¸º <code>JavaScript</code> æ˜¯<strong>å•çº¿ç¨‹æ‰§è¡Œæœºåˆ¶</strong>ï¼Œæ‰€ä»¥ä¸ºäº†æé«˜æ•ˆç‡æˆ‘ä»¬ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹ã€‚</p>
<ol>
<li><p>å›è°ƒå‡½æ•°: ç¼ºç‚¹æ˜¯ä¸åˆ©äºä»£ç çš„é˜…è¯»ç»´æŠ¤ï¼Œå„éƒ¨åˆ†ä¹‹é—´é«˜åº¦è€¦åˆï¼Œæµç¨‹ä¼šå¾ˆä¹±ã€‚æ¯ä¸ªä»»åŠ¡åªèƒ½æŒ‡å®šä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚ä¸èƒ½æ•è·å¼‚å¸¸ ï¼ˆ<code>try catch</code> åŒæ­¥æ‰§è¡Œï¼Œå›è°ƒå‡½æ•°ä¼šåŠ å…¥é˜Ÿåˆ—ï¼Œæ— æ³•æ•è·é”™è¯¯ï¼‰</p>
</li>
<li><p>Promise: <code>Promise</code> ä¸ä»…å¯ä»¥é¿å…å›è°ƒåœ°ç‹±ï¼Œè¿˜å¯ä»¥ç»Ÿä¸€æ•è·å¤±è´¥çš„åŸå› ï¼Œç›®å‰ä¹Ÿåº”ç”¨å¹¿æ³›ã€‚</p>
</li>
<li><p>Generator: ç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œéœ€è¦åŠ * ï¼Œå¯ä»¥ç”¨æ¥ç”Ÿæˆè¿­ä»£å™¨ã€‚ç”Ÿæˆå™¨å‡½æ•°å’Œæ™®é€šå‡½æ•°ä¸ä¸€æ ·ï¼Œæ™®é€šå‡½æ•°æ˜¯ä¸€æ—¦è°ƒç”¨ä¸€å®šä¼šæ‰§è¡Œå®Œï¼Œä½†æ˜¯ç”Ÿæˆå™¨å‡½æ•°ä¸­é—´å¯ä»¥æš‚åœã€‚ç”Ÿæˆå™¨å’Œæ™®é€šå‡½æ•°ä¸ä¸€æ ·ï¼Œè°ƒç”¨å®ƒå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œã€‚å®ƒä¼šè¿”å›æ­¤ç”Ÿæˆå™¨çš„è¿­ä»£å™¨,è¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ¯è°ƒç”¨ä¸€æ¬¡ <code>next</code> å°±å¯ä»¥è¿”å›ä¸€ä¸ªå€¼å¯¹è±¡ã€‚</p>
</li>
<li><p>co: éšç€å‰ç«¯çš„è¿…é€Ÿå‘å±•ï¼Œå¤§ç¥ä»¬è§‰å¾—è¦åƒåŒæ­¥ä»£ç ä¸€æ ·å†™å¼‚æ­¥ï¼Œ<code>co</code> é—®ä¸–äº†ï¼Œ<code>co</code> æ˜¯ TJ å¤§ç¥ç»“åˆäº† <code>Promise</code> å’Œ <code>Generator</code> çš„ä¸€ä¸ªåº“ï¼Œå®é™…ä¸Šè¿˜æ˜¯å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨æ‰§è¡Œè¿­ä»£å™¨ã€‚</p>
</li>
<li><p>async/await: <code>async/await</code> æ˜¯è¯­æ³•ç³–ï¼Œå†…éƒ¨æ˜¯ <code>Generator+Promise</code> å®ç°ã€‚ <code>async</code> å‡½æ•°å°±æ˜¯å°† <code>Generator</code> å‡½æ•°çš„æ˜Ÿå·ï¼ˆ<code>*</code>ï¼‰æ›¿æ¢æˆ <code>async</code>ï¼Œå°† <code>yield</code> æ›¿æ¢æˆ <code>await</code>ã€‚</p>
</li>
</ol>
<h4 id="ï¼ˆå›é¡¾ï¼‰äº‹ä»¶æ‰§è¡Œæœºåˆ¶ï¼š-EventLoop"><a href="#ï¼ˆå›é¡¾ï¼‰äº‹ä»¶æ‰§è¡Œæœºåˆ¶ï¼š-EventLoop" class="headerlink" title="ï¼ˆå›é¡¾ï¼‰äº‹ä»¶æ‰§è¡Œæœºåˆ¶ï¼š EventLoop"></a>ï¼ˆå›é¡¾ï¼‰äº‹ä»¶æ‰§è¡Œæœºåˆ¶ï¼š EventLoop</h4><ol>
<li>é¦–å…ˆä¼šæ‰§è¡ŒåŒæ­¥æ“ä½œ</li>
<li>æ‰§è¡Œå®ŒåæŸ¥çœ‹æ‰§è¡Œæ ˆæ˜¯å¦ä¸ºç©º</li>
<li>å¦‚æœä¸ºç©ºï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰å¾®ä»»åŠ¡éœ€è¦æ‰§è¡Œï¼Œå¦‚æœæœ‰æ”¾å…¥æ‰§è¡Œæ ˆ</li>
<li>åœ¨æŸ¥çœ‹æ˜¯å¦æœ‰å®ä»»åŠ¡éœ€è¦æ‰§è¡Œï¼Œå¦‚æœæœ‰æ”¾å…¥æ‰§è¡Œæ ˆã€‚</li>
</ol>
<p>å®ä»»åŠ¡æœ‰å“ªäº›ï¼š</p>
<ol>
<li>script(æ•´ä½“ä»£ç )</li>
<li>setTimeout</li>
<li>setInterval</li>
<li>I/O</li>
<li>UIäº¤äº’äº‹ä»¶</li>
<li>postMessage</li>
<li>MessageChannel</li>
<li>setImmediate(Node.js ç¯å¢ƒ)</li>
</ol>
<p> å¾®ä»»åŠ¡æœ‰å“ªäº›ï¼š</p>
<ol>
<li>Promise.then</li>
<li>Object.observe</li>
<li>MutaionObserver</li>
<li>process.nextTick(Node.js ç¯å¢ƒ)</li>
</ol>
<h4 id="References-1"><a href="#References-1" class="headerlink" title="References"></a>References</h4><p>ğŸ‘‰<a target="_blank" rel="noopener" href="https://juejin.cn/post/6952432857977618469">ã€å­—èŠ‚é¢è¯•é¢˜ã€‘æœ‰å…³async/awaitçš„ç†è§£ - æ˜é‡‘ (juejin.cn)</a></p>
<p>ğŸ‘‰<a target="_blank" rel="noopener" href="https://juejin.cn/post/6973637298755731463">async/awaitåŸç†å‰–æ - æ˜é‡‘ (juejin.cn)</a></p>
<h4 id="setTimeoutã€Promiseã€Async-Await-çš„åŒºåˆ«"><a href="#setTimeoutã€Promiseã€Async-Await-çš„åŒºåˆ«" class="headerlink" title="setTimeoutã€Promiseã€Async/Await çš„åŒºåˆ«"></a>setTimeoutã€Promiseã€Async/Await çš„åŒºåˆ«</h4><ol>
<li><p>setTimeout</p>
<p><code>setTimeout</code> çš„å›è°ƒå‡½æ•°æ”¾åˆ°å®ä»»åŠ¡é˜Ÿåˆ—é‡Œï¼Œç­‰åˆ°æ‰§è¡Œæ ˆæ¸…ç©ºä»¥åæ‰§è¡Œã€‚</p>
</li>
<li><p>Promise</p>
<p><code>Promise</code> æœ¬èº«æ˜¯<strong>åŒæ­¥çš„ç«‹å³æ‰§è¡Œå‡½æ•°</strong>ï¼Œ å½“åœ¨ <code>executor</code> ä¸­æ‰§è¡Œ <code>resolve</code> æˆ–è€… <code>reject</code> çš„æ—¶å€™, æ­¤æ—¶æ˜¯å¼‚æ­¥æ“ä½œï¼Œ ä¼šå…ˆæ‰§è¡Œ <code>then/catch</code> ç­‰ï¼Œå½“ä¸»æ ˆå®Œæˆåï¼Œæ‰ä¼šå»è°ƒç”¨ <code>resolve/reject</code> ä¸­å­˜æ”¾çš„æ–¹æ³•æ‰§è¡Œã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> promise1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1 end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span>
<span class="token comment">// è¾“å‡ºé¡ºåº: script start-&gt;promise1-&gt;promise1 end-&gt;script end-&gt;promise2-&gt;setTimeout</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>async/await</p>
<p><code>async</code> å‡½æ•°è¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œå½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ° <code>await</code> å°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°è§¦å‘çš„å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥ã€‚å¯ä»¥ç†è§£ä¸ºï¼Œæ˜¯è®©å‡ºäº†çº¿ç¨‹ï¼Œè·³å‡ºäº† <code>async</code> å‡½æ•°ä½“ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span>

<span class="token comment">// è¾“å‡ºé¡ºåºï¼šscript start-&gt;async1 start-&gt;async2-&gt;script end-&gt;async1 end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¼ é€é—¨ â˜ <a target="_blank" rel="noopener" href="https://juejin.cn/post/6999651011304357925"># JavaScript Promise ä¸“é¢˜</a></p>
</li>
</ol>
<h4 id="async-await-å¦‚ä½•é€šè¿‡åŒæ­¥çš„æ–¹å¼å®ç°å¼‚æ­¥"><a href="#async-await-å¦‚ä½•é€šè¿‡åŒæ­¥çš„æ–¹å¼å®ç°å¼‚æ­¥" class="headerlink" title="async/await å¦‚ä½•é€šè¿‡åŒæ­¥çš„æ–¹å¼å®ç°å¼‚æ­¥"></a>async/await å¦‚ä½•é€šè¿‡åŒæ­¥çš„æ–¹å¼å®ç°å¼‚æ­¥</h4><p><code>async/await</code> å°±æ˜¯ä¸€ä¸ª<strong>è‡ªæ‰§è¡Œ</strong>çš„ <code>Generator</code> å‡½æ•°ã€‚åˆ©ç”¨ <code>Generator</code> å‡½æ•°çš„ç‰¹æ€§æŠŠå¼‚æ­¥çš„ä»£ç å†™æˆâ€œåŒæ­¥â€çš„å½¢å¼ï¼Œç¬¬ä¸€ä¸ªè¯·æ±‚çš„è¿”å›å€¼ä½œä¸ºåé¢ä¸€ä¸ªè¯·æ±‚çš„å‚æ•°,å…¶ä¸­æ¯ä¸€ä¸ªå‚æ•°éƒ½æ˜¯ä¸€ä¸ª <code>promise</code> å¯¹è±¡ã€‚</p>
<hr>
<h3 id="Set-Mapï¼ˆé‡ç‚¹ï¼‰"><a href="#Set-Mapï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="Set/Mapï¼ˆé‡ç‚¹ï¼‰"></a>Set/Mapï¼ˆé‡ç‚¹ï¼‰</h3><h4 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h4><p>ES6 æä¾›çš„ä¸€ä¸ªæ–°çš„æ•°æ®ç»“æ„ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç±»ä¼¼äºæ•°ç»„ï¼Œå…è®¸ä½ å­˜ä»»ä½•ç±»å‹çš„å€¼ï¼Œä½†æˆå‘˜å€¼éƒ½æ˜¯å”¯ä¸€çš„ã€‚</p>
<h5 id="å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•"><a href="#å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•" class="headerlink" title="å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•"></a>å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•</h5><p>Set ç»“æ„çš„å®ä¾‹æœ‰ä»¥ä¸‹å±æ€§ã€‚</p>
<ul>
<li><code>Set.prototype.constructor</code>ï¼šæ„é€ å‡½æ•°ï¼Œé»˜è®¤å°±æ˜¯<code>Set</code>å‡½æ•°ã€‚</li>
<li><code>Set.prototype.size</code>ï¼šè¿”å›<code>Set</code>å®ä¾‹çš„æˆå‘˜æ€»æ•°ã€‚</li>
</ul>
<p>æ“ä½œæ–¹æ³•ï¼ˆç”¨äºæ“ä½œæ•°æ®ï¼‰</p>
<ul>
<li><code>Set.prototype.add(value)</code>ï¼šæ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å› Set ç»“æ„æœ¬èº«ã€‚</li>
<li><code>Set.prototype.delete(value)</code>ï¼šåˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåˆ é™¤æ˜¯å¦æˆåŠŸã€‚</li>
<li><code>Set.prototype.has(value)</code>ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å€¼æ˜¯å¦ä¸º<code>Set</code>çš„æˆå‘˜ã€‚</li>
<li><code>Set.prototype.clear()</code>ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</li>
</ul>
<p>éå†æ–¹æ³•ï¼ˆç”¨äºéå†æˆå‘˜ï¼‰</p>
<ul>
<li><code>Set.prototype.keys()</code>ï¼šè¿”å›é”®åçš„éå†å™¨ï¼›ï¼ˆ<code>Set</code> æ²¡æœ‰é”®åï¼Œæˆ–è€…è¯´é”®åå’Œé”®å€¼ç›¸åŒï¼Œå› æ­¤ <code>Set</code> çš„ <code>keys()</code> å’Œ <code>values()</code> çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ã€‚ï¼‰</li>
<li><code>Set.prototype.values()</code>ï¼šè¿”å›é”®å€¼çš„éå†å™¨</li>
<li><code>Set.prototype.entries()</code>ï¼šè¿”å›é”®å€¼å¯¹çš„éå†å™¨</li>
<li><code>Set.prototype.forEach()</code>ï¼šä½¿ç”¨å›è°ƒå‡½æ•°éå†æ¯ä¸ªæˆå‘˜</li>
</ul>
<p>Set ç»“æ„çš„å®ä¾‹é»˜è®¤å¯éå†ï¼Œå®ƒçš„é»˜è®¤éå†å™¨ç”Ÿæˆå‡½æ•°å°±æ˜¯å®ƒçš„<code>values</code>æ–¹æ³•ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token class-name">Set</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token class-name">Set</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>values
<span class="token comment">// true</span>

<span class="token keyword">let</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token keyword">of</span> set<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// red</span>
<span class="token comment">// green</span>
<span class="token comment">// blue</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div class="admonition warning"><p class="admonition-title">æ³¨æ„
</p><p>ï¼ˆ1ï¼‰å¾€ä¸€ä¸ª <code>Set</code> ä¸­æ·»åŠ ä¸¤æ¬¡ <code>NaN</code>ï¼Œåªæœ‰ä¸€ä¸ª <code>NaN</code> è¢«æ·»åŠ æˆåŠŸï¼Œå› ä¸º <code>Set</code> è®¤ä¸º <code>NaN</code> æ˜¯ç›¸ç­‰çš„ã€‚ä½†æ˜¯ä¸¥æ ¼ç›¸ç­‰æ“ä½œç¬¦è®¤ä¸º NaN æ˜¯ä¸ä¸€æ ·çš„ã€‚
ï¼ˆ2ï¼‰<code>Set</code> çš„åˆå§‹åŒ–å¯ä»¥ä¼ å…¥ä»»æ„å…·æœ‰ <code>Iterable</code> æ¥å£çš„æ•°æ®ã€‚
ï¼ˆ3ï¼‰<code>Set</code>çš„éå†é¡ºåºå°±æ˜¯æ’å…¥é¡ºåºã€‚è¿™ä¸ªç‰¹æ€§æœ‰æ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚ä½¿ç”¨ Set ä¿å­˜ä¸€ä¸ªå›è°ƒå‡½æ•°åˆ—è¡¨ï¼Œè°ƒç”¨æ—¶å°±èƒ½ä¿è¯æŒ‰ç…§æ·»åŠ é¡ºåºè°ƒç”¨ã€‚</p>
</div>

<h5 id="Setå¯¹è±¡çš„ä½œç”¨"><a href="#Setå¯¹è±¡çš„ä½œç”¨" class="headerlink" title="Setå¯¹è±¡çš„ä½œç”¨"></a>Setå¯¹è±¡çš„ä½œç”¨</h5><p>1ã€æ•°ç»„å»é‡ä¸å­—ç¬¦ä¸²å»é‡ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> mySet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>mySet<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//[1,2,3,5,4,6],ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰å°†å¯¹è±¡è§£æ„ä¸ºæ•°ç»„</span>

<span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token string">'ababbc'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="token comment">// "abc"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>2ã€åˆå¹¶ä¸¤ä¸ªSetå¯¹è±¡ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> mySetA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> mySetB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>mySetA<span class="token punctuation">,</span><span class="token operator">...</span>mySetB<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 5, 4, 6, 1, 2, 3, 5, 4, 6]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>3ã€äº¤é›†ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> mySetA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> mySetB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> intersect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>mySetA<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> mySetB<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>intersect<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//[3, 5, 4, 6]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>4ã€å·®é›†ï¼ˆA ç›¸å¯¹äº Bï¼‰ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> mySetA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> mySetB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> intersect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>mySetA<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token operator">!</span>mySetB<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>intersect<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//[1, 2]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="Setç»ƒä¹ é¢˜"><a href="#Setç»ƒä¹ é¢˜" class="headerlink" title="Setç»ƒä¹ é¢˜"></a>Setç»ƒä¹ é¢˜</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> s<span class="token operator">=</span><span class="token function">newSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">//ç­”æ¡ˆï¼š2</span>

<span class="token comment">//ä¸¤ä¸ªæ•°ç»„[1]å¹¶ä¸æ˜¯åŒä¸€ä¸ªå€¼ï¼Œä»–ä»¬åˆ†åˆ«å®šä¹‰çš„æ•°ç»„ï¼Œåœ¨å†…å­˜ä¸­åˆ†åˆ«å¯¹åº”ç€ä¸åŒçš„å­˜å‚¨åœ°å€ï¼Œå› æ­¤å¹¶ä¸æ˜¯ç›¸åŒçš„å€¼ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h4 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h4><p>WeakSet ç»“æ„ä¸ Set ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸é‡å¤çš„å€¼çš„é›†åˆã€‚ä½†æ˜¯ï¼Œå®ƒä¸ Set æœ‰ä¸¤ä¸ªåŒºåˆ«ï¼š</p>
<ol>
<li>WeakSet çš„æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ï¼Œè€Œä¸èƒ½æ˜¯å…¶ä»–ç±»å‹çš„å€¼ã€‚</li>
<li>WeakSet ä¸­çš„å¯¹è±¡éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå³åƒåœ¾å›æ”¶æœºåˆ¶ä¸è€ƒè™‘ WeakSet å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå…¶ä»–å¯¹è±¡éƒ½ä¸å†å¼•ç”¨è¯¥å¯¹è±¡ï¼Œé‚£ä¹ˆåƒåœ¾å›æ”¶æœºåˆ¶ä¼šè‡ªåŠ¨å›æ”¶è¯¥å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ï¼Œä¸è€ƒè™‘è¯¥å¯¹è±¡è¿˜å­˜åœ¨äº WeakSet ä¹‹ä¸­ã€‚</li>
</ol>
<div class="admonition info"><p>ï¼ˆ1ï¼‰åƒåœ¾å›æ”¶æœºåˆ¶æ ¹æ®å¯¹è±¡çš„å¯è¾¾æ€§ï¼ˆreachabilityï¼‰æ¥åˆ¤æ–­å›æ”¶ï¼Œå¦‚æœå¯¹è±¡è¿˜èƒ½è¢«è®¿é—®åˆ°ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶å°±ä¸ä¼šé‡Šæ”¾è¿™å—å†…å­˜ã€‚ç»“æŸä½¿ç”¨è¯¥å€¼ä¹‹åï¼Œæœ‰æ—¶ä¼šå¿˜è®°å–æ¶ˆå¼•ç”¨ï¼Œå¯¼è‡´å†…å­˜æ— æ³•é‡Šæ”¾ï¼Œè¿›è€Œå¯èƒ½ä¼šå¼•å‘å†…å­˜æ³„æ¼ã€‚<code>WeakSet</code> é‡Œé¢çš„å¼•ç”¨ï¼Œéƒ½ä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ‰€ä»¥å°±ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚å› æ­¤ï¼Œ<code>WeakSet</code> é€‚åˆä¸´æ—¶å­˜æ”¾ä¸€ç»„å¯¹è±¡ï¼Œä»¥åŠå­˜æ”¾è·Ÿå¯¹è±¡ç»‘å®šçš„ä¿¡æ¯ã€‚åªè¦è¿™äº›å¯¹è±¡åœ¨å¤–éƒ¨æ¶ˆå¤±ï¼Œå®ƒåœ¨ <code>WeakSet</code> é‡Œé¢çš„å¼•ç”¨å°±ä¼šè‡ªåŠ¨æ¶ˆå¤±ã€‚
ï¼ˆ2ï¼‰ç”±äºä¸Šé¢è¿™ä¸ªç‰¹ç‚¹ï¼Œ``WeakSet<code>çš„æˆå‘˜æ˜¯ä¸é€‚åˆå¼•ç”¨çš„ï¼Œå› ä¸ºå®ƒä¼šéšæ—¶æ¶ˆå¤±ã€‚å¦å¤–ï¼Œç”±äº</code>WeakSet<code>å†…éƒ¨æœ‰å¤šå°‘ä¸ªæˆå‘˜ï¼Œå–å†³äºåƒåœ¾å›æ”¶æœºåˆ¶æœ‰æ²¡æœ‰è¿è¡Œï¼Œè¿è¡Œå‰åå¾ˆå¯èƒ½æˆå‘˜ä¸ªæ•°æ˜¯ä¸ä¸€æ ·çš„ï¼Œè€Œåƒåœ¾å›æ”¶æœºåˆ¶ä½•æ—¶è¿è¡Œæ˜¯ä¸å¯é¢„æµ‹çš„ï¼Œå› æ­¤ &lt;u&gt;ES6 è§„å®š</code>WeakSet<code> ä¸å¯éå†ã€‚&lt;/u&gt; ï¼ˆ3ï¼‰</code>WeakSet<code>çš„ç‰¹ç‚¹ä¹Ÿé€‚ç”¨äº</code>WeakMap`ã€‚</p>
</div>

<p>WeakSet ç»“æ„æœ‰ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ã€‚</p>
<ul>
<li>**WeakSet.prototype.add(value)**ï¼šå‘ WeakSet å®ä¾‹æ·»åŠ ä¸€ä¸ªæ–°æˆå‘˜ã€‚</li>
<li>**WeakSet.prototype.delete(value)**ï¼šæ¸…é™¤ WeakSet å®ä¾‹çš„æŒ‡å®šæˆå‘˜ã€‚</li>
<li>**WeakSet.prototype.has(value)**ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªå€¼æ˜¯å¦åœ¨ WeakSet å®ä¾‹ä¹‹ä¸­ã€‚</li>
</ul>
<div class="admonition warning"><p class="admonition-title">æ³¨æ„
</p><p>æ²¡æœ‰éå†çš„æ–¹æ³•ã€‚</p>
</div>

<hr>
<h4 id="Mapï¼š"><a href="#Mapï¼š" class="headerlink" title="Mapï¼š"></a>Mapï¼š</h4><p>JavaScript çš„å¯¹è±¡ï¼ˆObjectï¼‰ï¼Œæœ¬è´¨ä¸Šæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼ˆHash ç»“æ„ï¼‰ï¼Œä½†æ˜¯ä¼ ç»Ÿä¸Šåªèƒ½ç”¨å­—ç¬¦ä¸²å½“ä½œé”®ã€‚è¿™ç»™å®ƒçš„ä½¿ç”¨å¸¦æ¥äº†å¾ˆå¤§çš„é™åˆ¶ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒES6 æä¾›äº† <code>Map</code> æ•°æ®ç»“æ„ã€‚å®ƒç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯â€œé”®â€çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ã€‚<code>Map</code> æ˜¯ä¸€ç§æ›´å®Œå–„çš„ Hash ç»“æ„å®ç°ã€‚</p>
<div class="admonition warning"><p class="admonition-title">æ³¨æ„
</p><p>ï¼ˆ1ï¼‰è™½ç„¶<code>NaN</code>ä¸ä¸¥æ ¼ç›¸ç­‰äºè‡ªèº«ï¼Œä½† <code>Map</code> å°†å…¶è§†ä¸ºåŒä¸€ä¸ªé”®ã€‚
ï¼ˆ2ï¼‰ä¸ä»…ä»…æ˜¯æ•°ç»„ï¼Œä»»ä½•å…·æœ‰ <code>Iterator</code> æ¥å£ã€ä¸”æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªåŒå…ƒç´ çš„æ•°ç»„çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥å½“ä½œ<code>Map</code>æ„é€ å‡½æ•°çš„å‚æ•°ã€‚</p>
</div>

<h5 id="Map-å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•"><a href="#Map-å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•" class="headerlink" title="Map å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•"></a>Map å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•</h5><p><strong>ï¼ˆ1ï¼‰size å±æ€§</strong></p>
<p><code>size</code>å±æ€§è¿”å› Map ç»“æ„çš„æˆå‘˜æ€»æ•°ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰Map.prototype.set(key, value)</strong></p>
<p><code>set</code>æ–¹æ³•è®¾ç½®é”®å<code>key</code>å¯¹åº”çš„é”®å€¼ä¸º<code>value</code>ï¼Œç„¶åè¿”å›æ•´ä¸ª Map ç»“æ„ã€‚å¦‚æœ<code>key</code>å·²ç»æœ‰å€¼ï¼Œåˆ™é”®å€¼ä¼šè¢«æ›´æ–°ï¼Œå¦åˆ™å°±æ–°ç”Ÿæˆè¯¥é”®ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰Map.prototype.get(key)</strong></p>
<p><code>get</code>æ–¹æ³•è¯»å–<code>key</code>å¯¹åº”çš„é”®å€¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°<code>key</code>ï¼Œè¿”å›<code>undefined</code>ã€‚</p>
<p><strong>ï¼ˆ4ï¼‰Map.prototype.has(key)</strong></p>
<p><code>has</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªé”®æ˜¯å¦åœ¨å½“å‰ Map å¯¹è±¡ä¹‹ä¸­ã€‚</p>
<p><strong>ï¼ˆ5ï¼‰Map.prototype.delete(key)</strong></p>
<p><code>delete</code>æ–¹æ³•åˆ é™¤æŸä¸ªé”®ï¼Œè¿”å›<code>true</code>ã€‚å¦‚æœåˆ é™¤å¤±è´¥ï¼Œè¿”å›<code>false</code>ã€‚</p>
<p><strong>ï¼ˆ6ï¼‰Map.prototype.clear()</strong></p>
<p><code>clear</code>æ–¹æ³•æ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</p>
<p><strong>Mapéå†çš„æ–¹æ³•ï¼š</strong></p>
<p>ä¸ <code>Set</code> ç›¸åŒã€‚éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼ŒMap çš„éå†é¡ºåºå°±æ˜¯æ’å…¥é¡ºåºã€‚Map ç»“æ„çš„é»˜è®¤éå†å™¨æ¥å£ï¼ˆ<code>Symbol.iterator</code>å±æ€§ï¼‰ï¼Œå°±æ˜¯<code>entries</code>æ–¹æ³•ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">map<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">===</span> map<span class="token punctuation">.</span>entries
<span class="token comment">// true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h5 id="Mapä¸å¯¹è±¡äº’æ¢ï¼š"><a href="#Mapä¸å¯¹è±¡äº’æ¢ï¼š" class="headerlink" title="Mapä¸å¯¹è±¡äº’æ¢ï¼š"></a>Mapä¸å¯¹è±¡äº’æ¢ï¼š</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token number">222</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// {a:111, b: 222}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="Mapä¸Setçš„åŒºåˆ«ï¼š"><a href="#Mapä¸Setçš„åŒºåˆ«ï¼š" class="headerlink" title="Mapä¸Setçš„åŒºåˆ«ï¼š"></a>Mapä¸Setçš„åŒºåˆ«ï¼š</h5><p>â€‹    1ã€<code>Set</code> ç”¨äºæ•°æ®å»é‡ï¼Œ<code>Map</code> ç”¨äºæ•°æ®å­˜å‚¨ã€‚</p>
<p>â€‹    2ã€<code>Set</code> æ˜¯ä¸€ç§é›†åˆçš„æ•°æ®ç»“æ„ï¼Œå…¶ä¸­å­˜å‚¨çš„æ˜¯å€¼ï¼Œ``Map` æ˜¯ä¸€ç§å­—å…¸çš„æ•°æ®ç»“æ„ï¼Œå…¶ä¸­å­˜å‚¨çš„æ˜¯é”®å€¼å¯¹ã€‚</p>
<p>â€‹    3ã€<code>Set</code> ç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯å®ƒé‡Œé¢æ¯ä¸€é¡¹çš„å€¼æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚</p>
<p>â€‹          <code>Map</code> ç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œå„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…å«å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ã€‚å…¶ä¸­é”®ä¸å…è®¸é‡å¤ã€‚</p>
<hr>
<h4 id="WaekMap"><a href="#WaekMap" class="headerlink" title="WaekMap"></a>WaekMap</h4><p><code>WeakMap</code>ç»“æ„ä¸<code>Map</code>ç»“æ„ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ç”¨äºç”Ÿæˆé”®å€¼å¯¹çš„é›†åˆã€‚<code>WeakMap</code>ä¸<code>Map</code>çš„åŒºåˆ«æœ‰ä¸¤ç‚¹:</p>
<ol>
<li><code>WeakMap</code>åªæ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼ˆ<code>null</code>é™¤å¤–ï¼‰ï¼Œä¸æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºé”®åã€‚</li>
<li><code>WeakMap</code>çš„é”®åæ‰€æŒ‡å‘çš„å¯¹è±¡ï¼Œä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ã€‚</li>
</ol>
<p><code>WeakMap</code>çš„ä¸“ç”¨åœºåˆå°±æ˜¯ï¼Œå®ƒçš„é”®æ‰€å¯¹åº”çš„å¯¹è±¡ï¼Œå¯èƒ½ä¼šåœ¨å°†æ¥æ¶ˆå¤±ã€‚<code>WeakMap</code>ç»“æ„æœ‰åŠ©äºé˜²æ­¢å†…å­˜æ³„æ¼ã€‚</p>
<hr>
<h3 id="ES6ä¸ºæ•°ç»„æ–°åŠ çš„æ–¹æ³•"><a href="#ES6ä¸ºæ•°ç»„æ–°åŠ çš„æ–¹æ³•" class="headerlink" title="ES6ä¸ºæ•°ç»„æ–°åŠ çš„æ–¹æ³•"></a>ES6ä¸ºæ•°ç»„æ–°åŠ çš„æ–¹æ³•</h3><p><strong>Array.from()</strong> æ–¹æ³•å°†ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡æˆ–è€…å¯éå†å¯¹è±¡è½¬æ¢æˆä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ã€‚</p>
<p><strong>Array.reduce((pre,cur) =&gt; {    },init)</strong> æ–¹æ³•å¯¹ç´¯åŠ å™¨å’Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»å·¦åˆ°å³åº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå°†å…¶å‡å°‘ä¸ºå•ä¸ªå€¼ã€‚</p>
<hr>
<h3 id="æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#æ¨¡æ¿å­—ç¬¦ä¸²" class="headerlink" title="æ¨¡æ¿å­—ç¬¦ä¸²"></a>æ¨¡æ¿å­—ç¬¦ä¸²</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//es5</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">"lux"</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"hello"</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//es6</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">"lux"</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//hello lux</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="å‚æ•°é»˜è®¤å€¼"><a href="#å‚æ•°é»˜è®¤å€¼" class="headerlink" title="å‚æ•°é»˜è®¤å€¼"></a>å‚æ•°é»˜è®¤å€¼</h3><p>ES6å…è®¸ä¸ºå‡½æ•°çš„å‚æ•°è®¾ç½®é»˜è®¤å€¼</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>y<span class="token operator">=</span><span class="token number">0</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>		<span class="token comment">//å‡½æ•°çš„å‚æ•°æ˜¯é»˜è®¤å£°æ˜çš„ï¼Œä¸éœ€è¦ä½¿ç”¨letå†æ¬¡å£°æ˜</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//	x=1,y=0</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<hr>
<h2 id="åƒåœ¾å›æ”¶æœºåˆ¶"><a href="#åƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="åƒåœ¾å›æ”¶æœºåˆ¶"></a>åƒåœ¾å›æ”¶æœºåˆ¶</h2><h3 id="Node-js-å’Œæµè§ˆå™¨-js-å¼•æ“çš„åƒåœ¾å›æ”¶æœºåˆ¶"><a href="#Node-js-å’Œæµè§ˆå™¨-js-å¼•æ“çš„åƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="Node.js å’Œæµè§ˆå™¨ js å¼•æ“çš„åƒåœ¾å›æ”¶æœºåˆ¶"></a>Node.js å’Œæµè§ˆå™¨ js å¼•æ“çš„åƒåœ¾å›æ”¶æœºåˆ¶</h3><p><strong>æµè§ˆå™¨ JS å¼•æ“çš„åƒåœ¾å›æ”¶æœºåˆ¶</strong></p>
<ol>
<li><p> é¡¹ç›®ä¸­ï¼Œå¦‚æœå­˜åœ¨å¤§é‡ä¸è¢«é‡Šæ”¾çš„å†…å­˜ï¼ˆå †/æ ˆ/ä¸Šä¸‹æ–‡ï¼‰ï¼Œé¡µé¢æ€§èƒ½ä¼šå˜å¾—å¾ˆæ…¢ã€‚å½“æŸäº›ä»£ç æ“ä½œä¸èƒ½è¢«åˆç†é‡Šæ”¾ï¼Œå°±ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚æˆ‘ä»¬å°½å¯èƒ½å‡å°‘ä½¿ç”¨é—­åŒ…ï¼Œå› ä¸ºå®ƒä¼šæ¶ˆè€—å†…å­˜ã€‚</p>
</li>
<li><p>æµè§ˆå™¨åƒåœ¾å›æ”¶æœºåˆ¶/å†…å­˜å›æ”¶æœºåˆ¶:</p>
<p> æµè§ˆå™¨çš„ <code>Javascript</code> å…·æœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆ<code>GC:Garbage Collecation</code>ï¼‰ï¼Œåƒåœ¾æ”¶é›†å™¨ä¼šå®šæœŸï¼ˆå‘¨æœŸæ€§ï¼‰æ‰¾å‡ºé‚£äº›ä¸å†ç»§ç»­ä½¿ç”¨çš„å˜é‡ï¼Œç„¶åé‡Šæ”¾å…¶å†…å­˜ã€‚</p>
</li>
</ol>
<h4 id="ä¸¤ç§åƒåœ¾å›æ”¶ç®—æ³•"><a href="#ä¸¤ç§åƒåœ¾å›æ”¶ç®—æ³•" class="headerlink" title="ä¸¤ç§åƒåœ¾å›æ”¶ç®—æ³•"></a>ä¸¤ç§åƒåœ¾å›æ”¶ç®—æ³•</h4><p><strong>å¼•ç”¨è®¡æ•°æ³•ï¼š</strong>å½“å‰å†…å­˜è¢«å ç”¨ä¸€æ¬¡ï¼Œè®¡æ•°ç´¯åŠ 1æ¬¡ï¼Œç§»é™¤å ç”¨å°±å‡1ï¼Œå‡åˆ°0æ—¶ï¼Œæµè§ˆå™¨å°±å›æ”¶å®ƒã€‚ï¼ˆIE 6,7ï¼‰</p>
<ul>
<li>å±€é™ï¼šå¦‚æœå­˜åœ¨å¾ªç¯å¼•ç”¨åˆ™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</li>
</ul>
<p><strong>æ ‡è®°æ¸…é™¤ï¼š</strong>åœ¨ <code>js</code> ä¸­ï¼Œæœ€å¸¸ç”¨çš„åƒåœ¾å›æ”¶æœºåˆ¶æ˜¯æ ‡è®°æ¸…é™¤ã€‚å½“å˜é‡è¿›å…¥æ‰§è¡Œç¯å¢ƒæ—¶ï¼Œè¢«æ ‡è®°ä¸ºâ€œè¿›å…¥ç¯å¢ƒâ€ï¼Œå½“å˜é‡ç¦»å¼€æ‰§è¡Œç¯å¢ƒæ—¶ï¼Œä¼šè¢«æ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€ã€‚åƒåœ¾å›æ”¶å™¨ä¼šé”€æ¯é‚£äº›å¸¦æ ‡è®°çš„å€¼å¹¶å›æ”¶å®ƒä»¬æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</p>
<ul>
<li><p>è¿™ä¸ªç®—æ³•å‡å®šè®¾ç½®ä¸€ä¸ªå«åšæ ¹ï¼ˆrootï¼‰çš„å¯¹è±¡ï¼ˆåœ¨ Javascript é‡Œï¼Œæ ¹æ˜¯å…¨å±€å¯¹è±¡ï¼‰ã€‚åƒåœ¾å›æ”¶å™¨å°†å®šæœŸä»æ ¹å¼€å§‹ï¼Œæ‰¾æ‰€æœ‰ä»æ ¹å¼€å§‹å¼•ç”¨çš„å¯¹è±¡ï¼Œç„¶åæ‰¾è¿™äº›å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡â€¦â€¦ä»æ ¹å¼€å§‹ï¼Œåƒåœ¾å›æ”¶å™¨å°†æ‰¾åˆ°æ‰€æœ‰å¯ä»¥è·å¾—çš„å¯¹è±¡å’Œæ”¶é›†æ‰€æœ‰ä¸èƒ½è·å¾—çš„å¯¹è±¡ã€‚</p>
</li>
<li><p>æµè§ˆå™¨ä¸å®šæ—¶å»æŸ¥æ‰¾å½“å‰å†…å­˜çš„å¼•ç”¨ï¼Œå¦‚æœæ²¡æœ‰è¢«å ç”¨äº†ï¼Œæµè§ˆå™¨ä¼šå›æ”¶å®ƒï¼›å¦‚æœè¢«å ç”¨ï¼Œå°±ä¸èƒ½å›æ”¶</p>
</li>
<li><p>å±€é™ï¼šé‚£äº›æ— æ³•ä»æ ¹å¯¹è±¡æŸ¥è¯¢åˆ°çš„å¯¹è±¡éƒ½å°†è¢«æ¸…é™¤ã€‚å°½ç®¡è¿™æ˜¯ä¸€ä¸ªé™åˆ¶ï¼Œä½†å®è·µä¸­æˆ‘ä»¬å¾ˆå°‘ä¼šç¢°åˆ°ç±»ä¼¼çš„æƒ…å†µï¼Œæ‰€ä»¥å¼€å‘è€…ä¸å¤ªä¼šå»å…³å¿ƒåƒåœ¾å›æ”¶æœºåˆ¶ã€‚</p>
</li>
<li><p>ä¼˜åŒ–æ‰‹æ®µï¼šå†…å­˜ä¼˜åŒ– ; æ‰‹åŠ¨é‡Šæ”¾ï¼šå–æ¶ˆå†…å­˜çš„å ç”¨å³å¯ã€‚</p>
<p>ï¼ˆ1ï¼‰å †å†…å­˜ï¼šfn = null ã€nullï¼šç©ºæŒ‡é’ˆå¯¹è±¡ã€‘</p>
<p>ï¼ˆ2ï¼‰æ ˆå†…å­˜ï¼šæŠŠä¸Šä¸‹æ–‡ä¸­ï¼Œè¢«å¤–éƒ¨å ç”¨çš„å †çš„å ç”¨å–æ¶ˆå³å¯ã€‚</p>
</li>
<li><p>å†…å­˜æ³„æ¼</p>
<p>åœ¨ JS ä¸­ï¼Œå¸¸è§çš„å†…å­˜æ³„éœ²ä¸»è¦æœ‰ 4 ç§ï¼šå…¨å±€å˜é‡ã€é—­åŒ…ã€DOM å…ƒç´ çš„å¼•ç”¨ã€å®šæ—¶å™¨ã€‚</p>
<p>ï¼ˆ1ï¼‰å…¨å±€å˜é‡</p>
<p><strong>è§£å†³æ–¹æ³•ï¼šä¸¥æ ¼æ¨¡å¼ã€‚</strong>åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå½“å¼•ç”¨ä¸€ä¸ªä¸ºå£°æ˜çš„å˜é‡æ—¶å°†åˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡ã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œå…¨å±€å¯¹è±¡æ˜¯ windowï¼Œè¿™æ„å‘³ç€è¿™ä¸ªæœªå£°æ˜çš„å˜é‡å°†æ³„éœ²åˆ°å…¨å±€ï¼Œå¹¶ä¸”æ— æ³•è¢«åƒåœ¾å›æ”¶ç®—æ³•æ¸…é™¤ã€‚å¦‚æœä¸€å®šè¦ä½¿ç”¨å…¨å±€å˜é‡ä¸´æ—¶å­˜å‚¨å’Œå¤„ç†å¤§é‡ä¿¡æ¯ï¼Œå¿…é¡»åœ¨ä½¿ç”¨å®Œè¿‡åæ‰‹åŠ¨å°†å…¶è®¾ç½® <code>null</code>ã€‚</p>
<p>ï¼ˆ2ï¼‰é—­åŒ…</p>
<p><strong>è§£å†³æ–¹æ³•ï¼šæ‰‹åŠ¨å°†å˜é‡èµ‹å€¼ä¸º <code>null</code>ã€‚</strong>é—­åŒ…æœ¬èº«ä¸å­˜åœ¨å†…å­˜æ³„éœ²ï¼Œä½¿ç”¨ä¸å½“æ‰ä¼šå¯¼è‡´å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚é—­åŒ…ä¼šç»´æŒå‡½æ•°å†…éƒ¨å±€éƒ¨å˜é‡ï¼Œå¦‚æœå±€éƒ¨å˜é‡æ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œåˆ™å¤šæ¬¡è°ƒç”¨å‡½æ•°ä¼šå¯¼è‡´å†…å­˜å ç”¨ä¸æ–­å‡é«˜ã€‚</p>
<p>ï¼ˆ3ï¼‰å®šæ—¶å™¨</p>
<p><strong>è§£å†³æ–¹æ³•ï¼šåœ¨å®šæ—¶å™¨å®Œæˆå·¥ä½œçš„æ—¶å€™ï¼Œæ‰‹åŠ¨æ¸…æ¥šå®šæ—¶å™¨ã€‚</strong>å®šæ—¶å™¨çš„å›è°ƒå‡½æ•°ä¸­å¼•ç”¨çš„å˜é‡å·²ç»å¯ä»¥è¢«æ”¶å›ï¼Œä½†æ˜¯ç”±äºå®šæ—¶å™¨çš„å›è°ƒå‡½æ•°è¿˜å­˜åœ¨ï¼Œå› ä¸ºä¸ä¹‹å…³è”çš„æ•°æ®å¯¹è±¡å°±æ— æ³•è¢«å›æ”¶ã€‚</p>
<p>ï¼ˆ4ï¼‰DOM å…ƒç´ çš„å¼•ç”¨</p>
<p><strong>è§£å†³æ–¹å¼ï¼šæ‰‹åŠ¨ç»™ DOM èŠ‚ç‚¹çš„å¼•ç”¨èµ‹å€¼ä¸º <code>null</code>ã€‚</strong>åœ¨å¼•ç”¨æŸä¸ª DOM å…ƒç´ åä» DOM ä¸­ç§»é™¤è¯¥èŠ‚ç‚¹åä»ç„¶èƒ½è®¿é—®è¯¥ DOM èŠ‚ç‚¹çš„å¼•ç”¨ã€‚</p>
</li>
</ul>
<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><ul>
<li><a target="_blank" rel="noopener" href="https://vue3js.cn/interview/JavaScript/memory_leak.html">é¢è¯•å®˜ï¼šè¯´è¯´ JavaScript ä¸­å†…å­˜æ³„æ¼çš„å‡ ç§æƒ…å†µï¼Ÿ | webå‰ç«¯é¢è¯• - é¢è¯•å®˜ç³»åˆ— (vue3js.cn)</a></li>
<li><a target="_blank" rel="noopener" href="https://ruanyifeng.com/blog/2017/04/memory-leak.html">JavaScript å†…å­˜æ³„æ¼æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— (ruanyifeng.com)</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903917986267143">å½»åº•æŒæ¡jså†…å­˜æ³„æ¼ä»¥åŠå¦‚ä½•é¿å… - æ˜é‡‘ (juejin.cn)</a></li>
</ul>
<hr>
<h2 id="æ‰‹å†™ä»£ç "><a href="#æ‰‹å†™ä»£ç " class="headerlink" title="æ‰‹å†™ä»£ç "></a>æ‰‹å†™ä»£ç </h2><h3 id="æ·±æ‹·è´æµ…æ‹·è´"><a href="#æ·±æ‹·è´æµ…æ‹·è´" class="headerlink" title="æ·±æ‹·è´æµ…æ‹·è´"></a>æ·±æ‹·è´æµ…æ‹·è´</h3><h4 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h4><p>æ‹·è´åï¼Œæ–°æ‹·è´çš„å¯¹è±¡å†…éƒ¨çš„å¼•ç”¨æ•°æ®ç±»å‹ä¼šéšç€æºå¯¹è±¡çš„å˜æ¢è€Œå˜åŒ–ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// ES6</span>
<span class="token comment">/*
 * target: æ‹·è´çš„å¯¹è±¡
 * sources: è¢«æ‹·è´çš„å¯¹è±¡
 */</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> sources<span class="token punctuation">)</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> print <span class="token operator">=</span> console<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment">/* æµ…æ‹·è´ */</span>
<span class="token keyword">let</span> a <span class="token operator">=</span>  <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">hobby</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"ç¾é£Ÿ"</span><span class="token punctuation">,</span> <span class="token string">"éŸ³ä¹"</span><span class="token punctuation">,</span> <span class="token string">"ç¯®çƒ"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> b<span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// æ‰‹åŠ¨å®ç°</span>
<span class="token comment">/*
for (const i in a) {
  b[i] = a[i];
}
*/</span>

<span class="token comment">// ES6æ–¹æ³•å®ç°</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>

a<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"æå››"</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>hobby<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"æ‰“æ¸¸æˆ"</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">/**è¾“å‡º
 * { name: 'æå››', age: 23, hobby: [ 'ç¾é£Ÿ', 'éŸ³ä¹', 'æ‰“æ¸¸æˆ' ] }
 * { name: 'å¼ ä¸‰', age: 23, hobby: [ 'ç¾é£Ÿ', 'éŸ³ä¹', 'æ‰“æ¸¸æˆ' ] }
 */</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h4><p>æ‹·è´åï¼Œæ–°æ‹·è´çš„å¯¹è±¡å†…éƒ¨æ‰€æœ‰æ•°æ®éƒ½æ˜¯ç‹¬ç«‹å­˜åœ¨çš„ï¼Œå¼•ç”¨ç±»å‹çš„æ•°æ®ä¸ä¼šéšç€æºå¯¹è±¡çš„æ”¹å˜è€Œæ”¹å˜ã€‚</p>
<p>ä¸¤ç§å®ç°æ–¹å¼ï¼š</p>
<ol>
<li>é€’å½’æ‹·è´<ol>
<li>è€ƒè™‘ES6ä¹‹åæ–°å¢çš„æ•°æ®ç±»å‹ï¼›</li>
<li>å½“æ•°æ®å±‚çº§å¾ˆæ·±æ—¶å­˜åœ¨æ ˆæº¢å‡ºçš„é—®é¢˜ï¼›</li>
<li>æ— æ³•é¿å…å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼›</li>
</ol>
</li>
<li>åˆ©ç”¨JSONå‡½æ•°æ‹·è´<ol>
<li>åªé€‚åˆæ‹·è´ç®€å•çš„å¯¹è±¡ï¼Œå¦‚æœæ‹·è´çš„å¯¹è±¡ä¸­å­˜åœ¨JSåŸç”Ÿå¯¹è±¡å¦‚Dateï¼ŒRegExpã€Erroræˆ–è€…å‡½æ•°å¼•ç”¨æ‹·è´å°±æœ‰é—®é¢˜ã€‚</li>
</ol>
</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> print <span class="token operator">=</span> console<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment">/* 1. é€’å½’æ‹·è´ */</span>
<span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> source <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> source <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> source<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> target <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> k <span class="token keyword">in</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> source<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>source<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> source<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> target<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> a <span class="token operator">=</span>  <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">hobby</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"ç¾é£Ÿ"</span><span class="token punctuation">,</span> <span class="token string">"éŸ³ä¹"</span><span class="token punctuation">,</span> <span class="token string">"ç¯®çƒ"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>

a<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"æå››"</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>hobby<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"æ‰“æ¸¸æˆ"</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**è¾“å‡º
 * { name: 'æå››', age: 23, hobby: [ 'ç¾é£Ÿ', 'éŸ³ä¹', 'æ‰“æ¸¸æˆ' ] }
 * { name: 'å¼ ä¸‰', age: 23, hobby: [ 'ç¾é£Ÿ', 'éŸ³ä¹', 'ç¯®çƒ' ] }
 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> print <span class="token operator">=</span> console<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment">/* 2. JSONè½¬æ¢ */</span>
<span class="token keyword">let</span> a <span class="token operator">=</span>  <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">hobby</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"ç¾é£Ÿ"</span><span class="token punctuation">,</span> <span class="token string">"éŸ³ä¹"</span><span class="token punctuation">,</span> <span class="token string">"ç¯®çƒ"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

a<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"æå››"</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>hobby<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"æ‰“æ¸¸æˆ"</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**è¾“å‡º
 * { name: 'æå››', age: 23, hobby: [ 'ç¾é£Ÿ', 'éŸ³ä¹', 'æ‰“æ¸¸æˆ' ] }
 * { name: 'å¼ ä¸‰', age: 23, hobby: [ 'ç¾é£Ÿ', 'éŸ³ä¹', 'ç¯®çƒ' ] }
 */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="References-2"><a href="#References-2" class="headerlink" title="References"></a>References</h4><ol>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/l_ppp/article/details/106281069">é¢è¯•é¢˜è¢«é—®åˆ°å†ä¹Ÿä¸æ…Œï¼Œæ·±ç©¶JavaScriptä¸­çš„æ·±æ‹·è´ä¸æµ…æ‹·è´_ã€Œé›¶ä¸€ã€çš„åšå®¢-CSDNåšå®¢_jsæ·±æ‹·è´å’Œæµ…æ‹·è´é¢è¯•é¢˜</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/7047007027456901157">æ‰‹æ’•é¢è¯•é¢˜ï¼ˆ1ï¼‰â€”â€”æ·±æ‹·è´ - æ˜é‡‘ (juejin.cn)</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000016672263">æ·±æ‹·è´çš„ç»ˆææ¢ç´¢ï¼ˆ99%çš„äººéƒ½ä¸çŸ¥é“ï¼‰ - SegmentFault æ€å¦</a></li>
</ol>
<hr>
<h3 id="é˜²æŠ–èŠ‚æµ"><a href="#é˜²æŠ–èŠ‚æµ" class="headerlink" title="é˜²æŠ–èŠ‚æµ"></a>é˜²æŠ–èŠ‚æµ</h3><h4 id="åŸç†ä»‹ç»-åº”ç”¨åœºæ™¯"><a href="#åŸç†ä»‹ç»-åº”ç”¨åœºæ™¯" class="headerlink" title="åŸç†ä»‹ç»+åº”ç”¨åœºæ™¯"></a>åŸç†ä»‹ç»+åº”ç”¨åœºæ™¯</h4><p><code>èŠ‚æµï¼ˆthrottleï¼‰</code>ï¼šäº‹ä»¶è§¦å‘åï¼Œè§„å®šæ—¶é—´å†…ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°ä¸èƒ½å†æ¬¡è¢«è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨è§„å®šçš„æ—¶é—´å†…ï¼Œå‡½æ•°åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œä¸”æ˜¯æœ€å…ˆè¢«è§¦å‘è°ƒç”¨çš„é‚£æ¬¡ã€‚é¡¾åæ€ä¹‰ï¼Œå¯ä»¥å‡å°‘ä¸€æ®µæ—¶é—´å†…äº‹ä»¶çš„è§¦å‘é¢‘ç‡ã€‚ï¼ˆç‹è€…è£è€€è‹±é›„å›åŸï¼‰</p>
<p><code>é˜²æŠ–</code>ï¼šå¤šæ¬¡è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”æ˜¯åœ¨è§¦å‘æ“ä½œç»“æŸæ—¶æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸€ä¸ªäº‹ä»¶è¢«è§¦å‘å‡†å¤‡æ‰§è¡Œäº‹ä»¶å‡½æ•°å‰ï¼Œä¼šç­‰å¾…ä¸€å®šçš„æ—¶é—´ï¼ˆè¿™æ—¶é—´æ˜¯ç å†œè‡ªå·±å»å®šä¹‰çš„ï¼Œæ¯”å¦‚ 1 ç§’ï¼‰ï¼Œå¦‚æœæ²¡æœ‰å†æ¬¡è¢«è§¦å‘ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œï¼Œå¦‚æœè¢«è§¦å‘äº†ï¼Œé‚£å°±æœ¬æ¬¡ä½œåºŸï¼Œé‡æ–°ä»æ–°è§¦å‘çš„æ—¶é—´å¼€å§‹è®¡ç®—ï¼Œå¹¶å†æ¬¡ç­‰å¾… 1 ç§’ï¼Œç›´åˆ°èƒ½æœ€ç»ˆæ‰§è¡Œï¼ï¼ˆæœç´¢æ¡†å­—æ®µå¡«å†™å®Œæˆå†è¯·æ±‚ï¼‰</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong><br><code>èŠ‚æµ</code>ï¼šæ»šåŠ¨åŠ è½½æ›´å¤šã€æœç´¢æ¡†çš„æœç´¢è”æƒ³åŠŸèƒ½ã€é«˜é¢‘ç‚¹å‡»ã€è¡¨å•é‡å¤æäº¤â€¦â€¦</p>
<ul>
<li>é¼ æ ‡è¿ç»­ä¸æ–­åœ°è§¦å‘æŸäº‹ä»¶ï¼ˆå¦‚ç‚¹å‡»ï¼‰ï¼Œåªåœ¨å•ä½æ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡ï¼›</li>
<li>æ‡’åŠ è½½æ—¶è¦ç›‘å¬è®¡ç®—æ»šåŠ¨æ¡çš„ä½ç½®ï¼Œä½†ä¸å¿…æ¯æ¬¡æ»‘åŠ¨éƒ½è§¦å‘ï¼Œå¯ä»¥é™ä½è®¡ç®—çš„é¢‘ç‡ï¼Œè€Œä¸å¿…å»æµªè´¹ CPU èµ„æºï¼›</li>
</ul>
<p><code>é˜²æŠ–</code>ï¼šæœç´¢è”æƒ³åŠŸèƒ½ã€‚</p>
<h4 id="æ‰‹å†™èŠ‚æµå‡½æ•°"><a href="#æ‰‹å†™èŠ‚æµå‡½æ•°" class="headerlink" title="æ‰‹å†™èŠ‚æµå‡½æ•°"></a>æ‰‹å†™èŠ‚æµå‡½æ•°</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/**
 * èŠ‚æµå‡½æ•° ä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸€æ¬¡åï¼Œåªæœ‰å¤§äºè®¾å®šçš„æ‰§è¡Œå‘¨æœŸæ‰ä¼šæ‰§è¡Œç¬¬äºŒæ¬¡ã€‚æœ‰ä¸ªéœ€è¦é¢‘ç¹è§¦å‘çš„å‡½æ•°ï¼Œå‡ºäºä¼˜åŒ–æ€§èƒ½çš„è§’åº¦ï¼Œåœ¨è§„å®šæ—¶é—´å†…ï¼Œåªè®©å‡½æ•°è§¦å‘çš„ç¬¬ä¸€æ¬¡ç”Ÿæ•ˆï¼Œåé¢çš„ä¸ç”Ÿæ•ˆã€‚
 * @param fnè¦è¢«èŠ‚æµçš„å‡½æ•°
 * @param delayè§„å®šçš„æ—¶é—´
 */</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®°å½•ä¸Šä¸€æ¬¡å‡½æ•°è§¦å‘çš„æ—¶é—´</span>
    <span class="token keyword">let</span> lastTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// è®°å½•å½“å‰å‡½æ•°è§¦å‘çš„æ—¶é—´</span>
        <span class="token keyword">let</span> nowTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nowTime <span class="token operator">-</span> lastTime <span class="token operator">&gt;</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ä¿®æ­£thisæŒ‡å‘é—®é¢˜</span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// åŒæ­¥æ‰§è¡Œç»“æŸæ—¶é—´</span>
            lastTime <span class="token operator">=</span> nowTime<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span>onScroll <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'scrolläº‹ä»¶è¢«è§¦å‘åˆ°äº†'</span> <span class="token operator">+</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">/**
 * é˜²æŠ–å‡½æ•°  ä¸€ä¸ªéœ€è¦é¢‘ç¹è§¦å‘çš„å‡½æ•°ï¼Œåœ¨è§„å®šæ—¶é—´å†…ï¼Œåªè®©æœ€åä¸€æ¬¡ç”Ÿæ•ˆï¼Œå‰é¢çš„ä¸ç”Ÿæ•ˆ
 * @param fnè¦è¢«èŠ‚æµçš„å‡½æ•°
 * @param delayè§„å®šçš„æ—¶é—´
 */</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®°å½•ä¸Šä¸€æ¬¡çš„å»¶æ—¶å™¨</span>
    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ¸…é™¤ä¸Šä¸€æ¬¡çš„å»¶æ—¶å™¨</span>
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token comment">// é‡æ–°è®¾ç½®æ–°çš„å»¶æ—¶å™¨</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ä¿®æ­£thisæŒ‡å‘é—®é¢˜</span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æŒ‰é’®è¢«ç‚¹å‡»äº†'</span> <span class="token operator">+</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="æ‰‹å†™Ajaxå¹¶ç”¨Promiseå°è£…"><a href="#æ‰‹å†™Ajaxå¹¶ç”¨Promiseå°è£…" class="headerlink" title="æ‰‹å†™Ajaxå¹¶ç”¨Promiseå°è£…"></a>æ‰‹å†™Ajaxå¹¶ç”¨Promiseå°è£…</h3><p>Ajaxçš„åŸç†ç®€å•æ¥è¯´é€šè¿‡<strong>XmlHttpRequest</strong>å¯¹è±¡æ¥<strong>å‘æœåŠ¡å™¨å‘é€å¼‚æ­¥è¯·æ±‚</strong>ï¼Œä»<strong>æœåŠ¡å™¨è·å¾—æ•°æ®</strong>ï¼Œç„¶å<strong>ç”¨javascriptæ¥æ“ä½œDOMè€Œæ›´æ–°é¡µé¢</strong>ã€‚</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>url<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>type <span class="token operator">=</span> <span class="token string">'get'</span><span class="token punctuation">,</span>dataType <span class="token operator">=</span> <span class="token string">'json'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span>url<span class="token punctuation">,</span>dataType<span class="token punctuation">)</span>
        xhr<span class="token punctuation">.</span><span class="token function-variable function">onReadyStateChange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span><span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status<span class="token operator">&lt;</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<hr>
<h3 id="æ‰‹å†™async-await"><a href="#æ‰‹å†™async-await" class="headerlink" title="æ‰‹å†™async await"></a>æ‰‹å†™async await</h3>
                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        æ–‡ç« ä½œè€…:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">elegantlee</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        æ–‡ç« é“¾æ¥:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://elegantlee.github.io/2022/08/05/ji-zhu-kai-fa/javascript-ji-chu-yu-jin-jie/">https://elegantlee.github.io/2022/08/05/ji-zhu-kai-fa/javascript-ji-chu-yu-jin-jie/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        ç‰ˆæƒå£°æ˜:
                    </i>
                </span>
                <span class="reprint-info">
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ¥å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº
                    <a href="/about" target="_blank">elegantlee</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>å¤åˆ¶æˆåŠŸï¼Œè¯·éµå¾ªæœ¬æ–‡çš„è½¬è½½è§„åˆ™</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">æŸ¥çœ‹</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/JavaScript/">
                                    <span class="chip bg-color">JavaScript</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="qq,qzone,wechat" data-wechat-qrcode-helper="<p>å¾®ä¿¡æ‰«ä¸€æ‰«å³å¯åˆ†äº«ï¼</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">èµ</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">ä½ çš„èµè¯†æ˜¯æˆ‘å‰è¿›çš„åŠ¨åŠ›</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">æ”¯ä»˜å®</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">å¾® ä¿¡</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.jpg" class="reward-img" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    
        <style>
    .waline-card {
        margin: 1.5rem auto;
    }
    .waline-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #waline p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }
    #waline blockquote p {
        text-indent: 0.2rem;
    }
    #waline a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }
    #waline img {
        max-width: 100%;
        cursor: pointer;
    }
    #waline ol li {
        list-style-type: decimal;
    }
    #waline ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }
    #waline ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }
    #waline ul li {
        list-style-type: disc;
    }
    #waline ul ul li {
        list-style-type: circle;
    }
    #waline table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }
    #waline table, th, td {
        border: 0;
    }
    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }
    #waline table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }
    #waline table td {
        min-width: 80px;
    }
    #waline h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }
    #waline h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }
    #waline h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }
    #waline h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }
    #waline h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }
    #waline h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }
    #waline p {
        font-size: 1rem;
        line-height: 1.5rem;
    }
    #waline hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }
    #waline blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }
    #waline pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }
    #waline code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }
    #waline pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }
    #waline pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }
    #waline code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }
    #waline [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
    #waline b,
    strong {
        font-weight: bold;
    }
    #waline dfn {
        font-style: italic;
    }
    #waline small {
        font-size: 85%;
    }
    #waline cite {
        font-style: normal;
    }
    #waline mark {
        background-color: #fcf8e3;
        padding: .2em;
    }
    #waline table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }
    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }
    #waline table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }
    #waline table td {
        min-width: 80px;
    }
    #waline [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
  </style>
  
  <div class="card waline-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>è¯„è®º</span>
    </div>
    <div id="waline" class="card-content" style="display: grid">
    </div>
  </div>
  

  <!-- <script src="//cdn.jsdelivr.net/npm/@waline/client"></script> -->
  <script src="/libs/waline/Waline.min.js"></script>
  <script>
    new Waline({
        el: '#waline',
        serverURL: 'https://waline-server-ruddy.vercel.app/',
        avatar: 'mm'    
    });
  </script> 
    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="far fa-dot-circle"></i>&nbsp;æœ¬ç¯‡
            </div>
            <div class="card">
                <a href="/2022/08/05/ji-zhu-kai-fa/javascript-ji-chu-yu-jin-jie/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/10.jpg" class="responsive-img" alt="JavaScriptåŸºç¡€ä¸è¿›é˜¶">
                        
                        <span class="card-title">JavaScriptåŸºç¡€ä¸è¿›é˜¶</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            è®°å½•JavaScript çš„åŸºç¡€çŸ¥è¯†ç‚¹å’Œé«˜çº§ç”¨æ³•
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-08-05
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/" class="post-category">
                                    æŠ€æœ¯å¼€å‘
                                </a>
                            
                            
                        </span>
                    </div>
                </div>

                
                <div class="card-action article-tags">
                    
                    <a href="/tags/JavaScript/">
                        <span class="chip bg-color">JavaScript</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                ä¸‹ä¸€ç¯‡&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/07/27/ji-zhu-chen-dian/qian-duan-jin-jie/web-xing-neng-de-shang-ye-an-li/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/9.jpg" class="responsive-img" alt="webæ€§èƒ½çš„å•†ä¸šæ¡ˆä¾‹">
                        
                        <span class="card-title">webæ€§èƒ½çš„å•†ä¸šæ¡ˆä¾‹</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-07-27
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%8A%80%E6%9C%AF%E6%B2%89%E6%B7%80/" class="post-category">
                                    æŠ€æœ¯æ²‰æ·€
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/web%E6%80%A7%E8%83%BD/">
                        <span class="chip bg-color">webæ€§èƒ½</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + 'æ¥æº: One Piece<br />'
            + 'æ–‡ç« ä½œè€…: elegantlee<br />'
            + 'æ–‡ç« é“¾æ¥: <a href="' + url + '">' + url + '</a><br />'
            + 'æœ¬æ–‡ç« è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½éƒ½è¯·æ³¨æ˜å‡ºå¤„ã€‚';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- ä»£ç å—åŠŸèƒ½ä¾èµ– -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>


  <!-- æ˜¯å¦åŠ è½½ä½¿ç”¨è‡ªå¸¦çš„ prismjs. -->
  <script type="text/javascript" src="/libs/prism/prism.min.js"></script>


<!-- ä»£ç è¯­è¨€ -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- ä»£ç å—å¤åˆ¶ -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- ä»£ç å—æ”¶ç¼© -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;ç›®å½•</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC æ‚¬æµ®æŒ‰é’®. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* ä¿®å¤æ–‡ç« å¡ç‰‡ div çš„å®½åº¦. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // åˆ‡æ¢TOCç›®å½•å±•å¼€æ”¶ç¼©çš„ç›¸å…³æ“ä½œ.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021-2022</span>
            
            <a href="/about" target="_blank">elegantlee</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;æ€»è®¿é—®é‡:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;æ€»è®¿é—®äººæ•°:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- è¿è¡Œå¤©æ•°æé†’. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/ElegantLee" class="tooltipped" target="_blank" data-tooltip="è®¿é—®æˆ‘çš„GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:superlee6699@163.com" class="tooltipped" target="_blank" data-tooltip="é‚®ä»¶è”ç³»æˆ‘" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=641731718" class="tooltipped" target="_blank" data-tooltip="QQè”ç³»æˆ‘: 641731718" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS è®¢é˜…" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- æœç´¢é®ç½©æ¡† -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;æœç´¢</span>
            <input type="search" id="searchInput" name="s" placeholder="è¯·è¾“å…¥æœç´¢çš„å…³é”®å­—"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- é›ªèŠ±ç‰¹æ•ˆ -->
     
        <script type="text/javascript">
            // åªåœ¨æ¡Œé¢ç‰ˆç½‘é¡µå¯ç”¨ç‰¹æ•ˆ
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/snow.js"><\/script>');
            }
        </script>
    

    <!-- é¼ æ ‡æ˜Ÿæ˜Ÿç‰¹æ•ˆ -->
    

    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--è…¾è®¯å…”å°å·¢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
